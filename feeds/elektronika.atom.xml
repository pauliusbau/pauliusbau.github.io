<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Paulius Bautrėnas - Elektronika</title><link href="https://paulius.bautrenas.lt/" rel="alternate"></link><link href="https://paulius.bautrenas.lt/feeds/elektronika.atom.xml" rel="self"></link><id>https://paulius.bautrenas.lt/</id><updated>2015-07-01T14:01:00+03:00</updated><subtitle>#define TRUE FALSE</subtitle><entry><title>TARDIS modeliuko modifikacija</title><link href="https://paulius.bautrenas.lt/tardis.html" rel="alternate"></link><published>2015-07-01T14:01:00+03:00</published><updated>2015-07-01T14:01:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-07-01:/tardis.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8793.jpg"&gt;&lt;img alt="IMG_8793" class="aligncenter wp-image-799 size-medium" src="https://paulius.bautrenas.lt/images/tardis/IMG_8793-625.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Esu didelis &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Doctor_Who"&gt;Doctor Who&lt;/a&gt; gerbėjas. Nesu toks pamišęs, kaip &amp;quot;tikrieji&amp;quot; &lt;a class="reference external" href="http://www.urbandictionary.com/define.php?term=Whovian"&gt;Whovian&lt;/a&gt;'ai, kurie mintinai moka visus dialogus, atsimena senąsias serialo serijas, žino aktorių biografijas ir pan., bet net ir man ilgą laiką norėjosi turėti nors kokios Doctor Who atributikos. Iš ebay pirkti buvo brangu, o Lietuvoje serialų atributikos net su …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8793.jpg"&gt;&lt;img alt="IMG_8793" class="aligncenter wp-image-799 size-medium" src="https://paulius.bautrenas.lt/images/tardis/IMG_8793-625.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Esu didelis &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Doctor_Who"&gt;Doctor Who&lt;/a&gt; gerbėjas. Nesu toks pamišęs, kaip &amp;quot;tikrieji&amp;quot; &lt;a class="reference external" href="http://www.urbandictionary.com/define.php?term=Whovian"&gt;Whovian&lt;/a&gt;'ai, kurie mintinai moka visus dialogus, atsimena senąsias serialo serijas, žino aktorių biografijas ir pan., bet net ir man ilgą laiką norėjosi turėti nors kokios Doctor Who atributikos. Iš ebay pirkti buvo brangu, o Lietuvoje serialų atributikos net su žiburiu nesurasi, todėl ilgą laiką taip ir gyvenau svajodamas apie kokį nors menkniekį. 2014 m. pabaigoje svečiavausi Stoholme, kur visai netikėtai ir tuo labiau visai neplanuotai vienoje komiksų parduotuvėje užtikau Doctor Who kampelį. Tą kart spjoviau į visus suvalkietiško kraujo nuogąstavimus ir įsigijau TARDIS ir Dalek'o modeliukus. Dalek'u likau labai patenkintas, o vat TARDIS mano įgeidžių šiek tiek netenkino. Nors modelio kosmetinė išvaizda ir pagaminimo kokybė yra tiesiog ideali, tačiau TARDIS lemputę galima tik įjungti/išjungti, t. y. arba ji šviečia, arba ne, o ne pulsuoja, kaip turėtų. Na bet tai lengvai pataisoma..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8791.jpg"&gt;&lt;img alt="IMG_8791" class="aligncenter size-medium wp-image-798" src="https://paulius.bautrenas.lt/images/tardis/IMG_8791-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8797.jpg"&gt;&lt;img alt="IMG_8797" class="aligncenter size-medium wp-image-800" src="https://paulius.bautrenas.lt/images/tardis/IMG_8797-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip matyti iš nuotraukų viršuje, TARDIS modeliuko viduje nieko neįprasto: baltas šviesos diodas, CR1632 baterija ir jungiklis. Savaime supranta, norint kad šviesos diodas pulsuotų, reikia kažką papildomai prikonstruoti. Paprasčiausias variantas butų surinkti schemą su 555, kaip yra aprašyta &lt;a class="reference external" href="http://www.cemetech.net/forum/viewtopic.php?p=191885&amp;amp;sid=e581d9f744a9f2a438d9f4dd85d0c3e7#191885"&gt;čia&lt;/a&gt;, tačiau man norėjosi kažko įmantresnio. Nenorėjau, kad TARDIS lemputė pulsuotų visą laiką. Norėjau, kad įjungus maitinimą, TARDIS lemputė &amp;quot;papulsuotų&amp;quot; kelis kartus ir išsijungtų, o stuktelėjus TARDIS, lemputė vėl pradėtų pulsuoti. Taip gimė elementari schema su ATTiny85 (tokį turėjau):&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/tardis.png"&gt;&lt;img alt="tardis" class="aligncenter size-full wp-image-810" src="https://paulius.bautrenas.lt/images/tardis/tardis.png" style="width: 998px; height: 379px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Schemoje panaudotas vibracijos jutiklis &amp;quot;SW-18020P&amp;quot;, kurių tuziną už 1 eurą pirkau iš AliExpress. Jutiklio sandara yra pavaizduota nuotraukose apačioje. Jutiklis yra prijungtas prie mikrovaldiklio pertraukties INT0 išvado PB2.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8802.jpg"&gt;&lt;img alt="IMG_8802" class="aligncenter size-medium wp-image-801" src="https://paulius.bautrenas.lt/images/tardis/IMG_8802-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8804.jpg"&gt;&lt;img alt="IMG_8804" class="aligncenter size-medium wp-image-802" src="https://paulius.bautrenas.lt/images/tardis/IMG_8804-225x300.jpg" style="width: 225px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Schemą surinkau ant &amp;quot;oro&amp;quot; ir ant karštų klijų. Dėl viso pikto nusprendžiau palikti prilituotą ISP jungtį. Šis sprendimas išties pasiteisino, nes viską surinkus, teko mikrovaldiklio kodą dar šiek tiek patobulinti.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8808.jpg"&gt;&lt;img alt="IMG_8808" class="aligncenter size-medium wp-image-803" src="https://paulius.bautrenas.lt/images/tardis/IMG_8808-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8811.jpg"&gt;&lt;img alt="IMG_8811" class="aligncenter size-medium wp-image-804" src="https://paulius.bautrenas.lt/images/tardis/IMG_8811-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Mikrovaldiklio programa gavosi irgi gan paprasta. Mikrovaldiklis, vos tik gavęs maitinimą, &lt;em&gt;tardis_count = 3&lt;/em&gt; kartus sužybsi šviesos diodu ir nueina į Power-down energijos taupymo režimą, kurio metu valgo tik ~0,1 μA srovės. Suveikus vibracijos jutikliui, mikrovaldiklis pabunda ir vėl nurodytą skaičių kartų sužybsi šviesos diodu. Po to ima vėl užmiega. Kodas gavosi štai toks:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/io.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;util/delay.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/interrupt.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/pgmspace.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/sleep.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#define F_CPU 8000000UL&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;54&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;109&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;124&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;139&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;154&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;182&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;195&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;208&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;219&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;229&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;237&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;244&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;253&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis_count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;fade_in&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]));&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;OCR0B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;
&lt;span class="linenos"&gt;20&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;fade_out&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;21&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;&lt;span class="mi"&gt;-1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;22&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;OCR0B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;23&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;24&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;25&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;26&lt;/span&gt;
&lt;span class="linenos"&gt;27&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;tardis_light&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;28&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;tardis_count&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;29&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;fade_in&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;30&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;31&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;fade_out&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;32&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;33&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;34&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;35&lt;/span&gt;
&lt;span class="linenos"&gt;36&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;go_to_sleep&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;37&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;38&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;set_sleep_mode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SLEEP_MODE_PWR_DOWN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;39&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sleep_enable&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;40&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sei&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;41&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sleep_cpu&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;42&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sleep_disable&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;43&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//sei();&lt;/span&gt;
&lt;span class="linenos"&gt;44&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;45&lt;/span&gt;
&lt;span class="linenos"&gt;46&lt;/span&gt;
&lt;span class="linenos"&gt;47&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ISR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;INT0_vect&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;48&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;49&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;tardis_light&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;50&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sei&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;51&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;52&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;go_to_sleep&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;53&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;54&lt;/span&gt;
&lt;span class="linenos"&gt;55&lt;/span&gt;
&lt;span class="linenos"&gt;56&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;57&lt;/span&gt;
&lt;span class="linenos"&gt;58&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//Status LED&lt;/span&gt;
&lt;span class="linenos"&gt;59&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;DDRB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PB4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;60&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;PORTB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;61&lt;/span&gt;
&lt;span class="linenos"&gt;62&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//Main LED&lt;/span&gt;
&lt;span class="linenos"&gt;63&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;DDRB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PB1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// make OC0B PWM output pin&lt;/span&gt;
&lt;span class="linenos"&gt;64&lt;/span&gt;
&lt;span class="linenos"&gt;65&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//PWM&lt;/span&gt;
&lt;span class="linenos"&gt;66&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;TCCR0A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;COM0B1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;WGM00&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// mode #1&lt;/span&gt;
&lt;span class="linenos"&gt;67&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;TCCR0B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;CS00&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// clkI/O/(No prescaling)&lt;/span&gt;
&lt;span class="linenos"&gt;68&lt;/span&gt;
&lt;span class="linenos"&gt;69&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//INT0 enable:&lt;/span&gt;
&lt;span class="linenos"&gt;70&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;MCUCR&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ISC01&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ISC00&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;71&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;GIMSK&lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;INT0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;72&lt;/span&gt;
&lt;span class="linenos"&gt;73&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//PB2 as input for INT0&lt;/span&gt;
&lt;span class="linenos"&gt;74&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;DDRB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;75&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;PORTB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PB2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;76&lt;/span&gt;
&lt;span class="linenos"&gt;77&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sei&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;78&lt;/span&gt;
&lt;span class="linenos"&gt;79&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//Disable ADC, saves ~230uA&lt;/span&gt;
&lt;span class="linenos"&gt;80&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;ADCSRA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ADEN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;81&lt;/span&gt;
&lt;span class="linenos"&gt;82&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;tardis_light&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;83&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;go_to_sleep&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;84&lt;/span&gt;
&lt;span class="linenos"&gt;85&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;){}&lt;/span&gt;
&lt;span class="linenos"&gt;86&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Viso šito reikalo rezultatas gavosi štai toks:&lt;/p&gt;
&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/132202537" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;p&gt;Elektrinę principinę schemą eagle formatu bei AVR Studio 4 projekto failus rasite mano &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/TARDIS"&gt;GitHub'e&lt;/a&gt;.&lt;/p&gt;
</content><category term="Elektronika"></category><category term="Atmel"></category><category term="attiny85"></category><category term="AVR"></category><category term="Doctor Who"></category><category term="TARDIS"></category><category term="Tardis light"></category><category term="tardis pulsing LED"></category></entry><entry><title>Flip-Dot Clock</title><link href="https://paulius.bautrenas.lt/flip-dot-clock.html" rel="alternate"></link><published>2015-02-12T09:30:00+02:00</published><updated>2015-02-12T09:30:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-02-12:/flip-dot-clock.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319.jpg"&gt;&lt;img alt="IMG_7319" class="aligncenter wp-image-630 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319_800x600.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Idėja susikonstruoti unikalų sieninį laikrodį mano galvoje kirbėjo gan seniai, tačiau iki šiol niekaip iki to „nepriėjo“ rankos. Be to, internetas yra pilnas kuo įvairiausių „nixie“, LED'inių, mechaninių, pneumatinių, hidraulinių ir kitokių laikrodžių, o man norėjosi kažko įdomesnio. Taip pat kaip ir kiekvienas tikras inžinierius esu didelis tinginys, todėl nenorėjau …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319.jpg"&gt;&lt;img alt="IMG_7319" class="aligncenter wp-image-630 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319_800x600.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Idėja susikonstruoti unikalų sieninį laikrodį mano galvoje kirbėjo gan seniai, tačiau iki šiol niekaip iki to „nepriėjo“ rankos. Be to, internetas yra pilnas kuo įvairiausių „nixie“, LED'inių, mechaninių, pneumatinių, hidraulinių ir kitokių laikrodžių, o man norėjosi kažko įdomesnio. Taip pat kaip ir kiekvienas tikras inžinierius esu didelis tinginys, todėl nenorėjau per daug vargti su mandromis konstrukcijomis ir kitokiais velniais, todėl ilgai laukiau reikiamo momento kol į rankas paklius kas nors, iš ko būtų galima pasidaryti laikrodį. Šis momentas atėjo buvusiame darbe, kai į mano rankas pakliuvo &lt;a class="reference external" href="elektromechanines-svieslentes"&gt;elektromechaninė švieslentė (angl. flip-dot)&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="schema-ir-pcb"&gt;
&lt;h2&gt;Schema ir PCB&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-sch.png"&gt;&lt;img alt="flip_dot_controller_V2-sch" class="aligncenter size-large wp-image-648" src="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-sch-774x1024.png" style="width: 625px; height: 827px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Laikrodžio valdikliui iš principo panaudojau tą patį, šiek tiek ankščiau aprašytą valdiklį, su kuriuo tyrinėjau &lt;a class="reference external" href="elektromechanines-svieslentes"&gt;elektromechanines švieslentes&lt;/a&gt;. Vienintelis skirtumas tas, kad šį kartą prie jo papildomai prijungiau Dallas DS1307 RTC laikrodį. Tuo pačiu linijinį įtampos stabilizatorių 7805 pakeičiau impulsiniu nekaistančiu LM2574n-5 su atitinkamu apkabinimu. Schemos stabilumui užtikrinti, papildomai ant AtMEGA16 Reset kojos užkabinau supervizorių &lt;a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/11187f.pdf"&gt;MCP100T-475I&lt;/a&gt;, kuris neleidžia atmegai startuoti, kol jos maitinimo įtampa nepakilo aukščiau 4,75 V.&lt;/p&gt;
&lt;p&gt;Šią valdiklio versiją papildžiau aibe naujų jungčių. Išvedžiau vieną iš ADC pinų. Numačiau jungtį rotorinio enkoderio ar išorinių mygtukų prijungimui. Valdiklio darbo statuso šviesos diodus irgi iškėliau ant papildomos jungties. Įprojektavau galimybė prijungti papildomą lauktranzių grandinę, skirtą laikrodžio apšvietimo komutavimui.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_sch.png"&gt;&lt;img alt="fet_board_sch" class="aligncenter wp-image-646 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_sch-166x300.png" style="width: 166px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tiesa, tuos lauktranzius teko iškelti ant atskiros plokštelės, nes į nemokamo Eagle langą jie tiesiog gražiai nebetilpo. Na bet kokiu atveju, abi PCB gavosi gan šaunios:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-brd.png"&gt;&lt;img alt="flip_dot_controller_V2-brd" class="aligncenter size-large wp-image-647" src="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-brd-1024x818.png" style="width: 625px; height: 499px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_brd.png"&gt;&lt;img alt="fet_board_brd" class="aligncenter wp-image-645 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_brd-300x300.png" style="width: 300px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="surinkimas"&gt;
&lt;h2&gt;Surinkimas&lt;/h2&gt;
&lt;p&gt;Šiek tiek išrinkau turimos švieslentės korpusą ir pradėjau ieškoti vietos elektronikai. Vietos radau ant galinio švieslentės skydelio, šalia į korpusą įmontuotos dienos šviesos (CCFL) lempos inverterio.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6960.jpg"&gt;&lt;img alt="IMG_6960" class="aligncenter size-large wp-image-657" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6960-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6982.jpg"&gt;&lt;img alt="IMG_6982" class="aligncenter size-large wp-image-658" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6982-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Būdamas didelis tinginys, daugelį aukščiau aprašytų pakeitimų padariau lituokliu ant egzistuojančios plokštės ir negaminau naujos PCB. Tiesa, tai kainavo šiek tiek nervų.. Taip daryti tikrai niekam nerekomenduočiau, bet dėl sprendimo per daug nesigailiu, nes pakeitimų nebuvo labai daug.&lt;/p&gt;
&lt;p&gt;Valdiklio ir švieslentės maitinimui panaudojau kinietišką DC-DC modulį iš Aliexpress. Iš senų laikų turėjau likusį RTC moduliuką, o ir &amp;quot;netyčia&amp;quot; iš pat pradžių valdiklio PCB buvau įprojektavęs I2C jungtį.. Žodžiu, pakoreguotas valdiklis atrodė taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6988.jpg"&gt;&lt;img alt="IMG_6988" class="aligncenter size-large wp-image-654" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6988-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6987.jpg"&gt;&lt;img alt="IMG_6987" class="aligncenter size-large wp-image-655" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6987-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Dalis, prie PCB prilituotų laidų eina į laikrodžio nustatymo mygtukus. Kiti į lauktranzių plokštelę. Lauktranzių plokštelės PCB, kaip supratote, irgi negaminau, o tiesiog greituoju surinkau ant &amp;quot;nulinės&amp;quot; plokštės:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6985.jpg"&gt;&lt;img alt="IMG_6985" class="aligncenter size-large wp-image-662" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6985-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tiek valdiklį, tiek dc-dc, tiek ir lauktranzių plokštelę pritvirtinau varžtais ir sujungiau visus laidus:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6991.jpg"&gt;&lt;img alt="IMG_6991" class="aligncenter size-large wp-image-665" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6991-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7001.jpg"&gt;&lt;img alt="IMG_7001" class="aligncenter size-large wp-image-672" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7001-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Laikrodis valdomas dviem mygtukais. Vienas įjungia/išjungia laiko nustatymo režimą. Kitas nustato laiką ir junginėja apšvietimą (apie tai vėliau). Iš senų laikų turėjau nusipirkęs neracionaliai brangius mygtukus su šviesos diodais. Juos irgi sulitavau ant &amp;quot;nulinės plokštės&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6983.jpg"&gt;&lt;img alt="IMG_6983" class="aligncenter size-large wp-image-660" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6983-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pačia plokštelę pritvirtinau taip, kad mygtukai būtų prieinami iš išorės.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7697.jpg"&gt;&lt;img alt="IMG_7697" class="aligncenter size-large wp-image-688" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7697-768x1024.jpg" style="width: 625px; height: 833px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kitame švieslentės šone sumontavau maitinimo jungtį ir saugiklį. Papildomai apsaugai nuo neteisingo pajungimo įmontavau peraugusį šotki diodą:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6994.jpg"&gt;&lt;img alt="IMG_6994" class="aligncenter size-large wp-image-670" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6994-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6995.jpg"&gt;&lt;img alt="IMG_6995" class="aligncenter size-large wp-image-671" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6995-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Surinktas laikrodis atrodo taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7317.jpg"&gt;&lt;img alt="IMG_7317" class="aligncenter size-large wp-image-631" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7317-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="softas"&gt;
&lt;h2&gt;Softas&lt;/h2&gt;
&lt;p&gt;Tai sudėtingiausia projekto dalis. Valdiklio kodas painus todėl, kad projekto įgyvendinimas užtruko porą metų. T. y. valdiklis ir &amp;quot;basic&amp;quot; valdymo programa buvo sukurta maždaug 2012 metais, rašant magistrinį darbą. Visas kitas funkcionalumas suprogramuotas 2014 m. pabaigoje, kai pagaliau atsiraro įkvėpimas. Kodo &amp;quot;tvarkingumui&amp;quot; tikrai nepadėjo ir tai, kad ūpui pakelti dažnai nevengiau buteliuko alaus ar viskio šlakelio. :D Na bet yra kaip yra. Gal vienas kitas bugas ir liko, bet daigtas veikia, atlieka savo funkcijas ir nelūžta.&lt;/p&gt;
&lt;p&gt;Programos kodo per daug nekomentuosiu, tačiau ateities kartoms šiek tiek aprašysiu priimtus programinius ir AtMEGA16&amp;nbsp;hardware išnaudojimo sprendimus. Pirmiausia apie softą. Apie flip-dot švieslentės valdymo mechanizmą užsiminiau įraše apie &lt;a class="reference external" href="elektromechanines-svieslentes"&gt;elektromechanines švieslentes&lt;/a&gt;. Ten nieko sudėtingo, tiesiog switch-case konstrukcija, atitinkamai sukomutuojanti švieslentės valdymo dešifratorius. Įdomesnis to praktinis pritaikymas, nes norint atvaizduoti skaičius (laiką), teko sukurti nuosavą &amp;quot;šriftą&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/octagon_fontas.png"&gt;&lt;img alt="octagon_fontas" class="aligncenter size-large wp-image-704" src="https://paulius.bautrenas.lt/images/flip-dot-clock/octagon_fontas-1024x591.png" style="width: 625px; height: 361px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nusprendžiau naudoti 5x3 taškų dydžio skaičius (didesni tiesiog gražiai netilpo į mano turimą 13x28 matricą).&amp;nbsp; Mano turima elektromechaninė švieslentė yra taip jau sutverta, kad stulpelius yra valdyti daug patogiau nei eilutes, todėl kiekvieną skaitmenį sudaro 3 baitai stulpelių. Kiekviename baite yra saugoma informacija apie kiekvieną stulpelio tašką: 0 - juoda spalva, 1 - geltona. Skaitmens stulpeliai yra skaitomi iš &amp;quot;apačios į viršų&amp;quot;. Taip atrodo visas 11 simbolių (skaitmenys 0–9 ir simbolis &amp;quot;:&amp;quot;) šrifto masyvas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fdfont&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//0&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x09&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//1&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1D&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//2&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//3&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x04&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//4&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1D&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//5&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//6&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//7&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//8&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1D&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//9&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x0A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// :&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Skaičius atvaizduoja funkcija &lt;strong&gt;print_number&lt;/strong&gt;&lt;em&gt;(number,pst,peil),&lt;/em&gt; kuriai reikalingi 3 argumentai: &lt;em&gt;number&lt;/em&gt; - norimas atvaizduoti skaitmuo; &lt;em&gt;pst&lt;/em&gt; ir &lt;em&gt;peil&lt;/em&gt; - atvaizduotino skaitmens apatinio kairiojo kampo koordinatės (skaičiuojama nuo matricos apatinio kairiojo kampo). Ši funkcija atitinkamai išsikviečia funkciją &lt;strong&gt;print_column&lt;/strong&gt;&lt;em&gt;,&lt;/em&gt; kuri nuskaito šrifto masyvą&amp;nbsp; ir su funkcija &lt;strong&gt;segmentas&lt;/strong&gt; atitinkamai, bitas po bito perverčia matricos skydelius. Kaip greitai (dar net ne maksimalus greitis) veikia laikrodis, galite pamatyti čia:&lt;/p&gt;
&lt;p&gt;Laiko &amp;quot;rodymas&amp;quot; yra realizuotas &lt;strong&gt;TIMER0_OVF_vect&lt;/strong&gt; pertrauktimi. Čia kelis kartus per sekundę yra tikrinama, ar nepasikeitė laikas. Jeigu laikas pasikeitė, yra patikrinama, kurie skaitmenys būtent pasikeitė ir tik jie yra perpiešiami. Vizualiai tai atrodo maždaug taip:&lt;/p&gt;
&lt;p&gt;Laikrodžio nustatymai keičiami tiek per USART sąsają, tiek ir valdymo mygtukais. Mygtuku, prijungtu prie INT1 (PD3), galima įjungti ir išjungti laikrodžio apšvietimą. Labai knietėjo pabandyti laikrodį apšviesti UV šviesos diodų juosta, todėl suprogramavau galimybę įsijungti CCFL arba UV apšvietimą:&lt;/p&gt;
&lt;p&gt;Mygtuku, prijungtu prie INT0 (PD2), yra aktyvuojamas rankinis laiko nustatymo režimas. Aktyvavus šį režimą, mygtukas &amp;quot;INT1&amp;quot; didina pasirinktą skaičių, o mygtukas &amp;quot;INT0&amp;quot; - šoliuoja per skaitmenis.&amp;nbsp; Pasirinktas skaitmuo yra indikuojamas brūkšneliu po skaitmeniu. Perėjus per visus skaitmenis, nustatytas laikas yra išsaugomas. Žinoma, yra suprogramuota papildoma apsauga nuo durniaus, neleidžianti išsaugoti nerealaus laiko (&amp;gt;23:59), bei išeinanti iš rankinio laiko nustatymo režimo, jei jis užtrunka per ilgai (kažkas pradėjo nustatinėti laikrodį ir pamiršo). Pastaroji apsauga yra realizuota&amp;nbsp; pertrauktimi &lt;strong&gt;TIMER1_COMPA_vect&lt;/strong&gt;, kuri nuolat tikrina ar nebuvo viršytas nustatytas laiko intervalas. Intervalas yra &amp;quot;įhardkodintas&amp;quot; parametre &lt;em&gt;set_time_timeout&lt;/em&gt;. Parametro reikšmė - maksimalus laiko tarpas sekundėmis tarp atliktų veiksmų. Viršijus šį laiką (nespėjus išsaugoti naujo nustatyto laiko), nustatymai yra anuliuojami ir yra gražinamas senas laikas. Pats rankinis nustatymas atrodo taip:&lt;/p&gt;
&lt;p&gt;Laiką ir datą galima nustatyti ir per &lt;strong&gt;USART&lt;/strong&gt; sąsają (9600 Boud, 8 bitų su 1 Stop bitu). USART sąsaja taip pat galima įjungti ir išjungti laikrodžio apšvietimą. USART meniu atrodo taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard01.jpg"&gt;&lt;img alt="Clipboard01" class="aligncenter size-full wp-image-677" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard01.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;USART sąsaja yra pritaikyta žmogui. T. y. nustatant laiką ar datą valdiklis gražiai paprašo įvesti valandas, minutes ir sekundes (metus, mėnesį dieną), pasitikslina ar norime įvestus duomenis išsaugoti ir tik tada atlieka realius pakeitimus. Apšvietimas komutuojamas irgi panašiai, tik čia iš naudotojo gavus darbo režimo nustatymą jis yra vykdomas iš karta, nieko daugiau neklausiant.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard03.jpg"&gt;&lt;img alt="Clipboard03" class="aligncenter size-full wp-image-679" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard03.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard05.jpg"&gt;&lt;img alt="Clipboard05" class="aligncenter size-full wp-image-680" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard05.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard06.jpg"&gt;&lt;img alt="Clipboard06" class="aligncenter size-full wp-image-681" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard06.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Įdomu tai, kad prijungus &lt;a class="reference external" href="http://paulius.bautrenas.lt/blog/?p=493"&gt;HC05 bluetooth moduliuką&lt;/a&gt;, visi nustatymai yra puikiausiai pasiekiami iš Android telefono, naudojant &amp;quot;BlueTerm&amp;quot; programėlę:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7023.jpg"&gt;&lt;img alt="IMG_7023" class="aligncenter size-large wp-image-675" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7023-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Manau, daug kam kyla klausimas, kam iš vis tas valdymas per USART, jeigu yra valdymo mygtukai? Atsakymas yra dvigubas: pirmiausia, USART sąsają kūriau dėl sportinio intereso ir dėl galimybės &lt;strong&gt;automatiškai atnaujinti/sinchronizuoti laiką&lt;/strong&gt;. Taip taip, mano laikrodį galima sinchronizuoti su PC laikrodžiu per USART. Tam pasiskolinau&amp;nbsp;&lt;a class="reference external" href="http://noahcoad.com/"&gt;Noah Coad&lt;/a&gt; programos &amp;quot;&lt;a class="reference external" href="http://blogs.msmvps.com/coad/2005/03/23/serialport-rs-232-serial-com-port-in-c-net/"&gt;SerialPort Terminal&lt;/a&gt;&amp;quot; kodą ir jį šiek tiek patobulinau pagal savo poreikius.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard08.jpg"&gt;&lt;img alt="Clipboard08" class="aligncenter size-full wp-image-683" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard08.jpg" style="width: 629px; height: 576px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Programoje pridėjau 3 mygtukus. Mygtukas &amp;quot;About&amp;quot; gražina laikrodžio techninę informaciją, o mygtukai &amp;quot;SyncTime&amp;quot; ir &amp;quot;SyncDate&amp;quot; atitinkamai sinchronizuoja flip-dot laikrodžio RTC su kompiuterio laikrodžiu (dėl lėto USART galima kelių sekundžių paklaida):&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard12.jpg"&gt;&lt;img alt="Clipboard12" class="aligncenter size-full wp-image-684" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard12.jpg" style="width: 629px; height: 546px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard13.jpg"&gt;&lt;img alt="Clipboard13" class="aligncenter size-full wp-image-685" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard13.jpg" style="width: 629px; height: 546px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="naudingos-nuorodos"&gt;
&lt;h2&gt;Naudingos nuorodos&lt;/h2&gt;
&lt;p&gt;Valdiklio schemą, PCB ir programinį kodą rasite mano &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/Flip-Dot%20Clock"&gt;GitHub'e&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Projekto aprašymą anglų kalba rasite &lt;a class="reference external" href="https://hackaday.io/project/168888-flip-dot-clock"&gt;Hackaday.io&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="Elektronika"></category><category term="atmega16"></category><category term="ccfl"></category><category term="clock"></category><category term="ds1307"></category><category term="flip-dot"></category><category term="flipdot"></category><category term="font"></category><category term="mosfet"></category><category term="uart"></category><category term="UV LED"></category></entry><entry><title>Elektromechaninės švieslentės (flip-dot display)</title><link href="https://paulius.bautrenas.lt/elektromechanines-svieslentes.html" rel="alternate"></link><published>2014-12-30T09:45:00+02:00</published><updated>2014-12-30T09:45:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-12-30:/elektromechanines-svieslentes.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg"&gt;&lt;img alt="flipdot_1" class="aligncenter size-medium wp-image-610" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg" style="width: 624px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nors tai tikrai sena technologija, tačiau elektromechaninės (angl. flip-dot) švieslentės yra vis dar plačiai paplitusios. Jos naudojamos ten, kur reikia didelio informacijos perskaitomumo ir didelio apžvalgos kampo. Elektromechaninės švieslentės dažniausiai yra naudojamos traukinių ir autobusų stotyse, lauko stadionuose, oro uostuose ir viešajame transporte. Prieš porą metų, kelios tokios švieslentės pakliuvo …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg"&gt;&lt;img alt="flipdot_1" class="aligncenter size-medium wp-image-610" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg" style="width: 624px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nors tai tikrai sena technologija, tačiau elektromechaninės (angl. flip-dot) švieslentės yra vis dar plačiai paplitusios. Jos naudojamos ten, kur reikia didelio informacijos perskaitomumo ir didelio apžvalgos kampo. Elektromechaninės švieslentės dažniausiai yra naudojamos traukinių ir autobusų stotyse, lauko stadionuose, oro uostuose ir viešajame transporte. Prieš porą metų, kelios tokios švieslentės pakliuvo man į rankas. Kadangi norėjau švieslentes panaudoti savo tikslams, nusprendžiau jas šiek tiek plačiau patyrinėti. Ypač domino jų valdymas ir &amp;quot;vangių&amp;quot; segmentų atsiradimo priežastys.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_2.jpg"&gt;&lt;img alt="flipdot_2" class="aligncenter size-large wp-image-580" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_2.jpg" style="width: 625px; height: 168px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viršuje pateikta kompanijos „LAWO Luminator Technology Group“ informacinės sistemos „Full-matrix System“ elektromechaninių švieslenčių, naudojamų Vilniaus miesto autobusuose, nuotrauka. „Full-matrix System“ švieslentės yra elektromechaninės. Kiekviena švieslentė turi papildomą liuminescencinį apšvietimą, naudojamą tamsiu paros metu. Kiekviena švieslentė yra sudaryta iš aibės individualių 10 – 15 mm skersmens aštuonkampių skydelių, kurių viena pusė yra nudažyta juodai, kita – geltonai.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0076.jpg"&gt;&lt;img alt="image1" class="aligncenter size-large wp-image-582" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0076-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kiekvieną skydelį valdo elektromagnetas, sudarytas iš U formos magnetolaidžio bei dviejų ričių. Elektromagnetas, priklausomai nuo valdymo signalo, atverčia arba geltonąją arba juodąją skydelio pusę. Išjungus valdymo signalą, dėl liekamojo elektromagneto magnetolaidžio įmagnetėjimo skydelis pasilieka fiksuotoje padėtyje.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0067.jpg"&gt;&lt;img alt="image2" class="aligncenter size-large wp-image-581" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0067-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tokiu būdu yra užtikrinamas vaizduojamo teksto įskaitomumas bei beveik 180º matymo kampas. Detalus švieslentės skydelių vartymo mechanizmų veikimas ir gamybos metodas yra aprašytas patente „&lt;a class="reference external" href="http://www.freepatentsonline.com/20030041492.pdf"&gt;US 2003/0041492 A1 Small dot display element&lt;/a&gt;“. Šaltinyje yra nurodyta, kad skydeliai ramybės būsenoje yra šiek tiek pasvirę. Pagal patentą, tai yra padaryta tam, kad būtų sumažintas sukimo monetas, reikalingas skydelio pervertimui. Iš principo, kuo mažesnis skydelio posvyrio kampas, tuo didesniu apžvalgos kampu skydelis yra matomas, tačiau tuo pačiu reikia sukurti stipresnį magnetinį lauką skydelio pervertimui.&lt;/p&gt;
&lt;p&gt;Švieslentės yra maitinamos nuolatine 24V ± 20% įtampa. Dėl konstrukcijos ypatybių lentos naudoja labai mažai elektros srovės: 360 – 560 mA skydelių pervertimo metu ir tik 60 – 200 mA „ramybės“ būsenoje. Lentų konstrukcija taip pat lemia ir tai, kad atvaizduojamas tekstas išlieka net ir išjungus maitinimą. Tiesa, elektromechaninė konstrukciją turi ir trūkumų: švieslentės skydeliai ilgainiui tampa „vangūs“, apsiverčia per lėtai arba neatsiverčia iš viso. Švieslentės yra jautrios mechaninėms šiukšlėms ir dulkėms. Be to, „pasyvūs“ švieslentės taškai reikalauja papildomo apšvietimo, kuris yra gana reiklus elektros srovei (0,5 – 5,5 A).&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/268118_10150228228661035_4800258_n.jpg"&gt;&lt;img alt="268118_10150228228661035_4800258_n" class="aligncenter wp-image-609 size-full" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/268118_10150228228661035_4800258_n-e1419866057695.jpg" style="width: 719px; height: 331px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vilniaus autobusuose taip pat yra naudojama kompanijos „Krueger Apparatebau GmbH &amp;amp; Co.“ gaminama informacinė sistema. Šios kompanijos švieslenčių Vilniaus autobusuose yra įrengta nedaug, tačiau „Krueger“ sistema iš kitų sistemų išsiskiria savo mechanine konstrukcija. Ankščiau aprašytose švieslentėse skydelių vartymo mechanizmas pagal atitinkamą valdymo signalą perverčia visą skydelį (&lt;cite&gt;nuotrauka &amp;lt;{static}/images/elektromechanines-svieslentes/PICT0076.jpg&amp;gt;&lt;/cite&gt;), tačiau „Kruger“ sistemoje yra verčiama tik viena skydelio „pusė“. T. y. „Krueger“ švieslentės tašką sudaro judanti skydelio dalis bei nejudanti, pusiau juodai ir geltonai nudažyta, plokštelė. Vartymo mechanizmą paveikus atitinkamu valdymo signalu, vartomoji skydelio dalis yra atverčiama geltonąja puse, kuri uždengia juodąją nejudančios plokštelės pusę, arba juodąja, kuri uždengia geltonąją stacionarios plokštelės pusę.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0096.jpg"&gt;&lt;img alt="image3" class="aligncenter size-large wp-image-585" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0096-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Lyginant horizontaliai ir vertikaliai vartomų švieslenčių segmentus, kvadratinės konstrukcijos segmento matomas plotas yra bent 16 % didesnis jei apskrito, horizontaliai vartomo skydelio. Tokia skydelių konstrukcija užtikrina geresnį informacijos perskaitomumą ir didesnį švieslentės vaizduojamos informacijos atnaujinimo greitį. Taip pat vertikalios konstrukcijos segmentų elektromagneto konstrukcija yra daug paprastesnė: „Krueger“ sistemoje yra naudojamas įprastos konstrukcijos solenoidas su cilindrine feromagnetine šerdimi. Tokia konstrukcija yra ne tik paprastesnė, bet ir pigesnė, jos gamybai nėra keliami tokie griežti reikalavimai kaip U formos (naudojami „LAWO“ sistemoje) vartymo mechanizmams.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0110.jpg"&gt;&lt;img alt="image4" class="aligncenter size-large wp-image-586" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0110-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class="section" id="vangiu-skydeliu-nustatymas-ir-atsiradimo-priezastys"&gt;
&lt;h2&gt;&lt;strong&gt;&amp;quot;Vangių&amp;quot; skydelių nustatymas ir atsiradimo priežastys&lt;/strong&gt;&lt;/h2&gt;
&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/38010951" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;p&gt;Kaip jau minėjau tekste, kartais kai kurie švieslentės skydeliai pasidaro &amp;quot;vangūs&amp;quot;, apsiverčia per lėtai arba neatsiverčia iš viso. Tai puikiai iliustruoja šis aukščiau patalpintas video (atsiprašau už kokybę). Video filmuke valdiklis paeiliui perverčia kiekvieną matricos skydelį į geltonąją pusę, po to - į juodąją. Manau tikrai turėtumėte pastebėti skydelius, kurie veikia kitaip nei visi. T. y. persiverčia atvirkščiai negu visi, persivertę nelieka nustatytoje padėtyje ir t. t. Vat tokių skydelių atsiradimo priežastį ir nusprendžiau patyrinėti šiek tiek giliau.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta.jpg"&gt;&lt;img alt="lenta" class="aligncenter size-large wp-image-590" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta-1024x682.jpg" style="width: 625px; height: 416px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tyrimui buvo pasirinkta „Full-matrix System“ informacinėje sistemoje naudojama šono skaitinė švieslentė, sudaryta iš 448 skydelių su vartymo mechanizmais (elektromagnetais). Vartymo mechanizmai yra elektriškai sujungti į matricą, sudarytą iš 16 eilučių ir 28 stulpelių. Šono skaitinėje lentoje yra sumontuoti 3 vartymo mechanizmų valdikliai FP2800A.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta_2.jpg"&gt;&lt;img alt="lenta_2" class="aligncenter size-large wp-image-591" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta_2-1024x497.jpg" style="width: 625px; height: 303px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;FP2800A – tai „iš 5 į 28“ tipo dešifratorius, atpažįstantis kodinę signalų jo įėjimuose kombinaciją ir sukuriantis signalą viename tą kodinę kombinaciją atitinkančiame išėjime [R. Kirvaitis. Loginės schemos]. Pagrindinė FP2800A ypatybė yra ta, kad dešifratoriaus išėjimai dirba „šaltinio imtuvo“ režimais&amp;nbsp; (nuotrauka apačioje), t.&amp;nbsp; y. dešifratorius pagal valdymo komandą gali tam tikrą išėjimą prijungti arba prie maitinimo šaltinio teigiamo poliaus arba prie neigiamo. Tai yra ypač svarbu elektromechaninių švieslenčių valdymui, nes elektros srovė per vartymo mechanizmo rites turi tekėti abejomis kryptimis.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/source-sink.jpg"&gt;&lt;img alt="source-sink" class="aligncenter size-full wp-image-593" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/source-sink.jpg" style="width: 877px; height: 219px;" /&gt;&lt;/a&gt;
Kaip jau buvo minėta, švieslentės 16 x 24 skydelių matricą valdo 3 vartymo mechanizmų valdikliai FP2800A. Vienas iš jų yra skirtas matricos stulpelių valdymui (funkcinė schema virsuje), kiti du – eilučių valdymui. Kiekvienas iš šių valdiklių yra valdomas 7 linijų duomenų perdavimo magistrale, kuri pagrindiniame valdiklyje dažnai būna multipleksuojama. Mikrovaldiklis tinkamais laiko momentais privalo kiekvienam iš valdiklių nurodyti konkretų komutuojamo išėjimo adresą (5 adreso linijos) ir komutuojamo išėjimo poliariškumą (Data signalas). Be to, mikrovaldiklis turi generuoti Enable signalą, inicijuojantį adreso linijos dešifraciją, bei dekoduoto valdiklio išėjimo prijungimą arba prie maitinimo šaltinio teigiamo poliaus, arba prie neigiamo.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/rc.jpg"&gt;&lt;img alt="rc" class="aligncenter wp-image-592" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/rc.jpg" style="width: 251px; height: 143px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/pinout.png"&gt;&lt;img alt="pinout" class="aligncenter size-medium wp-image-621" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/pinout-279x300.png" style="width: 279px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Valdikliai FP2800A gali komutuoti iki 370 mA srovę, todėl, norint apsaugoti skydelių vartymo mechanizmus bei pačius valdiklius, yra būtina riboti valdiklio išėjimų komutavimo intervalus. Tam gamintojas siūlo nesudėtingą schemą (nuotrauka viršuje), sudarytą iš kondensatoriaus C1 ir rezistoriaus R1. Gamintojo rekomenduotinos elementų parametrų vertės yra C1=0,22 μF ir R=22 kΩ , garantuojančios maksimalią 24 ms Enable signalo veikimo trukmę. Kadangi elektros srovė turi tekėti abejomis kryptimis per skydelių vartymo mechanizmų elektromagnetų rites, yra naudojami 2 atskiri lygiagrečiai sujungti valdikliai. Valdiklių apsaugai jų išėjimai yra atskirti diodais D1 ir D2 (nuotrauka viršuje, dešinėje).&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/timing.jpg"&gt;&lt;img alt="timing" class="aligncenter size-full wp-image-594" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/timing.jpg" style="width: 908px; height: 380px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/apsauga.jpg"&gt;&lt;img alt="apsauga" class="aligncenter size-full wp-image-588" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/apsauga.jpg" style="width: 541px; height: 236px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Norint detaliau ištirti švieslentės veikimą bei gauti norimas dinamines charakteristikas buvo nuspręsta sukurti eksperimentinį švieslentės valdiklį, kuris leistų valdyti švieslentės taškus pagal tiesiogines komandas, siunčiamas iš asmeninio kompiuterio. Vienas svarbiausių dalykų, kuriant eksperimentinį valdiklį, buvo sužinoti, kaip švieslentės taškai yra prijungti prie 3 vartymo mechanizmų valdiklių FP2800A. Tai buvo nustatyta rankiniu būdu, analizuojant švieslentės spausdintinę plokštę.&amp;nbsp; Dešifratorių FP2800A ir flip-dot matricos jungimai yra pateikti lentelėje apačioje. Lentelėje panaudota eilučių ir stulpelių numeracija yra pažymėta pirmoje poskyrio nuotraukoje.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/desifratoriaus_jungimas.jpg"&gt;&lt;img alt="desifratoriaus_jungimas" class="aligncenter size-large wp-image-589" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/desifratoriaus_jungimas-1024x288.jpg" style="width: 625px; height: 175px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Eksperimentiniame švieslentės valdiklyje buvo panaudotas mikrovaldiklis AtMEGA16, tiesiogiai, per lankstų 26 gyslų kabelį su IDC jungtimi, siunčiantis valdymo ir adreso signalų kombinacijas dešifratoriams FP2800A. Valdiklyje periferinių įrenginių ir asmeninio kompiuterio prijungimui buvo įprojektuotos USART ir I2C sąsajos. Taip pat numatyti keli papildomi mygtukai ir šviesos diodai, naudojami valdiklio veiksmų kontrolei ir indikacijai, bei IBIS duomenų perdavimo sąsaja, naudotina komunikacijai su įvairiais autobusuose naudojamų informacinių sistemų įrenginiais.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flip-dot_controller.jpg"&gt;&lt;img alt="flip-dot_controller" class="aligncenter size-full wp-image-596" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flip-dot_controller.jpg" style="width: 848px; height: 576px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Daugiau informacijos apie valdiklį rasite mano &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/Flip-Dot%20Clock"&gt;GitHub'e&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Srovės matavimui buvo parinktas 1 Ω 17 W šunto rezistorius. Didelės vardinės galios rezistorius buvo parinktas tam, kad būtų galima išvengti šiluminių galios nuostolių dėl kurių šuntas fiziškai šyla. Dėl to keičiasi jo elektriniai parametrai, t. y. varža, kas darbo metu sukelia srovės matavimo paklaidas. Rezistoriaus vardinė 1 Ω varža leido tiksliai ir be papildomų matematinių veiksmų nustatyti, kokia srovė teką švieslentės grandine. Įtampos krytis šunto varžoje buvo matuojamas skaitmeniniu oscilografu Rigol DS1052E.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656895.jpg"&gt;&lt;img alt="134131656895" class="aligncenter size-full wp-image-599" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656895.jpg" style="width: 780px; height: 309px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tyrimo metu, eksperimentiniam valdikliui buvo sudaryta programa, paeiliui perverčianti visus 28-o stulpelio skydelius pirma į geltonąją pusę, po to – į juodąją. Bandymo buvo gauta srovės oscilograma, pateikta viršuje, kairėje.&amp;nbsp; Iš jos matome, kad verčiant skydelius į geltonąją pusę (1 impulsų serija), srovė tekanti per skydelių elektromagnetų rites yra maždaug 100 mA mažesnė nei verčiant skydelius į juodąją pusę (2 impulsų serija). Tai galima paaiškinti tuo, kad skydelio vartymo mechanizmo elektromagneto magnetolaidis yra nesimetriškas. Vienas magnetolaidžio strypelis yra šiek tiek ilgesnis nei kitas. Dėl to, skydelio posvyrio kampas abiejose stacionariose padėtyse skiriasi. Pasak &lt;a class="reference external" href="http://www.freepatentsonline.com/20030041492.pdf"&gt;patento&lt;/a&gt;, kuo yra mažesnis skydelio posvyrio kampas, tuo reikia sukurti stipresnį magnetinį lauką skydelio pervertimui.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131672916.jpg"&gt;&lt;img alt="134131672916" class="aligncenter size-full wp-image-602" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131672916.jpg" style="width: 775px; height: 503px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Galima pastebėti, kad verčiant 28-ojo stulpelio pirmąjį skydelį, per elektromagnetą tekanti srovė yra mažesnė (pažymėta raudona rodykle) nei verčiant kitus to paties stulpelio segmentus. Ši tendencija kartojasi ir individualiai vartant tik šį segmentą. Iš oscilogramos (28;1) matome, kad srovė tekanti per segmento (28;1) elektromagneto ritę yra vienoda verčiant skydelį ir į vieną pusę, ir į kitą. Taip būti neturėtų, nes korektiškai veikiančių segmentų vertimo srovės skiriasi. Apačioje yra pateikta segmento (3;4) oscilograma, patvirtinanti prieš tai suformuotą teiginį.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656919.jpg"&gt;&lt;img alt="134131656919" class="aligncenter size-full wp-image-600" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656919.jpg" style="width: 788px; height: 315px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656944.jpg"&gt;&lt;img alt="134131656944" class="aligncenter size-full wp-image-601" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656944.jpg" style="width: 404px; height: 309px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Paveiksle, pateiktame viršuje, dešinėje, yra atvaizduota srovės, tekančios per segmento su išimtu feromagnetiniu skydeliu vartymo mechanizmo elektromagnetą, oscilograma. Iš tiesų (28;1) ir (1;3) segmentų oscilogramos yra labai panašios, tik šiek tiek skiriasi amplitudinės vertės, todėl galima teigti, kad&amp;nbsp; segmento (28;1) skydelis yra sugadintas. Iš tikro, tai matosi net plika akimi. Skydelis yra vangus, persiverčia daug lėčiau nei visi kiti. Taip pat jis tvirtai nesilaiko stacionarioje pozicijoje, ir persiverčia, verčiant kaimyninius skydelius, pav. (27;1) ar (28;2).&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656861.jpg"&gt;&lt;img alt="134131656861" class="aligncenter size-full wp-image-598" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656861.jpg" style="width: 774px; height: 237px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Su specialia magnetinius polius parodančia &lt;a class="reference external" href="http://www.directindustry.com/prod/magnet-physik/magnetic-field-sensors-11843-778655.html"&gt;kortele&lt;/a&gt; buvo nustatyta, kad segmento (28;1) skydelis yra nekorektiškai permagnetintas. Paveiksle viršuje yra pateiktas gerai įmagnetinto skydelio (segmentas (3;4)) brėžinys, šalia – neteisingai permagnetinto. Iš paveikslų matome, kad gerai veikiantis skydelis yra įmagnetintas horizontalia kryptimi, o vangus skydelis – vertikalia.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Elektronika"></category><category term="atmega16"></category><category term="flip-disk"></category><category term="flip-dot"></category><category term="flipdot"></category><category term="FP2800A"></category><category term="Kreuger"></category><category term="Lawo"></category><category term="oscilograma"></category></entry><entry><title>Avietė: DHT22 -&gt; MySQL</title><link href="https://paulius.bautrenas.lt/aviete-dht22-mysql.html" rel="alternate"></link><published>2014-11-14T12:35:00+02:00</published><updated>2014-11-14T12:35:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-11-14:/aviete-dht22-mysql.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148.jpg"&gt;&lt;img alt="IMG_7148" class="aligncenter size-medium wp-image-515" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148-625x468.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viena pagrindinių priežasčių, kodėl aš iš viso pirkau RaspberryPi, buvo noras pagaliau prisiversti susidraugauti su linuxu ir kažkiek pramokti python, php, mysql, java, js, ir visokius kitokius šiandien aktualius velnius. Programuoti vien dėl programavimo yra tuščias laiko gaišimas, todėl iš karto reikia daryti kažką naudingo, o ne rašinėti visokius &amp;quot;hello …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148.jpg"&gt;&lt;img alt="IMG_7148" class="aligncenter size-medium wp-image-515" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148-625x468.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viena pagrindinių priežasčių, kodėl aš iš viso pirkau RaspberryPi, buvo noras pagaliau prisiversti susidraugauti su linuxu ir kažkiek pramokti python, php, mysql, java, js, ir visokius kitokius šiandien aktualius velnius. Programuoti vien dėl programavimo yra tuščias laiko gaišimas, todėl iš karto reikia daryti kažką naudingo, o ne rašinėti visokius &amp;quot;hello world&amp;quot;. Vos tik nusipirkęs RPI,&amp;nbsp;nusprendžiau pasidaryti kelių zonų termometrą&amp;nbsp;su istorinių duomenų atvaizdavimo galimybe. Tam, kad spyris į užpakalį kažką daryti būtų kuo stipresnis, nusprendžiau viską programuoti pats. Sukurpiau tokį pradinį planą: Cron jobas kas 5 min. paleidžiai Python scriptą, kuris kelis kartus nuskaito DHT22 jutiklio duomenis, juos suvidurkina ir surašo į MySQL DB.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22.jpg"&gt;&lt;img alt="dht22" class="aligncenter size-full wp-image-521" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22.jpg" style="width: 250px; height: 250px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22-temperature-and-humidty-sensor-circuitry-wiring.jpg"&gt;&lt;img alt="dht22 temperature and humidty sensor circuitry wiring" class="aligncenter size-medium wp-image-522" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22-temperature-and-humidty-sensor-circuitry-wiring-207x300.jpg" style="width: 207px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip jau supratot, pasirinkau &lt;a class="reference external" href="http://www.adafruit.com/datasheets/DHT22.pdf"&gt;DHT22&lt;/a&gt; oro temperatūros ir drėgmės jutiklius. Juos pasirinkau dėl pakankamai mažos kainos (~4$ perkant iš &lt;a class="reference external" href="http://www.aliexpress.com/item/1pcs-DHT22-digital-temperature-and-humidity-sensor-Temperature-and-humidity-module-AM2302-replace-SHT11-SHT15-Free/1956275791.html"&gt;AliExpress&lt;/a&gt;), paprasto prijungimo (1-wire) ir, žinoma, dėl to, kad jau yra sukurta DHT22 duomenų nuskaitymo RPI biblioteka. Prie RPI DHT22 jutiklius prijungiau pagal viršuje dešinėje&amp;nbsp;pateiktą schemą. Projekte naudoju du DHT22 jutiklius, &amp;nbsp;todėl dėl naudojamos&amp;nbsp;DHT22 duomenų nuskaitymo bibliotekos apribojimų, jutiklius teko prijungti prie atskirtų RPI portų. Vieną iš jutiklių prijungiau prie GPIO19, kitą prie GPIO19. Iš principo, kur juos prijungti, skirtumo nėra. Man šie portai tiesiog buvo fiziškai patogiausi.&lt;/p&gt;
&lt;p&gt;Atėjo laikas susidiegti DHT22 nuskaitymo biblioteką. Tam konsolėje įvykdome šią komandą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;git://github.com/adafruit/Adafruit-Raspberry-Pi-Python-Code.git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Po to, jau kaip ir galime nuskaityti duomenis:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/home/Adafruit-Raspberry-Pi-Python-Code/Adafruit_DHT_Driver
sudo&lt;span class="w"&gt; &lt;/span&gt;./Adafruit_DHT&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;22&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;19&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Adafruit_DHT driveris priima du nustatymus: jutiklio versiją (DHT11 ar DHT22) ir porto numerį, prie kurio jutiklis yra prijungtas. Kadangi bandau nuskaityti duomenis iš DHT22 jutiklio, prijungto prie GPIO19 posto, Adafruit_DHT driveriui padaviau šiuos nustatymus: &amp;quot;&lt;em&gt;22 19&lt;/em&gt;&amp;quot;. Rezultatas štai toks:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_s.jpg"&gt;&lt;img alt="dht22_s" class="aligncenter size-full wp-image-526" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_s.jpg" style="width: 276px; height: 50px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;DHT22 yra gan užsispyręs jutiklis, todėl Adafruit_DHT biblioteka ne visuomet sugeba iš jo nuskaityti duomenis. Jei biblioteka negrąžina temperatūros ir santykinės oro drėgmės reikšmių, į jutiklį reikia kreiptis dar bartą. Liuda, bet bent kartą iš penkių jutiklis tikrai negražins mus dominančių duomenų:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_f.jpg"&gt;&lt;img alt="dht22_f" class="aligncenter size-full wp-image-525" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_f.jpg" style="width: 269px; height: 31px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-10-16-improvements-to-collection-of-sensor-data"&gt;Benaršydamas internete&lt;/a&gt;, radau, kad Adrafuit_DHT driveris potencialiai gali &amp;quot;pakabinti&amp;quot; visą sistemą. Potenciali bėda slypi šiame nekaltame driverio kodo gabaliukyje, kuris gali netyčia pereiti į amžiną ciklą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bcm2835_gpio_lev&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;usleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.anginf.de/?p=286"&gt;Protingi žmonės&lt;/a&gt;&amp;nbsp;siūlo šią potencialią klaidą taisyti taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// wait for pin to drop?&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;safety&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;max_wait&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bcm2835_gpio_lev&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;// if no answer, quit&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;safety&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;max_wait&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;}&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;usleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;safety&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pasiklioviau patarimu ir perkompiliavau Adafruit_DHT driverį. Tiesa, teko kiek pavargti, nes norint perkompiliuoti Adafruit_DHT.c, reikėjo pirma atsisiųsti&amp;nbsp;BCM2835 biblioteką, ją susikompiliuoti ir susidiegti. Taip padariau taip (pagal &lt;a class="reference external" href="http://www.anginf.de/?p=286"&gt;šį pavyzdį&lt;/a&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;work/bcm2835
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;work/bcm2835
wget&lt;span class="w"&gt; &lt;/span&gt;http://www.open.com.au/mikem/bcm2835/bcm2835-1.36.tar.gz
tar&lt;span class="w"&gt; &lt;/span&gt;xvfz&lt;span class="w"&gt; &lt;/span&gt;bcm2835-1.36.tar.gz
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;./bcm2835-1.36
./configure
make
sudo&lt;span class="w"&gt; &lt;/span&gt;make&lt;span class="w"&gt; &lt;/span&gt;install
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Patį Adafruit_DHT.c perkompiliavau (žinoma, prieš tai atnaujinęs C kodo gabaliuką) su šia komanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;gcc&lt;span class="w"&gt; &lt;/span&gt;Adafruit_DHT.c&lt;span class="w"&gt; &lt;/span&gt;-l&lt;span class="w"&gt; &lt;/span&gt;bcm2835&lt;span class="w"&gt; &lt;/span&gt;-std&lt;span class="o"&gt;=&lt;/span&gt;gnu99&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;Adafruit_DHT
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Na ką, atnaujintas driveris kaip ir veikia. Reikia pasiruošti MySQL duomenų bazę, į kurią rašysim duomenis. Susikūriau MySQL DB pavadinimu &amp;quot;warehouse&amp;quot;, kurioje sukūriau tokią duomenų lentelę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TABLE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;IF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;EXISTS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;duomenys&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_ID&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mediumint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_DATE_CREATED&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;timestamp&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;CURRENT_TIMESTAMP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_ActualDate&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Temperature_1&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Humidity_1&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Temperature_2&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Humidity_2&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Info&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;COLLATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;utf16_lithuanian_ci&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Comments&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;COLLATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;utf16_lithuanian_ci&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="k"&gt;PRIMARY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;D_ID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ENGINE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;InnoDB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CHARSET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utf16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;COLLATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utf16_lithuanian_ci&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;;[&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sql&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pagal kelis internetiniu pavyzdžius sukurpiau šiokį tokį Python skriptą, kuris nuskaito abiejų DHT22 jutiklių duomenis, juos suvidurkina ir kartu su laiko žyme, surašo į prieš tai sukurtą mysql lentelę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class="c1"&gt;# -\*- coding: utf-8 -\*-&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;MySQLdb&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;mdb&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;arrow&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;RPi.GPIO&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;GPIO&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BCM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;## uses GPIO numbers NOT pin numbers&lt;/span&gt;
&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setwarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kc"&gt;False&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;## 37 PIN / GPIO26&lt;/span&gt;

&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/python/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;#globals for temperature and humidity averaging&lt;/span&gt;
&lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;hum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_dht22&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;PiPin&lt;/span&gt; &lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_output&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./Adafruit_DHT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2302&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PiPin&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
    &lt;span class="n"&gt;matches&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Temp =&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;s+([-+]?[0-9.]+)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;
        &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="c1"&gt;#print temp&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="c1"&gt;#print &amp;quot;fail&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;matches&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hum =&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;s+([0-9.]+)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;hum&lt;/span&gt;
        &lt;span class="n"&gt;hum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;#print hum&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="c1"&gt;#print &amp;quot;fail&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;success&lt;/span&gt;

&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;con&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;USERNAME&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;warehouse&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;cur&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SELECT VERSION()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ver&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;sys_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;arrow&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH:mm:ss&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Database version : &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;ver&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;sys_date&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#Turn LED ON, while reading DHT2 sensors&lt;/span&gt;

&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;humidity_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read_dht22&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
            &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;humidity_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;humidity_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="c1"&gt;#print &amp;quot;[19] Temp: %s Hum: %s Count: %s&amp;quot; %(temp,hum,count_1)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="c1"&gt;#print &amp;quot;echem..&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[19] Temperature: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Humidity: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read_dht22&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
            &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="c1"&gt;#print &amp;quot;[1] Temp: %s Hum: %s Count: %s&amp;quot; %(temp,hum,count_2)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="c1"&gt;#print &amp;quot;echem..&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[13] Temperature: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Humidity: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, NULL,NULL,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,NULL,NULL, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, NULL,NULL,NULL,NULL, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;mdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Error &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;finally&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleanup&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tam, kad skriptas veiktų, reikia susidiegti MySQLdb modulį:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;python-mysqldb
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Skripte panaudojau ir&amp;nbsp;&lt;a class="reference external" href="http://crsmithdev.com/arrow/"&gt;Arrow&lt;/a&gt; laiko apskaitos biblioteką, kurią taip pat reikia susidiegti:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;python-setuptools
sudo&lt;span class="w"&gt; &lt;/span&gt;easy_install&lt;span class="w"&gt; &lt;/span&gt;pip
sudo&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;arrow
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Beje, nepamirškit skripte nurodyti savo mysql naudotojo vardo ir slaptažodžio ;)&lt;/p&gt;
&lt;p&gt;Patogumo dėlei, paruoštą skirptą (jį pavadinau mysql_dht.py) ir perkompiliuotą Adafruit_DHT driverį nukopijavau į /home/python direktoriją. Jei naudojate kitą direktoriją, ją nurodykite skirpto eilutėje &amp;quot;os.chdir(os.path.abspath('&lt;strong&gt;/home/python/&lt;/strong&gt;'))&amp;quot;, kitaip skriptas neveiks.&lt;/p&gt;
&lt;p&gt;Ar skriptas veikia, galima pasitikrinti tiesiai iš konsolės:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;/home/python/mysql_dht.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Turėtumėte gauti tokį rezultatą:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql.jpg"&gt;&lt;img alt="dht22_mysql" class="aligncenter wp-image-535 size-full" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql.jpg" style="width: 422px; height: 96px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jeigu gaunate tokią klaidą, įsitikinkite ar Adafruit_DHT driveris yra tikrai toje pačioje direktorijoje, kaip ir pats mysql_dht.py skirptas:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql_error.jpg"&gt;&lt;img alt="dht22_mysql_error" class="aligncenter size-full wp-image-536" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql_error.jpg" style="width: 624px; height: 257px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jei skriptas veikia gerai, galima užkurti automatinį jo vykdymą. Tam panaudojau Cron:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;crontab&lt;span class="w"&gt; &lt;/span&gt;-e
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Atsidariusiame lange, pačioje apačioje įrašiau tokią eilutę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,5,10,15,20,25,30,35,40,45,50,55&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;/home/python/mysql_dht.py&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Išsaugojus failą, mūsų skriptas bus įvykdomas kas 5 minutes. Simbolis &amp;quot;&amp;amp;&amp;quot; eilutės gale reiškia, kad procesas bus vykdomas fone ir netrukdys sistemos darbui.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/mysql.jpg"&gt;&lt;img alt="mysql" class="aligncenter size-full wp-image-539" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/mysql.jpg" style="width: 873px; height: 406px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ar Cron jobas veikia, gerai parodo mysql duomenys. Jei duomenys tvarkingai atsigula į nurodytą lentelę, galima eiti gerti kavos :D&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tinginiams:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Perkompiliuotą Adafruit_DHT driverį ir naujausią mano kodo versiją rasite &lt;a class="reference external" href="https://github.com/pauliusbau/raspberrypi-mayhem/tree/master/RPI-Weather"&gt;mano GitHub saugykloje&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Naudinga literatūra:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.raspipress.com/2012/09/tutorial-install-phpmyadmin-on-your-raspberry-pi"&gt;http://www.raspipress.com/2012/09/tutorial-install-phpmyadmin-on-your-raspberry-pi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://zetcode.com/db/mysqlpython/"&gt;http://zetcode.com/db/mysqlpython/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.raspberrypi.org/forums/viewtopic.php?f=32&amp;amp;t=79597"&gt;http://www.raspberrypi.org/forums/viewtopic.php?f=32&amp;amp;t=79597&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-07-20-adding-a-dht-sensor-to-the-raspberry-pi"&gt;http://sharedmemorydump.net/post/2013-07-20-adding-a-dht-sensor-to-the-raspberry-pi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-10-16-improvements-to-collection-of-sensor-data"&gt;http://sharedmemorydump.net/post/2013-10-16-improvements-to-collection-of-sensor-data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-07-18-logging-data-temperature-with-raspberry-pi"&gt;http://sharedmemorydump.net/post/2013-07-18-logging-data-temperature-with-raspberry-pi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.anginf.de/?p=286"&gt;http://www.anginf.de/?p=286&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.raspberrypi-spy.co.uk/2013/07/running-a-python-script-at-boot-using-cron/"&gt;http://www.raspberrypi-spy.co.uk/2013/07/running-a-python-script-at-boot-using-cron/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://serverfault.com/questions/248305/running-cron-on-every-10-minutes"&gt;http://serverfault.com/questions/248305/running-cron-on-every-10-minutes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://alvinalexander.com/linux/unix-linux-crontab-every-minute-hour-day-syntax"&gt;http://alvinalexander.com/linux/unix-linux-crontab-every-minute-hour-day-syntax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://askubuntu.com/questions/56683/where-is-the-cron-crontab-log"&gt;http://askubuntu.com/questions/56683/where-is-the-cron-crontab-log&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/26124363/how-to-keep-run-python-program-in-background-on-raspberry-pi-after-terminate-ssh"&gt;http://stackoverflow.com/questions/26124363/how-to-keep-run-python-program-in-background-on-raspberry-pi-after-terminate-ssh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/24161476/subprocess-popen-simple-code-not-working"&gt;http://stackoverflow.com/questions/24161476/subprocess-popen-simple-code-not-working&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Bonus:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Norintiems, bet negalintiems prisijungti prie MySQL DB, kuri sukasi jūsų RPI, siūlau pasiskaityti čia: &lt;a class="reference external" href="http://stackoverflow.com/questions/18733802/how-do-i-open-up-my-mysql-on-my-raspberry-pi-for-outside-remote-connections"&gt;http://stackoverflow.com/questions/18733802/how-do-i-open-up-my-mysql-on-my-raspberry-pi-for-outside-remote-connections&lt;/a&gt;&amp;nbsp;Man padėjo! ;)&lt;/p&gt;
</content><category term="Elektronika"></category><category term="Adafruit DHT"></category><category term="Adafruit_DHT"></category><category term="AM2303"></category><category term="avietė"></category><category term="cron"></category><category term="DHT22"></category><category term="gcc"></category><category term="logging"></category><category term="MySQL"></category><category term="Python"></category><category term="RaspberriPi"></category><category term="recompile"></category><category term="RPI"></category></entry><entry><title>Keistas daiktas naujoje Škodoje</title><link href="https://paulius.bautrenas.lt/keistas-daiktas.html" rel="alternate"></link><published>2014-09-12T11:15:00+03:00</published><updated>2014-09-12T11:15:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-09-12:/keistas-daiktas.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628.jpg"&gt;&lt;img alt="IMG_6628.JPG" class="aligncenter size-large wp-image-393" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629.jpg"&gt;&lt;img alt="IMG_6629.JPG" class="aligncenter size-large wp-image-392" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Neseniai visiškai naujoje (ką tik iš salono) škodoje radom štai tokį įdomų daikčiuką. Buvo įdėtas asmeninių daiktų skyrelyje tarp priekinių sėdynių. Daikto dydis kaip kokios Nokia 3310, korpusas visiškai hermetiškas. Ant priekinio dangtelio tik lazeriu išdegintas ID numeris ir du diodai. Vienas visiškai neaktyvus, kitas mirsi priklausomai nuo daikto padėties …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628.jpg"&gt;&lt;img alt="IMG_6628.JPG" class="aligncenter size-large wp-image-393" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629.jpg"&gt;&lt;img alt="IMG_6629.JPG" class="aligncenter size-large wp-image-392" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Neseniai visiškai naujoje (ką tik iš salono) škodoje radom štai tokį įdomų daikčiuką. Buvo įdėtas asmeninių daiktų skyrelyje tarp priekinių sėdynių. Daikto dydis kaip kokios Nokia 3310, korpusas visiškai hermetiškas. Ant priekinio dangtelio tik lazeriu išdegintas ID numeris ir du diodai. Vienas visiškai neaktyvus, kitas mirsi priklausomai nuo daikto padėties žemės atžvilgiu. Užpakalinė daikto dalis gan įdomios formos ir puikiai limpa prie metalo (viduje 4 stiprūs neodiminiai magnetai). Išardėm..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6635.jpg"&gt;&lt;img alt="IMG_6635.JPG" class="aligncenter size-large wp-image-395" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6635-768x1024.jpg" style="width: 400px; height: 533px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6634.jpg"&gt;&lt;img alt="IMG_6634.JPG" class="aligncenter size-large wp-image-394" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6634-768x1024.jpg" style="width: 400px; height: 533px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viduje PCD buvo sąžiningai užpilta silikonu, kuris labai lengvai nusikrapštė. Ant PCB nieko per daug įdomaus:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.semtech.com/images/datasheet/sx1211.pdf"&gt;SX1211&lt;/a&gt; - Semtech&amp;nbsp;863-870, 902-928 MHz ir 950-960 MHz transiveris&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.ti.com/lit/ds/symlink/cc2590.pdf"&gt;CC2590&lt;/a&gt; -&amp;nbsp;2.4 GHz Range Extender /&amp;nbsp;2.4-GHz RF Front End&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/39582b.pdf"&gt;PIC16F87XA&lt;/a&gt; - Microchip PIC mikrovaldiklis&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.analog.com/static/imported-files/data_sheets/ADXL345.pdf"&gt;ADXL345&lt;/a&gt; - 3 ašių akselerometras&lt;/li&gt;
&lt;li&gt;Nanotron Nanoloc NLS60501 -&amp;nbsp;&lt;a class="reference external" href="http://www.nanotron.com/EN/pdf/Factsheet_nanoLOC-NA5TR1.pdf"&gt;nanoLOC TRX serijos&lt;/a&gt; transiveris&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.adestotech.com/sites/default/files/datasheets/doc3668.pdf"&gt;AT25DF041A&lt;/a&gt;&amp;nbsp;-&amp;nbsp;4 megabit&amp;nbsp;SPI Serial Flash&lt;/li&gt;
&lt;li&gt;DC/DC - markė neaiški&lt;/li&gt;
&lt;li&gt;Keli kvarcai&lt;/li&gt;
&lt;li&gt;Daug apkabinimo detalių&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Daiktą pagamino čekų kompanija &amp;quot;&lt;a class="reference external" href="http://www.cutter.cz/"&gt;Cutter Systems spol.&lt;/a&gt;&amp;quot;, besispecializuojanti įvairių objektų sekimo ir monitoringo sistemose. &amp;nbsp;Kiek išsiskaitėm internete, labiausi panašu, kad šis neaiškus daiktas yra škodos gamybos linijos ID trackeris ar kažkas panašaus, pagal kurį kiekviena gamybos linijos celė identifikuoja, ką konkrečiai reikia daryti su kiekviena mašina.&lt;/p&gt;
&lt;p&gt;Gal kas turit konkrečių žinių apie šį daiktą?&lt;/p&gt;
</content><category term="Elektronika"></category><category term="cutter systems spol"></category><category term="keistas daiktas"></category><category term="NSI_Tag_v1.21"></category><category term="škoda"></category></entry><entry><title>LEDCtrl - LED juostos valdiklis</title><link href="https://paulius.bautrenas.lt/ledctrl-led-juostos-valdiklis.html" rel="alternate"></link><published>2014-08-22T08:00:00+03:00</published><updated>2014-08-22T08:00:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-08-22:/ledctrl-led-juostos-valdiklis.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399.jpg"&gt;&lt;img alt="IMG_6399" class="aligncenter wp-image-229 size-medium" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399-800x600.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;LEDCtrl - tai stipriai&amp;nbsp;&amp;quot;perprojektuotas&amp;quot; (angl.&amp;nbsp;&lt;em&gt;overengineered&lt;/em&gt;) &amp;nbsp;LED juostos valdiklis, aprūpintas PIR ir LDR jutikliais, 2x8 LCD ir rotoriniu enkoderiu, skirtas valdyti palėpės laiptų apšvietimą. Idėja susikonstruoti šį daiktą kilo gan seniai, po to kai naktį dėdė sugebėjo nusiristi nuo palėpės laiptų, nes tiesiog pamiršo, kad palėpės laiptai yra gan statūs …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399.jpg"&gt;&lt;img alt="IMG_6399" class="aligncenter wp-image-229 size-medium" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399-800x600.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;LEDCtrl - tai stipriai&amp;nbsp;&amp;quot;perprojektuotas&amp;quot; (angl.&amp;nbsp;&lt;em&gt;overengineered&lt;/em&gt;) &amp;nbsp;LED juostos valdiklis, aprūpintas PIR ir LDR jutikliais, 2x8 LCD ir rotoriniu enkoderiu, skirtas valdyti palėpės laiptų apšvietimą. Idėja susikonstruoti šį daiktą kilo gan seniai, po to kai naktį dėdė sugebėjo nusiristi nuo palėpės laiptų, nes tiesiog pamiršo, kad palėpės laiptai yra gan statūs (beveik kaip kopėčios). Norėdamas apsaugoti save ir artimuosius nuo panašių nutikimų, nusprendžiau palėpės laiptų angą apšviesti pigia LED juosta, maitinama iš 12V maitblokio. Sprendimas buvo vykęs, tačiau naktį erzino gan ryškus parazitinis palėpės kambario apšvietimas, trukdantis miegoti. Bandžiau problemą spręsti po ranka pasitaikiusiu LM317. Viskas buvo kaip ir gerai, tačiau norėjosi kažkokio mandresnio, ne taip kaistančio, sprendimo, leidžiančio dinamiškai keisti LED juostos šviesos stiprį. Taip pat norėjau kažkokio interaktyvumo. Taip ir kilo idėja susikonstruoti valdiklį, kuris LED juostą įjungtų (ar sustiprintų LED šviesos srautą) tik tada kai to reikia, t. y. tik tada kai kas nors lipa laiptais ar eina jų link.&lt;/p&gt;
&lt;div class="section" id="schema-ir-pcb"&gt;
&lt;h2&gt;&amp;nbsp;Schema ir PCB&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LEDCtrl_schema1.png"&gt;&lt;img alt="LEDCtrl_schema" class="aligncenter size-large wp-image-244" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LEDCtrl_schema1-827x1024.png" style="width: 625px; height: 773px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Schema idiotiškai paprasta. Atmega8 su standartiniu apkabinimu. Standartinis 2x8 LCD, kurio kontrastas sureguliuotas 100R ir 10K varžiniu dalikliu, o pašvietimas valdomas lauktranziu Q2 (gal tik reikėjo pašvietimo grandinėje nuosekliai kokį srovę ribojantį rezistorių įmontuoti..). Kadangi valdiklis yra pritaikytas IPM (angl. &lt;em&gt;PWM&lt;/em&gt;)&amp;nbsp;valdyti standartines kiniškas 12V LED juostas, todėl schemoje yra ir 7805 reguliatorisu su atitinkamu apkabinimu.&lt;/p&gt;
&lt;p&gt;Vartotojo sąsaja realizuota rotoriniu enkoderiu su mygtuku, pirktu iš ebay. Enkoderį pasirinkau grynai iš smalsumo, nes buvo baisiai įdomu su juo pasižaisti. Be to buvo labai nusibodę paprasti mygtukai.&lt;/p&gt;
&lt;p&gt;Schemoje įprojektuoti 3 šviesos diodai LED1–LED3 skirti &amp;quot;debuginimui&amp;quot;, kurie baigtame projekte tiesiog gražiai mirksi ir jokios naudos neduoda. Taip pat nepamiršau į schemoje įdėti ir AVR ISP bei USART jungčių. Pastaroji irgi labiau skirta &amp;quot;debuginimui&amp;quot;, nes visa naudotojo sąsaja yra realizuota per LCD ekranėlį ir rotorinį enkoderį.&lt;/p&gt;
&lt;p&gt;Kadangi pigios kiniškos LED juostos (pirkau iš ebay) dažniausiai būna su integruotais srovę ribojančiais rezistoriais, valdiklis juostą valdo paprasčiausiu IPM (angl. &lt;em&gt;PWM&lt;/em&gt;) per lauko tranzistorių Q1.&lt;/p&gt;
&lt;p&gt;Aplinkos apšviestumo lygis fiksuojamas paprasčiausiu LDR - &amp;nbsp;12K-100K fotorezistoriumi. Iš jo ir rezistoriaus R12 yra sudarytas varžinis daliklis, kurio išėjimas patenka tiesiai į atmegos ADC.&lt;/p&gt;
&lt;p&gt;Judesius fiksuoja ultra pigus PIR modulis. Apie panašius PIR modulius galit pasiskaityti &lt;a class="reference external" href="https://learn.adafruit.com/pir-passive-infrared-proximity-motion-sensor"&gt;Adafruit Learn sistemoje&lt;/a&gt;. Linkas iš ties pravartus, nes &lt;a class="reference external" href="https://learn.adafruit.com/pir-passive-infrared-proximity-motion-sensor/testing-a-pir"&gt;ten&lt;/a&gt; yra aprašyti skirtingi PIR veikimo režimai ir būdai pakeisti PIR išėjimo signalo parametrus. Verta iš kart įspėti, net potenciometru &amp;quot;Time&amp;quot; nureguliavus PIR signalo periodo trukmę iki minimumo, ji vis tiek yra labai ilga. Gal kokiai signalizacijai tai ir gerai, bet ne mano atveju. Man norėjosi trumpų PIR signalo periodų, todėl PIR modulio išėjimą prie INT0 prijungiau per RC high pass filtrą su maždaug 2 ms laiko konstanta. Kad įrašas atrodytų rimčiau, štai jums PIR signalo prieš filtą (geltona kreivė) ir po filtro (žalia kreivė) oscilograma:&lt;/p&gt;
&lt;p&gt;&lt;img alt="NewFile2" class="aligncenter size-full wp-image-284" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/NewFile2.jpg" style="width: 469px; height: 343px;" /&gt;&lt;/p&gt;
&lt;p&gt;PCB projektavau nenumatęs jokio konkretaus korpuso (žioplas sprendimas!), todėl stengiausi ją padaryti kuo mažesnę, visas jungtis išvesti į vieną kraštą, palikti pakankamai vietos rotorinio enkoderio rankenėlei. Tiesa pasakius, pirminiame variante buvau privėlęs žioplų klaidų (sumaišiau LCD maitinimo VEE ir VDD išvadus, nepalikau pakankamai vietos tarp 12V maitinimo jungčių, kiek per vėlai sugalvojau PIR prijungti per RC filtrą ir pan.), tačiau prie projekto &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/staircase_lamp"&gt;Github'e&lt;/a&gt; šios klaidos yra ištaisytos.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LRDCtrl_PCB.png"&gt;&lt;img alt="LRDCtrl_PCB" class="aligncenter size-large wp-image-237" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LRDCtrl_PCB-1024x550.png" style="width: 625px; height: 335px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tiesa, verta paminėti, kad schemoje nėra&amp;nbsp;apsaugos nuo atvirkštinio maitinimo prijungimo (angl. reverse poliarity protection), srovės ribojimo ir apsaugos nuo trumpo jungimo grandžių. Šį &amp;quot;kliurką&amp;quot; pastebėjau, tik montuodamas valdiklį į korpusą. Jei ketinat darytis šio valdiklio kopiją, būtinai pagalvokit apie minėtas apsaugas.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="surinkimas"&gt;
&lt;h2&gt;Surinkimas&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5338.jpg"&gt;&lt;img alt="IMG_5338" class="aligncenter wp-image-278 size-full" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5338.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5334.jpg"&gt;&lt;img alt="IMG_5334" class="aligncenter wp-image-280 size-full" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5334.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip ir minėjau, PCB tikrai paprasta, todėl ją sulituoti nebuvo sunku. Gal tik kiek teko pavargi bandant ištaisyti žioplą LCD maitinimo klaidą (laidų raizgalynė&amp;nbsp;PCB dešiniajame kampe). Svarbiausia, kad viskas veikė. Ne iš pirmo karto, bet veikė.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5345.jpg"&gt;&lt;img alt="IMG_5345" class="aligncenter size-large wp-image-274" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5345-764x1024.jpg" style="width: 522px; height: 699px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Visas smagumas prasidėjo, kai pagaliau prisiruošiau sumontuoti valdiklį į plastikinę dėžutę / korpusą. Norėjau, kad daugiau nebereikėtų niekada lįsti į valdiklio vidų, todėl nusprendžiau išvesti AVR ISP ir USART jungtis į lauką. Tam tiesiai prie PCB prilitavau IDC tipo kabelį su DB9 jungtimi. Aišku, nei vienam nei kitam IDC kabelio galui nepagailėjau karštų klijų. :D Taip pat nusprendžiau tiesiai prie PCB prilituoti ir PIR jutiklio išvadus, todėl laidų gavosi neplanuotai&amp;nbsp;daug..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5437.jpg"&gt;&lt;img alt="IMG_5437" class="aligncenter size-large wp-image-267" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5437-764x1024.jpg" style="width: 522px; height: 699px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nusprendžiau PCB korpuso viduje tvirtinti 3 mm varžais, o tarp korpuso ir PCB sudėti 8 mm plastikines tarpines (tie juodi vamzdeliai nuotraukoje apačioje). Juos sukišti į savo vietas buvo gan keblu, bet su stomatologo įrankiais tai pavyko atlikti gan greitai. :) Taip pat montuojant šiek tiek kreivokai išgręžiau varžtų tvirtinimo skyles, todėl jas pridengiau raudono kartono poveržlėmis.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6143.jpg"&gt;&lt;img alt="IMG_6143" class="aligncenter size-full wp-image-258" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6143.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nors viduje gavosi tikra laidų raizgalynė, iš išorės valdiklis gavosi gan gražus. Kaip rusai sako: &amp;quot;сойдёт для сельской местности!&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399.jpg"&gt;&lt;img alt="image1" class="aligncenter size-large wp-image-229" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6401.jpg"&gt;&lt;img alt="IMG_6401" class="aligncenter size-full wp-image-252" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6401.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6402.jpg"&gt;&lt;img alt="IMG_6402" class="aligncenter size-full wp-image-251" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6402.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="softas"&gt;
&lt;h2&gt;Softas&lt;/h2&gt;
&lt;p&gt;Va čia tai sudėtingiausiai projekto dalis, todėl kad valdiklio programoje yra realizuoti 4 darbo režimai ir 3 lygių naudotojo&amp;nbsp;meniu. Praktiškai visi valdiklio nustatymai yra keičiami per naudotojo meniu, todėl programos kodas gavosi tikrai sudėtingas ir ilgas. Prie to dar prisidėjo tai, kad programą rašiau praktiškai metus su nereguliariomis pertraukomis, iš kurių ilgiausia buvo beveik 6 mėn. Programuojantys puikai žino, kad net padarius kelių dienų pertrauką būna sunku vėl &amp;quot;įsijaust į kodą&amp;quot;, o dar po ilgesnės pertraukos iš vis pasidaro sunku galus sugaudyti. Kodo tvarkingumui tikrai nepadėjo ir tai, kad ūpui pakelti dažnai nevengiau buteliuko alaus ar viskio šlakelio. :D Na bet yra kaip yra. Gal vienas kitas bugas ir liko, bet daiktas veikia, atlieka savo funkcijas ir nelūžta.&lt;/p&gt;
&lt;p&gt;Pačio kodo komentuoti neketinu, nes nieko ten nėra ypatingo. Tiesiog ilga switch–case if– else if–else spageti makalynė su šiokiais tokiais komentarais ir viskas. Kam reikės, tas jau (tikriausiai tik aš pats kada nors ateityje) atsirinks. Gal tik verta paminėti kelis atmega8 hardware išnaudojimo sprendimus:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;INT0&lt;/strong&gt; - Pertrauktis apdoroja PIR jutiklį.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;INT1&lt;/strong&gt; - Pertrauktis skirta darbui su rotoriniu enkoderiu. Naudojama vaikščiojimui per naudotojo meniu bei parametrų verčių keitimui tiek confige tiek ir esant tam tikriems darbo režimams.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TIMER0&lt;/strong&gt; - TIMER0_OVF_vect pertrauktis atlieka ADC matavimus, kur reikia sušeria gautas reikšmes ir kai kuriuose darbo režimuose atnaujina LCD rodomą informaciją.&amp;nbsp;Kodėl nepanaudojau ADC pertraukties? Nežinau. T. y. nebeatsimenu, nes ADC nuskaitymą užkūriau vieną ir pirmųjų&amp;nbsp;:D Rodos dėl to, kad ADC pertrauktis stabdė kitų procesų darbą.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TIMER1&lt;/strong&gt; - TIMER1_COMPA_vect pertrauktis naudojama kaip laikrodis, skaičiuojantis sekundėmis. Pastarosios naudojamos atgaliniam skaičiavimui tarp darbo režimų persijungimo ir LCD pašvietimo trumpam įjungimui.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TIMER2&lt;/strong&gt; - Laikmatis naudojamas tik impulso pločio moduliacijai (angl. &lt;em&gt;PWM&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;USART&lt;/strong&gt; - Sukonfigūruota ant 9600 Boud, 8 bitų su 1 Stop bitu. Skirta grynai debuginimui.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;EEPROM&lt;/strong&gt; - visi konfigūraciniai parametrai, prieinami naudotojui per meniu, yra saugomi EEPROM'e. Tam, kad pirmą kartą užprogramuotas valdiklis nepradėtų grybauti, kode yra aprašyta funkcija&amp;nbsp;&lt;em&gt;first_time_boot()&lt;/em&gt;, kuri valdikliui startavus pirmą kartą į EEPROM surašo pagrindinių parametrų vertes.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Beje, visą valdiklio projektą, kartu su programos kodu, galite rasti straipsnio apačioje, &lt;a class="reference external" href="#download"&gt;atsisiuntimuose&lt;/a&gt;. ;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="darbo-rezimai"&gt;
&lt;h2&gt;Darbo režimai&lt;/h2&gt;
&lt;p&gt;Kaip minėjau, valdiklyje yra realizuoti 4 darbo režimai. Trumpai apie juos:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;ON/OFF&lt;/strong&gt; - LED juosta arba visiškai išjungta, arba nuolat šviečia pasirinktu stiprumu. Šviesos intensyvumas reguliuojamas darbo metu rotoriniu enkroderiu ir nustatyta vertė iškart išsaugoma EEPROM'e.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PIR/LDR&lt;/strong&gt; - Valdiklis nuolat tikriną ar kambario apšviestumas nenukrito žemiau nustatytos&amp;nbsp;vertės (parametras &lt;em&gt;LDRth&lt;/em&gt;). Užfiksavus, kad kambario apšviestumas yra nebepakankamas, yra įjungiama PIR pertrauktis. Suveikus PIR jutikliui, valdiklis švelniai sustiprina LED šviesos intensyvumą nuo naudotojo nustatytos reikšmės&amp;nbsp;&lt;em&gt;PWMmin&lt;/em&gt; iki&amp;nbsp;&lt;em&gt;PWMmax&amp;nbsp;*(žr. poskyrį &amp;quot;`Naudotojo meniu &amp;lt;#menu&amp;gt;`__&amp;quot;). Tai atlikęs mikrovaldiklis laukia nustatytą laiko&amp;nbsp;intervalą&amp;nbsp;*TimeOut&lt;/em&gt; ir LED juostos šviesos stiprį švelniai sumažina nuo&amp;nbsp;PWMmax iki&amp;nbsp;&lt;em&gt;PWMmin.
*Atgalinio *TimeOut&amp;nbsp;*skaičiavimo metu PIR pertrauktis gali suveikti iš naujo tik jeigu LDR jutiklio rodmenys nepakilo aukščiau nuostato&amp;nbsp;*LDRth&lt;/em&gt;. Tada laikas pradedamas skaičiuoti iš naujo. Jei&amp;nbsp;LDR jutiklio rodmenys staiga pakilo aukščiau&amp;nbsp;nuostato &lt;em&gt;LDRth&lt;/em&gt;, pav. užlipom laiptais ir įjungėm kambario apšvietimą, PIR pertrauktis yra išjungiama ir PIR signalas yra tiesiog ignoruojamas.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PIR&lt;/strong&gt; - Veikimo principas yra analogiškas &amp;quot;PIR/LDR&amp;quot; darbo režimui, tik čia nėra atsižvelgiama į fotorezistoriaus rodmenis. T. y. tiesiog, pirmą kartą PIR užfiksavus judesį, valdiklis&amp;nbsp;velniai sustiprina LED šviesos intensyvumą nuo naudotojo nustatytos reikšmės &lt;em&gt;PWMmin&lt;/em&gt; iki &lt;em&gt;PWMmax&amp;nbsp;*(kai tai veikia galite pamatyti skirsnyje &amp;quot;Rezultatai&amp;quot;). Tai atlikęs mikrovaldiklis laukia nustatytą laiko intervalą *TimeOut&lt;/em&gt; ir LED juostos šviesos stiprį švelniai sumažina nuo &lt;em&gt;PWMmax&lt;/em&gt; iki &lt;em&gt;PWMmin&lt;/em&gt;.&amp;nbsp;Atgalinio &lt;em&gt;TimeOut&lt;/em&gt; skaičiavimo metu PIR pertrauktis gali suveikti iš naujo.&amp;nbsp;Tada laikas pradedamas skaičiuoti iš naujo.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDR&lt;/strong&gt; - Tai savotiškas PI tipo LED juostos šviesos stiprio reguliatorius. Šiame darbo režime fotorezitoriaus vertė yra matuojama 8 kartus ir išvedamas vidurkis (I reguliatoriaus grandis). Po to ši vertė proporcingai (P reguliatoriaus grandis) yra perskaičiuojama ir &amp;quot;sušeriama&amp;quot; į&amp;nbsp;OCR2 registrą. Reguliatoriaus proporcinis koeficientas yra reguliuojamas tiesiai iš naudotojo meniu, darbo režimo metu&amp;nbsp;(žr. poskyrį &amp;quot;&lt;a class="reference external" href="#menu"&gt;Naudotojo meniu&lt;/a&gt;&amp;quot;).
Iš principo yra galimi du skirtingi šiuo darbo režimo variantai: &amp;quot;atvirkštinis&amp;quot; ir &amp;quot;tiesioginis&amp;quot; LED juostos šviesos stiprio reguliavimas. &amp;quot;Atvirkštinis&amp;quot; reguliavimas LED juostos šviesos intensyvumą mažina vis labiau, kuo patalpa yra labiau apšviesta. &amp;quot;Tiesioginis&amp;quot; reguliavimas -&amp;nbsp;LED juostos šviesos intensyvumą&amp;nbsp;didina vis labiau,&amp;nbsp;kuo patalpa yra labiau apšviesta. Kokiu režimu reguliatorius veikia yra nustatome konfigūracijos meniu punkte&amp;nbsp;&lt;em&gt;LDRinv&amp;nbsp;*(žr. poskyrį *&amp;quot;Naudotojo meniu&amp;quot;&lt;/em&gt;).*&amp;nbsp;*&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="naudotojo-meniu"&gt;
&lt;span id="menu"&gt;&lt;/span&gt;&lt;h2&gt;Naudotojo meniu&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/menu1.jpg"&gt;&lt;img alt="menu" class="aligncenter size-large wp-image-313" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/menu1-1024x785.jpg" style="width: 625px; height: 479px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vat ant tiek naudotojo sąsaja yra&amp;nbsp;komplikuota. :D Taip, ant tiek komplikuota, kad nenufotografavęs beveik kiekvieno LCD rodomo puslapio (pamiršau vieną :( ) ir &amp;quot;nesuphotoshopinęs&amp;quot; visko į vieną paveikslą, net nesugebėčiau nieko paaiškinti. Na tai pradedam...&lt;/p&gt;
&lt;div class="section" id="statusas"&gt;
&lt;h3&gt;&lt;strong&gt;Statusas&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Tai LCD puslapiai, kurie yra rodomi esant konkrečiam darbo režimui. T. y. kai jau iš pirmo nustatymo meniu lygio buvo išsirinktas konkretus darbo režimas. Kiekvienas darbo režimo statuso puslapis yra šiek tiek skirtingas.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;ON/OFF&lt;/strong&gt; režimo metu yra indikuojama, kad LED juosta yra išjungta (&amp;quot;OFF&amp;quot;) arba, kokiu ryškumu (procentais) ji šviečia.&lt;/li&gt;
&lt;li&gt;Esant &lt;strong&gt;PIR&lt;/strong&gt; darbo režimui, LCD ekrane atvaizduojamas &lt;em&gt;TimeOut&lt;/em&gt; laikas.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PIR/LDR&lt;/strong&gt; režimo metu - pirmiausia, kol fotorezitoriaus rodmenys (nuotraukoje &amp;quot;R55&amp;quot;, kur 55 - tai esame LDR reikšmė procentais), nenukrito žemiau &lt;em&gt;LDRth&lt;/em&gt; nuostato (nuotraukoje &amp;quot;T20&amp;quot;, kur 20 - nuostato vertė), rodomas vienas puslapis. Kai &amp;nbsp;fotorezitoriaus rodmenys nukrenta žemiau&amp;nbsp;LDRth nuostato yra persijungiama į PIR darbo režimo puslapį.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDR&lt;/strong&gt; darbo režimo metu, pirmoje LCD eilutėje yra rodoma reali LDR&amp;nbsp;reikšmė procentais. Antroje LCD eilutėje yra rodomas PI reguliatoriaus proporcinis&amp;nbsp;koeficientas (nuotraukoje &amp;quot;K&amp;quot;), šalia jo, tai kas patenka į OCR2 registrą procentais, to reikia, kad būtų galima stebėti&amp;nbsp;koeficiento &amp;quot;K&amp;quot; įtaką PI reguliatoriaus darbui.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="as-meniu-lygis"&gt;
&lt;h3&gt;&lt;strong&gt;1-as meniu lygis&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Esant bet kokiam darbo režimui, du kartus paspaudus rotorinio enkoderio mygtuką, naudotojas yra permetamas į nustatymų meniu. Tiksliau, į pirmąjį jo lygį, kuriame galima pasirinkti pageidaujamą darbo režimą, pereiti į konfigūracijos meniu &amp;quot;Config&amp;quot; arba sugrįžti į darbo statuso langą (t. y. išeiti iš meniu).&lt;/p&gt;
&lt;p&gt;Pasirinkus vieną iš darbo režimų, yra papildomai paklausiame, ar tikrai norimą jį įjungti. Jei pasirenkama reikšmė &amp;quot;ON&amp;quot;, darbo režimas yra tuoj pat įjungimas, o vartotojas yra nuvedamas į darbo režimo statuso langą. Jei pasirenkama &amp;quot;OFF&amp;quot; - naudotojas yra gražinamas į pirmąjį menių lygį.&lt;/p&gt;
&lt;p&gt;Pasirinkus menių punktą &amp;quot;CONFIG&amp;quot; yra pereinama į konfigūracinį menių.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="as-meniu-lygis-2"&gt;
&lt;span id="as-meniu-lygis-1"&gt;&lt;/span&gt;&lt;h3&gt;&lt;strong&gt;2-as meniu lygis&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Čia yra keičiami valdiklio nustatymai, apie kuriuos šiek tiek užsiminiau skirsnyje &amp;quot;Darbo režimai&amp;quot;. Funkcija &amp;quot;EXIT&amp;quot; naudotoją gražina į prieš tai buvusį meniu lygį, o pasirinkus vieną iš keistinų parametrų yra pereinama į 3-iąjį meniu.&lt;/p&gt;
&lt;p&gt;**&amp;nbsp;3-čiasis meniu lygis**&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;MinPWM&lt;/strong&gt; - procentais keičiamas minimalus LED juostos šviesos stipris. Realybėje 0% atitinka OCR2=0x00, o 100$ - OCR2=0x255. Arba, dar paprasčiau: 0% - 0V, 100% - 12V.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MaxPWM&lt;/strong&gt; - analogiškai procentais keičiamas ir maksimalus LED juostos šviesos stiprio nustatymas.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TimeOut&lt;/strong&gt; - laiko intervalas sekundėmis, kurį mikrovaldiklis PIR ir PIR/LDR darbo režimuose laukia prieš sumažindamas LED juostos šviesos stiprį nuo &lt;em&gt;PWMmax&lt;/em&gt; iki &lt;em&gt;PWMmin&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDRth&lt;/strong&gt; - keičiamas minimalus kambario apšviestumo lygis, prie kurio PIR/LDR darbo režimas turėtų įjungti PIR pertrauktį. LCD puslapyje yra rodomas tiek realus, iš LDR gaunamas, apšviestumo lygis procentais (nuotraukoje &amp;quot;R56&amp;quot;), tiek ir nustatomo &lt;em&gt;LDRth&lt;/em&gt; parametro vertė (nuotraukoje &amp;quot;T20&amp;quot;) procentais.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDRinv&lt;/strong&gt; - Galimybė &amp;quot;invertuoti&amp;quot; analoginio skaitmeniniu keitiklio (realiai LDR jutiklio) rodmenis. Kai &lt;em&gt;LDRinv&lt;/em&gt;=0, duomenys nėra invertuojami. &lt;em&gt;LDRinv&lt;/em&gt;=1 - invertuoja duomenis. Tiek realūs &lt;em&gt;R&lt;/em&gt;, tiek invertuoti duomenys&amp;nbsp;&lt;em&gt;I&lt;/em&gt; yra vienu metu atvaizduojami šiame LCD puslapyje.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ADCgain&lt;/strong&gt; - analoginio skaitmeninio keitiklio stiprinimo koeficiento nustatymo langas.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="rezultatai"&gt;
&lt;span id="results"&gt;&lt;/span&gt;&lt;h2&gt;Rezultatai&lt;/h2&gt;
&lt;p&gt;Štai taip atrodo mano palėpes laiptų apšvietimas. Pirmoje nuotraukoje LED juosta šviečia silpniausiu pajėgumu, antroje - didžiausiu.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6426.jpg"&gt;&lt;img alt="IMG_6426" class="aligncenter size-full wp-image-241" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6426.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6431.jpg"&gt;&lt;img alt="IMG_6431" class="aligncenter size-full wp-image-240" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6431.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O čia keli filmukai, kai veikia valdiklis. Filmavimo metu buvo įjungtas darbo režimas &amp;quot;PIR/LDR&amp;quot;.&lt;/p&gt;
&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/103897326" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/103897327" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/103897328" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class="section" id="atsisiutimai"&gt;
&lt;span id="download"&gt;&lt;/span&gt;&lt;h2&gt;Atsisiutimai&lt;/h2&gt;
&lt;p&gt;Valdiklio schemą, PCB ir programinę įrangą rasite&amp;nbsp;&lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/staircase_lamp"&gt;Github'e&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="Elektronika"></category><category term="Atmega"></category><category term="ATMega8"></category><category term="Atmel"></category><category term="LDR"></category><category term="LDR PI"></category><category term="LED"></category><category term="LED strip"></category><category term="PI"></category><category term="PIR"></category><category term="PWM"></category></entry><entry><title>Tunex Wireless Speaker CP-0180-A1</title><link href="https://paulius.bautrenas.lt/tunex-wireless-speaker-cp-0180-a1.html" rel="alternate"></link><published>2014-06-27T11:25:00+03:00</published><updated>2014-06-27T11:25:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-06-27:/tunex-wireless-speaker-cp-0180-a1.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976.jpg"&gt;&lt;img alt="IMG_4976" class="aligncenter wp-image-203 size-medium" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976-e1403851962349-300x281.jpg" style="width: 300px; height: 281px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Taigi, prieš gera mėnesiuką beklaidžiojant &lt;a class="reference external" href="https://www.youtube.com/watch?v=3gpNTEaRgNA&amp;amp;feature=kp"&gt;maximoje&lt;/a&gt;, akis užkliuvo už šio daikto. Kaip tik seniai svajojau apie belaidę kolonėlę savo durnaphonui, o dar ir akcija nebloga buvo... Susigundžiau..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4977-e1403852300591.jpg"&gt;&lt;img alt="IMG_4977" class="aligncenter wp-image-202 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4977-e1403852300591-764x1024.jpg" style="width: 400px; height: 536px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4978-e1403852313434.jpg"&gt;&lt;img alt="IMG_4978" class="aligncenter wp-image-201 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4978-e1403852313434-764x1024.jpg" style="width: 400px; height: 668px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ant dėžutės nieko įdomaus. Parašyta, tik kad kalonėlė yra maitinama iš 3 AA baterijų ir jos maksimali galia yra 2x2W. Keista, bet visiškai …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976.jpg"&gt;&lt;img alt="IMG_4976" class="aligncenter wp-image-203 size-medium" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976-e1403851962349-300x281.jpg" style="width: 300px; height: 281px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Taigi, prieš gera mėnesiuką beklaidžiojant &lt;a class="reference external" href="https://www.youtube.com/watch?v=3gpNTEaRgNA&amp;amp;feature=kp"&gt;maximoje&lt;/a&gt;, akis užkliuvo už šio daikto. Kaip tik seniai svajojau apie belaidę kolonėlę savo durnaphonui, o dar ir akcija nebloga buvo... Susigundžiau..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4977-e1403852300591.jpg"&gt;&lt;img alt="IMG_4977" class="aligncenter wp-image-202 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4977-e1403852300591-764x1024.jpg" style="width: 400px; height: 536px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4978-e1403852313434.jpg"&gt;&lt;img alt="IMG_4978" class="aligncenter wp-image-201 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4978-e1403852313434-764x1024.jpg" style="width: 400px; height: 668px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ant dėžutės nieko įdomaus. Parašyta, tik kad kalonėlė yra maitinama iš 3 AA baterijų ir jos maksimali galia yra 2x2W. Keista, bet visiškai neaprašyta, kokią sąsaja (WiFi, Bluetouth ar pan.) kolonėlė bendrauja su telefonu. Iš mažo paveikslėlio dėžutės priekyje, suprask, ale padėk telefoną ant kolonėlės ir viskas veiks. Iš principo taip ir yra, bet kaip? &lt;a class="reference external" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/3656917-magic-spongebob-300x225.jpg"&gt;Magija? :D&lt;/a&gt; Na bet apie viską iš eilės..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976-e1403851962349.jpg"&gt;&lt;img alt="image1" class="aligncenter size-large wp-image-203" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976-e1403851962349-1024x961.jpg" style="width: 400px; height: 536px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4975-e1403852338343.jpg"&gt;&lt;img alt="IMG_4975" class="aligncenter wp-image-204 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4975-e1403853362918-854x1024.jpg" style="width: 400px; height: 509px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4973-e1403853546473.jpg"&gt;&lt;img alt="IMG_4973" class="aligncenter size-large wp-image-206" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4973-e1403853546473-732x1024.jpg" style="width: 400px; height: 560px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pati kolonėlė atrodo tikrai gražiai (kaip už 20 Lt). Ant korpuso - jokių nesąmonių. Tiesiog du garsiakalbiai iš šonų, įjungimo mygtukas ir power/activity mėlynas šviesos diodas. Ant dugno, baterijų dangtelis. Tiesiog super. O kas gi viduje gyvena?&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4970.jpg"&gt;&lt;img alt="IMG_4970" class="aligncenter size-large wp-image-208" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4970-1024x764.jpg" style="width: 625px; height: 466px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip ir reikėjo tikėtis, viduje nieko ypatingo.. Maža PCB ir du garsiakalbiai.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4968.jpg"&gt;&lt;img alt="IMG_4968" class="aligncenter wp-image-210 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4968-e1403853890237-764x1024.jpg" style="width: 625px; height: 837px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4965-e1403853835254.jpg"&gt;&lt;img alt="IMG_4965" class="aligncenter size-large wp-image-213" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4965-e1403853835254-764x1024.jpg" style="width: 625px; height: 837px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Galinėje PCB pusėje AMS1117 3,3V stabilizatorius ir pora pasyvių elementų. Kitoje pusėje &lt;a class="reference external" href="http://vanzhen.en.seekic.com/product/integrated_circuits_ics/NS4203.html"&gt;NS4203&lt;/a&gt; 3W audio stiprintuvas, kažkoks ultra pigus mikrovaldiklis, užsiimantis įrenginio įjungimu/išjungimu ir status diodo mirksinimu į taktą, keli pasyvūs elementai ir du didžiuliai droseliai. Taip, droseliai! Vat taip šita beleidė kolonėlė ir veikia: ant kolonėlės uždėjus telefoną, telefono garsiakalbių signalas yra &amp;quot;nuimamas&amp;quot; būtent šiais droseliais, sustiprinamas ir išduodamas per kolonėlės garsiakalbius. Elementaru ir gudru. Jokių WiFi, Bluetooth, kabelių ir pan. Vienintelis trūkumas, kad šis magnetinis garso stiprinimas yra gan jautrus el. triukšmams, todėl kolonėlė mėgsta šiek tiek šnypšti. Bet gyventi galima.&lt;/p&gt;
&lt;p&gt;Radau internete filmuką, kuriame demonstruojama kaip tokia (ar analogiška) kolonėlė veikia:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Reziumė:&lt;/strong&gt; daiktas pigus ir visai vykęs, tačiau gyvenimą šiek tiek trumpina kolonėlės polinkis prisigaudyti eterio triukšmų. Garso kokybė - visai nieko, gaila, kad tik kolonėlės stiprinimo koeficientas nėra keičiamas, t. y. garso lygis yra reguliuojamas tik telefone: kuo garsiau plyšaus telefonas, tuo garsiau rėks kolonėlė.&lt;/p&gt;
</content><category term="Elektronika"></category><category term="CP-0180-A1"></category><category term="induction speaker"></category><category term="NS4203"></category><category term="wireless speaker"></category></entry></feed>