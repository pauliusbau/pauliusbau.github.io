<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Paulius Bautrėnas</title><link href="https://paulius.bautrenas.lt/" rel="alternate"></link><link href="https://paulius.bautrenas.lt/feeds/all.atom.xml" rel="self"></link><id>https://paulius.bautrenas.lt/</id><updated>2023-12-28T10:40:00+02:00</updated><subtitle>#define TRUE FALSE</subtitle><entry><title>WordPress mirė, tegyvuoja GitHub pages!</title><link href="https://paulius.bautrenas.lt/github-pages.html" rel="alternate"></link><published>2023-12-28T10:20:00+02:00</published><updated>2023-12-28T10:40:00+02:00</updated><author><name>Paulius Bautrėnas</name></author><id>tag:paulius.bautrenas.lt,2023-12-28:/github-pages.html</id><summary type="html">&lt;p class="first last"&gt;Blogas perkeliamas[tas] į GitHub pages&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Nusprendžiau pakeisti blogo &amp;quot;platformą&amp;quot; į labiau statinę. Tam pasirinau GitHub Pages.
Panamažu blog įrašai iš WordPress bus perkopijuoti čia. Kantybės :)&lt;/p&gt;
</content><category term="rand()"></category><category term="GitHub"></category><category term="blog"></category></entry><entry><title>Klaidingų duomenų paieška Tabibitosan metodu</title><link href="https://paulius.bautrenas.lt/klaidingu-duomenu-paieska-tabibitosan-metodu.html" rel="alternate"></link><published>2016-08-26T14:19:00+03:00</published><updated>2016-08-26T14:19:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2016-08-26:/klaidingu-duomenu-paieska-tabibitosan-metodu.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/data_island.png"&gt;&lt;img alt="data_island" class="aligncenter size-large wp-image-1086" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/data_island-1024x225.png" style="width: 625px; height: 137px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Darbe iš nutolusių įrenginių kelis kartus per valanda surenkam įvairių meteorologinių jutiklių duomenis. Mums ganėtinai svarbu, kad įrenginys veiktų tvarkingai ir visą laiką fiksuotų realią informaciją. Žinoma, visko pasitaiko: lūžta ryšio įrenginiai ar valdikliai, dingsta elektra arba sugenda pavieniai jutikliai. Kaip identifikuoju viso įrenginio veikimą, jau esu rašęs ankščiau poste …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/data_island.png"&gt;&lt;img alt="data_island" class="aligncenter size-large wp-image-1086" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/data_island-1024x225.png" style="width: 625px; height: 137px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Darbe iš nutolusių įrenginių kelis kartus per valanda surenkam įvairių meteorologinių jutiklių duomenis. Mums ganėtinai svarbu, kad įrenginys veiktų tvarkingai ir visą laiką fiksuotų realią informaciją. Žinoma, visko pasitaiko: lūžta ryšio įrenginiai ar valdikliai, dingsta elektra arba sugenda pavieniai jutikliai. Kaip identifikuoju viso įrenginio veikimą, jau esu rašęs ankščiau poste apie &lt;a class="reference external" href="oracle-hierarchines-uzklausos-su-with-ir-connect-by"&gt;hierarchines SQL užklausas&lt;/a&gt;. Su pavienių jutiklių veikimu-neveikimu yra šiek tiek sudėtingesnė situacija. Kartais pasitaiko, kad sugedus vienam ar kitam įrenginio jutikliui, įrenginio valdiklis &amp;quot;užsiciklina&amp;quot; ir kiekvienos tolimesnės iteracijos metu gražina paskutinę iš jutiklio surinktą reikšmę, kas labai iškreipią suvokimą apie įrenginio duomenų kokybę.&lt;/p&gt;
&lt;p&gt;Problema kaip ir aiški: norint išsiaiškinti, ar jutiklio duomenys yra &amp;quot;geri&amp;quot;, reikia tikrinti, ar duomenys iš vis yra ir ar reikšmės nesikartoja ilgą laiko periodą (pačių reikšmių teisingumas yra kitas klausimas). Norint, kad toks patikrinimas atneštų kažkokį žmogui suprantamą rezultatą, geriausia būtų identifikuoti laiko periodus (nuo-iki), kada duomenys buvo &amp;quot;blogi&amp;quot;. Tam puikiai tinka &lt;a class="reference external" href="https://community.oracle.com/message/3991678"&gt;Tabibitosan metodas&lt;/a&gt;. Metodas leidžia labai greitai ir paprastai surasti nuoseklius duomenų intervalus.&lt;/p&gt;
&lt;p&gt;Pavyzdžiui, turime keliolika eilučių duomenų, kuriuose skaičiai didėja su pertrūkiais:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  1
&lt;span class="linenos"&gt; 2&lt;/span&gt;  2
&lt;span class="linenos"&gt; 3&lt;/span&gt;  3
&lt;span class="linenos"&gt; 4&lt;/span&gt;  5
&lt;span class="linenos"&gt; 5&lt;/span&gt;  6
&lt;span class="linenos"&gt; 6&lt;/span&gt;  7
&lt;span class="linenos"&gt; 7&lt;/span&gt;  10
&lt;span class="linenos"&gt; 8&lt;/span&gt;  11
&lt;span class="linenos"&gt; 9&lt;/span&gt;  12
&lt;span class="linenos"&gt;10&lt;/span&gt;  20
&lt;span class="linenos"&gt;11&lt;/span&gt;  21
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tabibitosan leidžia identifikuoti šiuos intervalus ir gauti gražią jų suvestinę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;  MIN(NUMVAL) MAX(NUMVAL)
&lt;span class="linenos"&gt;2&lt;/span&gt;  ------------- -------------
&lt;span class="linenos"&gt;3&lt;/span&gt;  1 3
&lt;span class="linenos"&gt;4&lt;/span&gt;  5 7
&lt;span class="linenos"&gt;5&lt;/span&gt;  10 12
&lt;span class="linenos"&gt;6&lt;/span&gt;  20 21
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Smagiausia, kad užklausa yra genialiai paprasta ir lengvai suprantama:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Ex1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="k"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Row_Number&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;over&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disTance&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Ex1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;group&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disTance&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Užklausos paprastumas leidžia ją pritaikyti pagal savo poreikius. Be to, užklausa veikia su bet kokio tipo duomenų intervalais ir bet kokiu stulpelių skaičiumi. Pateikiu užklausą, kurią naudoju jutiklių duomenų klaidoms aptikti:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Ex2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-01&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-02&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-03&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-04&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-05&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-06&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-07&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-08&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-09&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-10&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-11&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-12&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-13&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-14&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-15&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-16&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-17&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-18&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;20&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-19&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;span class="linenos"&gt;21&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2016-08-20&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;
&lt;span class="linenos"&gt;22&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;23&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;tabibitosan&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;24&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;minDT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;maxDT&lt;/span&gt;
&lt;span class="linenos"&gt;25&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;26&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row_number&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;over&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;27&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;row_number&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;over&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;partition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;28&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disTance&lt;/span&gt;
&lt;span class="linenos"&gt;29&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Ex2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;30&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;group&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disTance&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;
&lt;span class="linenos"&gt;31&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NumVal&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;32&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;33&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tabibitosan&lt;/span&gt;
&lt;span class="linenos"&gt;34&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;maxDT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;minDT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Užklausa veikia analogiškai pirmajai, t. y. subužklausa &amp;quot;&lt;em&gt;tabibitosan&lt;/em&gt;&amp;quot; ieško nuoseklių &amp;quot;&lt;em&gt;NumVal&lt;/em&gt;&amp;quot; stulpelio reikšmių intervalo, tačiau gražina nebe patį intervalą, bet datas nuo kada iki kada tam &amp;quot;&lt;em&gt;NumVal&lt;/em&gt;&amp;quot; tikra reikšmė nesikeitė (dešinėje).&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_1.jpg"&gt;&lt;img alt="query_1" class="aligncenter size-full wp-image-1106" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_1.jpg" style="width: 220px; height: 419px;" /&gt;&lt;/a&gt; &lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_2.jpg"&gt;&lt;img alt="query_2" class="aligncenter size-full wp-image-1107" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_2.jpg" style="width: 353px; height: 307px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Toks rezultatas, žinoma, yra labai painus. Atsirinkti kas ir kaip padeda paskutinė užklausos dalis, kuri gražina tik tuos laiko intervalus, kurie buvo didesni nei, šiuo atveju, viena para. Taip gaunam intervalus, kad duomenys buvo klaidingi. T. y. kur jų nebuvo arba nesikeitė pakankamai ilgą laiką:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_3.jpg"&gt;&lt;img alt="query_3" class="aligncenter size-full wp-image-1105" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_3.jpg" style="width: 349px; height: 61px;" /&gt;&lt;/a&gt;&lt;/p&gt;
</content><category term="Programavimas"></category><category term="data gaps"></category><category term="duomenų trūkis"></category><category term="gaps"></category><category term="gaps and islands"></category><category term="islands"></category><category term="sql"></category><category term="tabibitosan"></category></entry><entry><title>Hibridinė JasperServer ataskaita iš Oracle ir MS SQL vienu metu</title><link href="https://paulius.bautrenas.lt/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu.html" rel="alternate"></link><published>2016-06-14T10:43:00+03:00</published><updated>2016-06-14T10:43:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2016-06-14:/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/dibert_db.png"&gt;&lt;img alt="dibert_db" class="aligncenter size-full wp-image-1042" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/dibert_db.png" style="width: 600px; height: 270px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Taip jau buvo, taip nutiko, kad prisireikė vienoje ataskaitoje dinamiškai &amp;quot;sukirsti&amp;quot; Oracle ir MS SQL Server duomenis. Klasikinis variantas šioje situacijoje yra vienos DB duomenų replikavimas/sinchronizavimas į kitą. Toks variantas gal ir yra pats geriausias/patikimiausiais, tačiau jis toli gražu nėra trivialus. Pirmiausia, aš pats nei vienos iš tų …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/dibert_db.png"&gt;&lt;img alt="dibert_db" class="aligncenter size-full wp-image-1042" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/dibert_db.png" style="width: 600px; height: 270px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Taip jau buvo, taip nutiko, kad prisireikė vienoje ataskaitoje dinamiškai &amp;quot;sukirsti&amp;quot; Oracle ir MS SQL Server duomenis. Klasikinis variantas šioje situacijoje yra vienos DB duomenų replikavimas/sinchronizavimas į kitą. Toks variantas gal ir yra pats geriausias/patikimiausiais, tačiau jis toli gražu nėra trivialus. Pirmiausia, aš pats nei vienos iš tų DB neadministruoju, todėl nagų kišti į vidų kaip ir negaliu. Antra, abiejų DB duomenų modeliai yra skirtingi, todėl norint gražiai perkelti duomenis, reiktų juos perskaičiuoti ir &amp;quot;pritraukti&amp;quot; iki vienos iš DB struktūros. Kol DBA keiksnodami bando įsivertinti darbų apimtis, nusprendžiau užduotį atlikti Jasper priemonėmis. Tiesa pasakius, kol pats nepabandžiau net nebuvau tikras, ar Jasperis iš vis gali imti duomenis iš kelių skirtingų DB vienu metu, bet tai atrodė visai logiška, nes Jasperis leidžia vienoje ataskaitoje manipuliuoti keliais tos pačios DB Dataset'ais. Jei jau galima kurti skirtingus datasetus, kodėl gi būtų negalima jų kurti iš skirtingų DB šaltinių?&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport04.jpg"&gt;&lt;img alt="subreport04" class="aligncenter size-full wp-image-1068" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport04.jpg" style="width: 714px; height: 170px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pasirodo, kad vienas iš būdų susieti vienos DB duomenis su kitos DB duomenimis yra subataskaita (angl. subreport). Subataskaita yra kuriama ir įkeliama į pagrindinę ataskaitą įprastai, kaip ir bet kokia kita subataskaita. Vienintelis dalykas, kuris skiriasi, yra subataksaitos &amp;quot;&lt;em&gt;connection expression&lt;/em&gt;&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport01.jpg"&gt;&lt;img alt="subreport01" class="aligncenter size-full wp-image-1050" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport01.jpg" style="width: 400px; height: 270px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport02.jpg"&gt;&lt;img alt="subreport02" class="aligncenter size-full wp-image-1049" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport02.jpg" style="width: 309px; height: 270px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vietoje to, kad kaip įprastai naudotume &amp;quot;&lt;em&gt;Use the same connection used to fill the master report&lt;/em&gt;&amp;quot;, renkamės punktą &amp;quot;&lt;em&gt;Use another connection&lt;/em&gt;&amp;quot; ir su savo prisijungimo duomenimis įrašome štai tokią eilutę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sql&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DriverManager&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getConnection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;jdbc:oracle:thin:@//server_name:server_port/SID_name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;password&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Visa skirtingų DB duomenų susiejimo magija vyksta per subataskaitos parametrus. Šioje vietoje reiktų pagrindinės ataskaitos (angl.&amp;nbsp;&lt;em&gt;master report&lt;/em&gt;) SQL užklausos rezultatus susieti su subataskaitos SQL užklausos parametrais. Mano atveju &amp;quot;pagrindinė&amp;quot; SQL traukė duomenis iš MS SQL Server, o subataskaita - iš Oracle:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport03.jpg"&gt;&lt;img alt="subreport03" class="aligncenter size-full wp-image-1062" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/subreport03.jpg" style="width: 660px; height: 446px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Gavosi štai toks duomenų atvaizdavimo kelias:&amp;nbsp; pagrindinė ataskaita sugeneruoja aibę &amp;quot;&lt;em&gt;master query&lt;/em&gt;&amp;quot; užklausos rezultatų eilučių, iš kurių kiekvieną paeiliui paduoda subataskaitai. Subataskaita yra &amp;quot;prasukama&amp;quot; su iš &amp;quot;&lt;em&gt;master query&lt;/em&gt;&amp;quot; gautais parametrais. Subataskaitos rezultatas yra gražinamas į pagrindinę ataskaitą. Procesas kartojasi. Žodžiu, visa eiga atrodo taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/jasper_2db.png"&gt;&lt;img alt="jasper_2db" class="aligncenter wp-image-1044 size-medium" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/jasper_2db-298x300.png" style="width: 298px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Paskutinis dalykas, kurį liko padaryti, yra sukelti sukurtas ataskaitas į JasperServer ir išbandyti. Hibridinė ataskaita gali neveikti dėl dviejų pagrindinių priežasčių: blogai parinkta atskaitos ir/ar subataskaitos &amp;quot;kalba&amp;quot; arba blogai parinktas į JasperServer įkeltos ataskaitos &amp;quot;Data Source&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/jasper_language.jpg"&gt;&lt;img alt="jasper_language" class="aligncenter size-full wp-image-1071" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/jasper_language.jpg" style="width: 444px; height: 114px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ataskaitos ir subataskaitos &amp;quot;kalba&amp;quot; turėtų būti parinkta &lt;strong&gt;Java&lt;/strong&gt;. Nei su Groovy, nei su JS aprašomas metodas neturėtų veikti.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/jasper_data_source.jpg"&gt;&lt;img alt="jasper_data_source" class="aligncenter size-full wp-image-1072" src="https://paulius.bautrenas.lt/images/hibridine-jasperserver-ataskaita-is-oracle-ir-ms-sql-vienu-metu/jasper_data_source.jpg" style="width: 996px; height: 230px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pagrindinės ataskaitos &amp;quot;Data Source&amp;quot; yra nustatomas per JasperServer administravimo aplinką, dešiniu pelės klavišu paspaudus ant konkrečios ataskaitos ir išsirinkus punktą &amp;quot;Edit&amp;quot;. Nukeliavus į nustatymus &amp;quot;Data Source&amp;quot;, reikia nustatyti būtent tą duomenų šaltinį, iš kurio pagrindinė ataskaita turės traukti duomenis. Mano atveju, tai buvo MS SQL Server.&lt;/p&gt;
&lt;div class="section" id="informacijos-saltiniai"&gt;
&lt;h2&gt;Informacijos šaltiniai:&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://www.packtpub.com/books/content/jasperreports-36-using-multiple-relational-databases-generate-report"&gt;https://www.packtpub.com/books/content/jasperreports-36-using-multiple-relational-databases-generate-report&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://community.jaspersoft.com/wiki/how-use-two-different-connections-databases-ireport"&gt;http://community.jaspersoft.com/wiki/how-use-two-different-connections-databases-ireport&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://community.jaspersoft.com/questions/535964/subreport-using-completely-different-datasource"&gt;http://community.jaspersoft.com/questions/535964/subreport-using-completely-different-datasource&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/11843618/error-evaluating-expression-with-multiple-database-in-ireport"&gt;http://stackoverflow.com/questions/11843618/error-evaluating-expression-with-multiple-database-in-ireport&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="Programavimas"></category><category term="iReport"></category><category term="jasper"></category><category term="JasperServer"></category><category term="mssql"></category><category term="NoteForMyself"></category><category term="oracle"></category><category term="sql"></category><category term="subreport"></category></entry><entry><title>Automatinis nuotraukų mažinimas</title><link href="https://paulius.bautrenas.lt/nuotrauku-mazinimas.html" rel="alternate"></link><published>2015-08-26T15:08:00+03:00</published><updated>2015-08-26T15:08:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-08-26:/nuotrauku-mazinimas.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/app-resizeme-512.png"&gt;&lt;img alt="app-resizeme-512" class="aligncenter size-medium wp-image-894" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/app-resizeme-512-300x300.png" style="width: 300px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Prisireikė darbe sumažinti krūvą kamerų nuotraukų. Nuotraukų, švelniai tariant, daug. Labai daug, apie 6 mln. vnt. (~1 TB). &amp;nbsp;Visos nuotraukos tvarkingai sudėliotos į hierarchinę aplankų struktūrą pagal kameros pavadinimą,&amp;nbsp;metus, mėnesį&amp;nbsp;ir&amp;nbsp;dieną, todėl &amp;quot;prieiti&amp;quot; iki konkrečios nuotraukos nėra labai jau paprasta. Dar įdomiau, kad ne visų kamerų vaizdus reikia …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/app-resizeme-512.png"&gt;&lt;img alt="app-resizeme-512" class="aligncenter size-medium wp-image-894" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/app-resizeme-512-300x300.png" style="width: 300px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Prisireikė darbe sumažinti krūvą kamerų nuotraukų. Nuotraukų, švelniai tariant, daug. Labai daug, apie 6 mln. vnt. (~1 TB). &amp;nbsp;Visos nuotraukos tvarkingai sudėliotos į hierarchinę aplankų struktūrą pagal kameros pavadinimą,&amp;nbsp;metus, mėnesį&amp;nbsp;ir&amp;nbsp;dieną, todėl &amp;quot;prieiti&amp;quot; iki konkrečios nuotraukos nėra labai jau paprasta. Dar įdomiau, kad ne visų kamerų vaizdus reikia mažinti. Kai kurie kamerų vaizdai jau yra reikiamo dydžio, ir juos papildomai apdorojant būtų be reikalo gaištamas laikas. Ką&amp;nbsp;daryti..? Aš radau tris skirtingo sudėtingumo šios užduoties įgyvendinimo variantus.&lt;/p&gt;
&lt;div class="section" id="image-resizer"&gt;
&lt;h2&gt;&lt;a class="reference external" href="https://imageresizer.codeplex.com/"&gt;Image Resizer&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/ContextMenu.png"&gt;&lt;img alt="ContextMenu" class="aligncenter size-full wp-image-893" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/ContextMenu.png" style="width: 437px; height: 375px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/ImageResizer.png"&gt;&lt;img alt="ImageResizer" class="aligncenter size-full wp-image-892" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/ImageResizer.png" style="width: 376px; height: 353px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tai pats paprasčiausias variantas. &lt;a class="reference external" href="https://imageresizer.codeplex.com"&gt;Atsisiuntus&lt;/a&gt; ir susiinstaliavus &amp;quot;Image Resizer&amp;quot;, jums beliks tik pasirinkti norimus sumažinti paveikslėlius, ant jų paspausti dešiniu pelės klavišu, išsirinkti meniu punktą &amp;quot;Rezise pictures&amp;quot;, nustatyti norimus parametrus ir paspausti &amp;quot;Resize&amp;quot;. Viską kitą programa padarys pati.&lt;/p&gt;
&lt;p&gt;Didžiausias programos privalumas yra tas, kad ji turi intuityvią naudotoją sąsają. Taip pat yra pakankamai protinga ir gali tik mažinti paveikslėlius (uždėjus varnelę &amp;quot;Only shrink pictures&amp;quot;). Kitos programos, tuo tarpu, bando ištampyti mažus paveikslėlius iki nustatyto dydžio. Labai patogu, kad &amp;quot;Image Resizer&amp;quot;&amp;nbsp;gali ne tik perrašyti failų originalus bet ir&amp;nbsp;sukurti sumažintų paveikslų kopiją.&lt;/p&gt;
&lt;p&gt;Didžiausiais programos trūkumas - &amp;quot;Image Resizer&amp;quot;&amp;nbsp;negalima &amp;quot;užsiundyti&amp;quot; ant visos nuotraukų direktorijos. T. y. reikia rankiniu būdu pasirinkti konkrečius nuotraukų failus. Mano atveju, ši programa nelabai tinka, nes kaip minėjau įžangoje, mano nuotraukos tvarkingai sudėliotos į hierarchinę aplankų struktūrą pagal kameros pavadinimą, metus, mėnesį ir dieną, todėl &amp;quot;prieiti&amp;quot; iki konkrečios nuotraukos nėra labai paprasta ir užima per daug laiko. Taip pat programa kaip ir neturi jokio vizualinio darbo eigos indikatoriaus. T. y. paleidus &amp;quot;Resize&amp;quot;, apie vykstantį darbą galima suprasti tik iš failų dydžių ir iš CPU apkrovos. Nėra nurodoma, ką programa konkrečiai veikia.&lt;/p&gt;
&lt;div class="section" id="image-magick"&gt;
&lt;h3&gt;Image Magick&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/Imagemagick-logo.png"&gt;&lt;img alt="Imagemagick-logo" class="aligncenter size-medium wp-image-887" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/Imagemagick-logo-291x300.png" style="width: 291px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.imagemagick.org/script/index.php"&gt;Image Magick&lt;/a&gt; - tai, tikriausiai, pats galingiausiais ir universaliausiais įrankis, skirtas manipuliacijos su paveikslėliais iš komandinės eilutės. Su &amp;quot;Image &amp;nbsp;Magick&amp;quot; galime keisti paveikslėlio dydį ir formatą, transformuoti paveikslėlį (pasukti, pakreipti ir pan.), kai kurias paveikslėlio vietas padaryt permatomas, ant paveikslėlio užpiešti geometrines figūras, sukomponuoti kelis paveikslus į vieną ar pakeisti paveikslėlio spalvinę gamą. Ir visa tai (tikrai dar daugiau visko) galima atlikti iš komandinės eilutės! Na bet kol kas mus domina tik paveikslėlių mažinimas.&lt;/p&gt;
&lt;p&gt;Apie paveikslėlių mažinimą yra parašyta išsami&amp;nbsp;&lt;a class="reference external" href="http://www.imagemagick.org/Usage/resize/"&gt;pasakėčia&lt;/a&gt;, &amp;nbsp;kurią tikrai vertėtų kada nors pasiskaityti, tačiau pradžiai užteks ir tokios komandos:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;convert&lt;span class="w"&gt; &lt;/span&gt;image.jpg&lt;span class="w"&gt; &lt;/span&gt;-resize&lt;span class="w"&gt; &lt;/span&gt;640x480&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;image_min.jpg
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ši komanda nurodytą paveikslėlį &lt;em&gt;image.jpg&lt;/em&gt; sumažins iki nurodyto dydžio (atsižvelgdama į originalaus paveikslėlio proporcijas) ir išsaugos nauju vardu&amp;nbsp;&lt;em&gt;image_min.jpg&lt;/em&gt;. Norint, kad komanda originalų&amp;nbsp;paveikslėlį perrašytų, tiesiog reikia nurodyti&amp;nbsp;tokį pat naujo failo pavadinimą kaip ir originalaus failo. Easy!&lt;/p&gt;
&lt;p&gt;O&amp;nbsp;kaip tokią komandą &amp;quot;užsiundyti&amp;quot; ant visų pageidaujamų failų? T. y. kaip su &amp;quot;Image Magick&amp;quot; sumažinti visas aplanke esančias nuotraukas? O gi, pasirodo, labai paprastai. Mums padės komandinės eilutės komanda &lt;a class="reference external" href="https://technet.microsoft.com/en-us/library/bb490909.aspx"&gt;FOR&lt;/a&gt;, kuri, kaip ir reikia suprasti, užsuks ciklą, kuris pereis per visus failus ir jiems įvykdys dydžio sumažinimo&amp;nbsp;komandą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FOR&lt;span class="w"&gt; &lt;/span&gt;/R&lt;span class="w"&gt; &lt;/span&gt;%f&lt;span class="w"&gt; &lt;/span&gt;IN&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;.jpg&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;DO&lt;span class="w"&gt; &lt;/span&gt;convert&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%f&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-resize&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;640x480&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%f&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nuotraukų mažinimu aš iš principo siekiau išpešti kuo daugiau laisvos duomenų saugyklos vietos, todėl man labiau rūpėjo sumažinti ne tiek matmenimis, kiek užimama disko vieta dideles nuotraukas. Taip gimė komanda, kuri mažina tik nuotraukas didesnes nei 100 kB:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FOR&lt;span class="w"&gt; &lt;/span&gt;/r&lt;span class="w"&gt; &lt;/span&gt;%f&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;do&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;%~zf&lt;span class="w"&gt; &lt;/span&gt;gtr&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100000&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;convert&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%f&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-resize&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;640x480&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%f&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Aišku, didelių nuotraukų dydžio galima ir nekeisti. Kartais gali užtekti tik sumažinti nuotraukos kokybę. Po ilgų išieškojimų, pagaminau tokią komandą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FOR&lt;span class="w"&gt; &lt;/span&gt;/R&lt;span class="w"&gt; &lt;/span&gt;%f&lt;span class="w"&gt; &lt;/span&gt;IN&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;.jpg&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;DO&lt;span class="w"&gt; &lt;/span&gt;convert&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%f&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-strip&lt;span class="w"&gt; &lt;/span&gt;-interlace&lt;span class="w"&gt; &lt;/span&gt;Plane&lt;span class="w"&gt; &lt;/span&gt;-gaussian-blur&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.05&lt;span class="w"&gt; &lt;/span&gt;-quality&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;75&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%f&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Norint, kad visas sumažintos kokybės nuotraukas komanda išsaugotų šakniniame kataloge, komandą galima pakeisti taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FOR&lt;span class="w"&gt; &lt;/span&gt;/R&lt;span class="w"&gt; &lt;/span&gt;%f&lt;span class="w"&gt; &lt;/span&gt;IN&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;.jpg&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;DO&lt;span class="w"&gt; &lt;/span&gt;convert&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%f&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-strip&lt;span class="w"&gt; &lt;/span&gt;-interlace&lt;span class="w"&gt; &lt;/span&gt;Plane&lt;span class="w"&gt; &lt;/span&gt;-gaussian-blur&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.05&lt;span class="w"&gt; &lt;/span&gt;-quality&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;75&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;%~nxf&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Prierašas %~nxf&amp;nbsp; &lt;a class="reference external" href="http://superuser.com/questions/489240/how-to-get-filename-only-without-path-in-windows-command-line"&gt;gražina tik failo pavadinimą&lt;/a&gt;, tuo tarpu kaip&amp;nbsp;%f gražina visą kelią iki failo.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="image-magick-vbs"&gt;
&lt;h3&gt;Image Magick + VBS&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/kameros_struktura.jpg"&gt;&lt;img alt="kameros_struktura" class="aligncenter size-full wp-image-908" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/kameros_struktura.jpg" style="width: 472px; height: 245px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Prieš tai aprašytas metodas puikiai tinka absoliučiai visų direktorijoje ir šios subdirektorijose esančių nuotraukų sumažinimui. Tačiau ką daryti, jeigu norime sumažinti tik kai kurių kamerų nuotraukas? Tarkim, kad norime sumažinti tik &amp;quot;Kamera2&amp;quot; ir &amp;quot;Kamera4&amp;quot; vaizdus (žr. paveikslą viršuje), visus kitus paliekant ramybėje. Bandant panaudoti prieš tai aprašytą &lt;em&gt;for /R&lt;/em&gt;&amp;nbsp;metodą tektų komandą vykdyti du kartus: vieną kartą direktorijai \&lt;em&gt;Kameros\Kamera2&lt;/em&gt;, kitą kartą - &lt;em&gt;\Kameros\Kamera4&lt;/em&gt;. Tai gan nepatogu bei sunku automatizuoti.&lt;/p&gt;
&lt;p&gt;Kiek pasigilinus ir &amp;quot;pasigooglinus&amp;quot; gimė štai toks &lt;em&gt;Kameru_vaizdu_suspaudimas.vbs&lt;/em&gt; skriptas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;Const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;srcDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;C:&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;Const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;camerasDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\Kameros&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;Const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;minFileSize&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;&amp;#39;kb&lt;/span&gt;

&lt;span class="k"&gt;Set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fso&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CreateObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Scripting.FileSystemObject&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CreateObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ImageMagickObject.MagickImage.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c"&gt;&amp;#39; Skriptui aktualiu kameru masyvas:&lt;/span&gt;
&lt;span class="k"&gt;Dim&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kameros&lt;/span&gt;
&lt;span class="n"&gt;kameros&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Kamera2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Kamera4&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;Sub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;ShowSubFolders&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Folder&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Subfolder&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Folder&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SubFolders&lt;/span&gt;
&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;objShell&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CreateObject&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;WScript.Shell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;objShell&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CurrentDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fso&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetFolder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Subfolder&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;objShell&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CurrentDirectory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;Set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SubFolder&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Files&lt;/span&gt;
&lt;span class="k"&gt;For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;
&lt;span class="k"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;minFileSize&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Then&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Subfolder&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kb&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Convert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-resize&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;640x480&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;
&lt;span class="k"&gt;Else&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SKIP &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Subfolder&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kb&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;End&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;If&lt;/span&gt;
&lt;span class="k"&gt;Next&lt;/span&gt;
&lt;span class="n"&gt;ShowSubFolders&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Subfolder&lt;/span&gt;
&lt;span class="k"&gt;Next&lt;/span&gt;
&lt;span class="k"&gt;End&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Sub&lt;/span&gt;

&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-------------------------------------------&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Vaizdo kameru vaizdu suspaustimo skriptas&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;DateInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DateInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Now&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;VbCrLf&lt;/span&gt;
&lt;span class="n"&gt;Wscript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DateInfo&lt;/span&gt;

&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-------------------------------------------&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;In&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kameros&lt;/span&gt;

&lt;span class="k"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fso&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FolderExists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;srcDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;camerasDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Then&lt;/span&gt;

&lt;span class="k"&gt;Set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kamera&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fso&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetFolder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;srcDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;camerasDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Nulindau i &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kamera&lt;/span&gt;
&lt;span class="k"&gt;Set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;folderObj&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fso&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetFolder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kamera&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;objShell&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CreateObject&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;WScript.Shell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;objShell&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CurrentDirectory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fso&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetFolder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kamera&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;objShell&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CurrentDirectory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;folderObj&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Files&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;
&lt;span class="k"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;minFileSize&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Then&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kamera&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kb&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Convert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-resize&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;640x480&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;
&lt;span class="k"&gt;Else&lt;/span&gt;
&lt;span class="n"&gt;WScript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SKIP&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kamera&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1024&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kb&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;End&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;If&lt;/span&gt;
&lt;span class="k"&gt;Next&lt;/span&gt;

&lt;span class="c"&gt;&amp;#39;Pereisim per visus subfolderius:&lt;/span&gt;
&lt;span class="n"&gt;ShowSubFolders&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fso&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GetFolder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;kamera&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;Else&lt;/span&gt;
&lt;span class="n"&gt;Wscript&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Folder &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;srcDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;camerasDir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\\&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&amp;quot; does not exist?&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;End&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;If&lt;/span&gt;

&lt;span class="k"&gt;Next&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Skriptas gavosi pakankamai gudrus. Jis iš nurodytos direktorijos &amp;quot;C:\Kameros\&amp;quot; atsirenka tik masyve &amp;quot;&lt;em&gt;kameros&lt;/em&gt;&amp;quot; nurodytas subdirektorijas&amp;nbsp;&amp;quot;Kamera2&amp;quot;&amp;nbsp;ir&amp;nbsp;&amp;quot;Kamera4&amp;quot;. &amp;nbsp;Tada paeiliui pereina per šių subdirektorijų subdirektorijas &amp;nbsp;ir suranda visus jose esančius failus. Jeigu konkretus failas yra didesnis nei nurodytas&amp;nbsp;&lt;em&gt;minFileSize = 100 KB&lt;/em&gt;, jam įvykdo nuotraukos sumažinimo komandą. Jei failas mažesnis - jį praleidžia. Visą savo darbo eigą skirptas išspausdina į komandinę eilutę.&lt;/p&gt;
&lt;p&gt;Iš komandinės eilutės &amp;nbsp;šį skriptą geriausia paleisti taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cscript.exe&lt;span class="w"&gt; &lt;/span&gt;//nologo&lt;span class="w"&gt; &lt;/span&gt;//D&lt;span class="w"&gt; &lt;/span&gt;C:&lt;span class="se"&gt;\\&lt;/span&gt;Kameru_vaizdu_suspaudimas.vbs
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tai apsaugos nuo iššokančių Windows Script Host pranešimų ir kitokių &amp;nbsp;negandų. Geriausia, apskritai pastarąją eilutę įrašyti į BAT failiuką. Taip skriptą galima bus galima paleisti Windows Schedule priemonėmis.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;P. S.&lt;/strong&gt; patarimas dėl lietuviškų rašmenų. Bent jau aš susidūriau su tokia problema, kad vbs skriptas piktybiškas nenorėjo&amp;nbsp;&amp;nbsp;pripažinti lietuviškų raidžių kamerų pavadinimuose. Pav. &lt;em&gt;C:\Kameros\***Obuolys*&lt;/em&gt; puikiausiai veikė, o vat &lt;em&gt;C:\Kameros\***Kriaušė*&lt;/em&gt; niekaip. Šiokį tokį sprendimą radau &lt;a class="reference external" href="http://stackoverflow.com/questions/5788671/calling-any-file-script-with-russian-name-from-vbscript-fails"&gt;StackOverflow&lt;/a&gt; forumuose. Čia protingas žmogėnas pasiūlė naudoti ne pilną katalogo/failo pavadinimą, o jo &amp;quot;ShortPath&amp;quot; versiją.&amp;nbsp;&amp;quot;ShortPath&amp;quot; vardus galima sužinoti su komanda &lt;strong&gt;dir /x&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/shortpath.jpg"&gt;&lt;img alt="shortpath" class="aligncenter size-full wp-image-914" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/shortpath.jpg" style="width: 452px; height: 215px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Grįžtant prie mano VBS skripto,&amp;nbsp;&amp;quot;ShortPath&amp;quot; vardų panaudojimas realizuojamas pakeišiant kamerų direktorijų pavadinimų masyvo reikšmes iš:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;kameros&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Obuolys&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Kriaušė&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;į:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;kameros&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Obuolys&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;KRIAU~1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Štai ir viskas!&lt;/div&gt;
&lt;/div&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/doctorwho.gif"&gt;&lt;img alt="doctorwho" class="aligncenter size-full wp-image-917" src="https://paulius.bautrenas.lt/images/nuotrauku-mazinimas/doctorwho.gif" style="width: 500px; height: 282px;" /&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="Programavimas"></category><category term="batch"></category><category term="batch process"></category><category term="cmd"></category><category term="convert"></category><category term="for /r"></category><category term="image magick"></category><category term="image recize"></category><category term="nuotraukų mažinimas"></category><category term="sumažinimas"></category><category term="vbs"></category><category term="windows"></category></entry><entry><title>Dinaminis SQL užklausos "where" sąlygų keitimas</title><link href="https://paulius.bautrenas.lt/dinaminis-sql-uzklausos-where-salygu-keitimas.html" rel="alternate"></link><published>2015-07-28T16:01:00+03:00</published><updated>2015-07-28T16:01:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-07-28:/dinaminis-sql-uzklausos-where-salygu-keitimas.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/dinaminis-sql-uzklausos-where-salygu-keitimas/sql_geek.jpg"&gt;&lt;img alt="sql_geek" class="aligncenter wp-image-841" src="https://paulius.bautrenas.lt/images/dinaminis-sql-uzklausos-where-salygu-keitimas/sql_geek.jpg" style="width: 400px; height: 370px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Situacija dažnai sutinkama kasdieniniame darbe. Turim select'ą su daug where sąlygų. Vieną kartą select'ą tenka įvykdyti su vienomis sąlygomis, antrą kartą su kitomis, trečią - su visomis išskyrus vieną ir pan. Jeigu select'as trumpas, bėdos nėra: užkomentuojam nereikalingas eilutes ir tiek. Jeigu select'as yra labai ilgas, su daug join'ų, union'ų ir …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/dinaminis-sql-uzklausos-where-salygu-keitimas/sql_geek.jpg"&gt;&lt;img alt="sql_geek" class="aligncenter wp-image-841" src="https://paulius.bautrenas.lt/images/dinaminis-sql-uzklausos-where-salygu-keitimas/sql_geek.jpg" style="width: 400px; height: 370px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Situacija dažnai sutinkama kasdieniniame darbe. Turim select'ą su daug where sąlygų. Vieną kartą select'ą tenka įvykdyti su vienomis sąlygomis, antrą kartą su kitomis, trečią - su visomis išskyrus vieną ir pan. Jeigu select'as trumpas, bėdos nėra: užkomentuojam nereikalingas eilutes ir tiek. Jeigu select'as yra labai ilgas, su daug join'ų, union'ų ir daug daug kintančių sąlygų, problema pasidaro gan rimta. Galima lengvai susipainioti ar kažką praleisti. Taip pat toks &amp;quot;užkomentavimo&amp;quot; metodas nelabai tinka automatiniam ataskaitų generavimui. Na bet pasirodo yra gan paprastas ir patogus where sąlygų įjungimo/išjungimo būdas.&lt;/p&gt;
&lt;p&gt;Apie viską iš pradžių. Tarkim, turim lentelę t, kurioje yra saugomi įrašai susidedantys iš &lt;em&gt;id&lt;/em&gt;, &lt;em&gt;date&lt;/em&gt; ir &lt;em&gt;type&lt;/em&gt; stulpelių:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  ID DT                  TYPE
&lt;span class="linenos"&gt; 2&lt;/span&gt;  -- ------------------- -----
&lt;span class="linenos"&gt; 3&lt;/span&gt;  1 2014-08-01 00:00:00 A
&lt;span class="linenos"&gt; 4&lt;/span&gt;  2 2014-08-01 01:00:00 B
&lt;span class="linenos"&gt; 5&lt;/span&gt;  3 2014-08-01 02:00:00 A
&lt;span class="linenos"&gt; 6&lt;/span&gt;  4 2014-08-01 03:00:00 B
&lt;span class="linenos"&gt; 7&lt;/span&gt;  5 2014-08-01 04:00:00 A
&lt;span class="linenos"&gt; 8&lt;/span&gt;  6 2014-08-01 05:00:00 B
&lt;span class="linenos"&gt; 9&lt;/span&gt;  7 2014-08-01 06:00:00 A
&lt;span class="linenos"&gt;10&lt;/span&gt;  8 2014-08-01 07:00:00 B
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pasibandymui (pav. ant &lt;a class="reference external" href="http://www.sqlfiddle.com"&gt;sqlfiddle.com&lt;/a&gt;) tokią lentelę galit pasigaminti taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;table&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;number&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;VARCHAR2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;CHAR&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;insert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;rownum&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rownum&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;when&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;mod&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rownum&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;then&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;B&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;CONNECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LEVEL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-05 00:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 00:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Įsivaizduokim situaciją, kad dažnai reikia paselectinti tam tikro laiko visų arba tik 'A' tipo duomenis. Kitaip sakant, dažnai tenka vykdyti arba vieną arba kitą selectą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 02:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 02:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Jeigu select'as trumpas, bėdos nėra. Jeigu ilgas ir sudėtingas - atsiranda šiokių tokių problemų. Gerai, kad &lt;a class="reference external" href="http://www.akadia.com/services/dyn_modify_where_clause.html"&gt;protingi žmonės&lt;/a&gt; sugalvojo genialiai paprastą sprendimą, išnaudojantį loginį ARBA (OR). Naudojantys &lt;a class="reference external" href="http://www.oracle.com/technetwork/developer-tools/sql-developer/"&gt;SQL Developer&lt;/a&gt;, galima šį metodą išsibandyti taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 02:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ignore_type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;OR&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Čia, trečiąją kodo eilutę papildžiau išmone &lt;strong&gt;1=:ignore_type&lt;/strong&gt;. Šią eitulę reiktų suprasti taip: jeigu parametrą &lt;strong&gt;ignore_type&lt;/strong&gt; nustatysime lygų vienam, sąlygą &lt;strong&gt;type = 'A'&lt;/strong&gt; bus ignoruojama. Jeigu nustatysime, kad &lt;strong&gt;ignore_type=0&lt;/strong&gt; į sąlygą &lt;strong&gt;type = 'A'&lt;/strong&gt; bus atsižvelgta.&lt;/p&gt;
&lt;p&gt;Kitaip sakant, parametro &lt;em&gt;ignore_type&lt;/em&gt; reikšmę nustatę 1 arba 0 selecto sąlygą vienu ar kitu atveju pakeisime taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 02:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;OR&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 02:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;OR&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;SQL kalboje išraiška 1=1 yra tolygi TRUE, o 1=0 yra lygi FALSE. O ką daro operatorius OR? Jis pasirenka arba vieną sąlygą arba kitą. Jeigu pirma sąlyga yra teisinga, antroji yra tiesiog ignoruojama. T. y. viršuje aprašyti selectai pavirsta tokiais:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 02:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 02:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Ir tai veikia!&lt;/strong&gt; Tiesiog mind blow:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/dinaminis-sql-uzklausos-where-salygu-keitimas/tim-and-eric-mind-blown.gif"&gt;&lt;img alt="tim-and-eric-mind-blown" class="size-full wp-image-857 alignleft" src="https://paulius.bautrenas.lt/images/dinaminis-sql-uzklausos-where-salygu-keitimas/tim-and-eric-mind-blown.gif" style="width: 315px; height: 210px;" /&gt;&lt;/a&gt;&lt;/p&gt;
</content><category term="Programavimas"></category><category term="clause"></category><category term="dynamic"></category><category term="dynamically changing the WHERE clause"></category><category term="oracle"></category><category term="salygu isjungimas"></category><category term="salygu keitimas"></category><category term="sql"></category><category term="where"></category></entry><entry><title>TARDIS modeliuko modifikacija</title><link href="https://paulius.bautrenas.lt/tardis.html" rel="alternate"></link><published>2015-07-01T14:01:00+03:00</published><updated>2015-07-01T14:01:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-07-01:/tardis.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8793.jpg"&gt;&lt;img alt="IMG_8793" class="aligncenter wp-image-799 size-medium" src="https://paulius.bautrenas.lt/images/tardis/IMG_8793-625.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Esu didelis &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Doctor_Who"&gt;Doctor Who&lt;/a&gt; gerbėjas. Nesu toks pamišęs, kaip &amp;quot;tikrieji&amp;quot; &lt;a class="reference external" href="http://www.urbandictionary.com/define.php?term=Whovian"&gt;Whovian&lt;/a&gt;'ai, kurie mintinai moka visus dialogus, atsimena senąsias serialo serijas, žino aktorių biografijas ir pan., bet net ir man ilgą laiką norėjosi turėti nors kokios Doctor Who atributikos. Iš ebay pirkti buvo brangu, o Lietuvoje serialų atributikos net su …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8793.jpg"&gt;&lt;img alt="IMG_8793" class="aligncenter wp-image-799 size-medium" src="https://paulius.bautrenas.lt/images/tardis/IMG_8793-625.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Esu didelis &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Doctor_Who"&gt;Doctor Who&lt;/a&gt; gerbėjas. Nesu toks pamišęs, kaip &amp;quot;tikrieji&amp;quot; &lt;a class="reference external" href="http://www.urbandictionary.com/define.php?term=Whovian"&gt;Whovian&lt;/a&gt;'ai, kurie mintinai moka visus dialogus, atsimena senąsias serialo serijas, žino aktorių biografijas ir pan., bet net ir man ilgą laiką norėjosi turėti nors kokios Doctor Who atributikos. Iš ebay pirkti buvo brangu, o Lietuvoje serialų atributikos net su žiburiu nesurasi, todėl ilgą laiką taip ir gyvenau svajodamas apie kokį nors menkniekį. 2014 m. pabaigoje svečiavausi Stoholme, kur visai netikėtai ir tuo labiau visai neplanuotai vienoje komiksų parduotuvėje užtikau Doctor Who kampelį. Tą kart spjoviau į visus suvalkietiško kraujo nuogąstavimus ir įsigijau TARDIS ir Dalek'o modeliukus. Dalek'u likau labai patenkintas, o vat TARDIS mano įgeidžių šiek tiek netenkino. Nors modelio kosmetinė išvaizda ir pagaminimo kokybė yra tiesiog ideali, tačiau TARDIS lemputę galima tik įjungti/išjungti, t. y. arba ji šviečia, arba ne, o ne pulsuoja, kaip turėtų. Na bet tai lengvai pataisoma..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8791.jpg"&gt;&lt;img alt="IMG_8791" class="aligncenter size-medium wp-image-798" src="https://paulius.bautrenas.lt/images/tardis/IMG_8791-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8797.jpg"&gt;&lt;img alt="IMG_8797" class="aligncenter size-medium wp-image-800" src="https://paulius.bautrenas.lt/images/tardis/IMG_8797-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip matyti iš nuotraukų viršuje, TARDIS modeliuko viduje nieko neįprasto: baltas šviesos diodas, CR1632 baterija ir jungiklis. Savaime supranta, norint kad šviesos diodas pulsuotų, reikia kažką papildomai prikonstruoti. Paprasčiausias variantas butų surinkti schemą su 555, kaip yra aprašyta &lt;a class="reference external" href="http://www.cemetech.net/forum/viewtopic.php?p=191885&amp;amp;sid=e581d9f744a9f2a438d9f4dd85d0c3e7#191885"&gt;čia&lt;/a&gt;, tačiau man norėjosi kažko įmantresnio. Nenorėjau, kad TARDIS lemputė pulsuotų visą laiką. Norėjau, kad įjungus maitinimą, TARDIS lemputė &amp;quot;papulsuotų&amp;quot; kelis kartus ir išsijungtų, o stuktelėjus TARDIS, lemputė vėl pradėtų pulsuoti. Taip gimė elementari schema su ATTiny85 (tokį turėjau):&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/tardis.png"&gt;&lt;img alt="tardis" class="aligncenter size-full wp-image-810" src="https://paulius.bautrenas.lt/images/tardis/tardis.png" style="width: 998px; height: 379px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Schemoje panaudotas vibracijos jutiklis &amp;quot;SW-18020P&amp;quot;, kurių tuziną už 1 eurą pirkau iš AliExpress. Jutiklio sandara yra pavaizduota nuotraukose apačioje. Jutiklis yra prijungtas prie mikrovaldiklio pertraukties INT0 išvado PB2.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8802.jpg"&gt;&lt;img alt="IMG_8802" class="aligncenter size-medium wp-image-801" src="https://paulius.bautrenas.lt/images/tardis/IMG_8802-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8804.jpg"&gt;&lt;img alt="IMG_8804" class="aligncenter size-medium wp-image-802" src="https://paulius.bautrenas.lt/images/tardis/IMG_8804-225x300.jpg" style="width: 225px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Schemą surinkau ant &amp;quot;oro&amp;quot; ir ant karštų klijų. Dėl viso pikto nusprendžiau palikti prilituotą ISP jungtį. Šis sprendimas išties pasiteisino, nes viską surinkus, teko mikrovaldiklio kodą dar šiek tiek patobulinti.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8808.jpg"&gt;&lt;img alt="IMG_8808" class="aligncenter size-medium wp-image-803" src="https://paulius.bautrenas.lt/images/tardis/IMG_8808-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tardis/IMG_8811.jpg"&gt;&lt;img alt="IMG_8811" class="aligncenter size-medium wp-image-804" src="https://paulius.bautrenas.lt/images/tardis/IMG_8811-300x225.jpg" style="width: 300px; height: 225px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Mikrovaldiklio programa gavosi irgi gan paprasta. Mikrovaldiklis, vos tik gavęs maitinimą, &lt;em&gt;tardis_count = 3&lt;/em&gt; kartus sužybsi šviesos diodu ir nueina į Power-down energijos taupymo režimą, kurio metu valgo tik ~0,1 μA srovės. Suveikus vibracijos jutikliui, mikrovaldiklis pabunda ir vėl nurodytą skaičių kartų sužybsi šviesos diodu. Po to ima vėl užmiega. Kodas gavosi štai toks:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/io.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;util/delay.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/interrupt.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/pgmspace.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;avr/sleep.h&amp;gt;&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;#define F_CPU 8000000UL&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;54&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;109&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;124&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;139&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;154&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;168&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;182&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;195&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;208&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;219&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;229&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;237&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;244&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;253&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis_count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;fade_in&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]));&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;OCR0B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;
&lt;span class="linenos"&gt;20&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;fade_out&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;21&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;&lt;span class="mi"&gt;-1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;22&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;OCR0B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tardis&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;23&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;24&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;25&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;26&lt;/span&gt;
&lt;span class="linenos"&gt;27&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;tardis_light&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;28&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;tardis_count&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;29&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;fade_in&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;30&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;31&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;fade_out&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;32&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;33&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;34&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;35&lt;/span&gt;
&lt;span class="linenos"&gt;36&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;go_to_sleep&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;37&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;38&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;set_sleep_mode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SLEEP_MODE_PWR_DOWN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;39&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sleep_enable&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;40&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sei&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;41&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sleep_cpu&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;42&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sleep_disable&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;43&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//sei();&lt;/span&gt;
&lt;span class="linenos"&gt;44&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;45&lt;/span&gt;
&lt;span class="linenos"&gt;46&lt;/span&gt;
&lt;span class="linenos"&gt;47&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ISR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;INT0_vect&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;48&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;49&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;tardis_light&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;50&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sei&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;51&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;_delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;52&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;go_to_sleep&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;53&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;54&lt;/span&gt;
&lt;span class="linenos"&gt;55&lt;/span&gt;
&lt;span class="linenos"&gt;56&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
&lt;span class="linenos"&gt;57&lt;/span&gt;
&lt;span class="linenos"&gt;58&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//Status LED&lt;/span&gt;
&lt;span class="linenos"&gt;59&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;DDRB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PB4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;60&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;PORTB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;61&lt;/span&gt;
&lt;span class="linenos"&gt;62&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//Main LED&lt;/span&gt;
&lt;span class="linenos"&gt;63&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;DDRB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PB1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// make OC0B PWM output pin&lt;/span&gt;
&lt;span class="linenos"&gt;64&lt;/span&gt;
&lt;span class="linenos"&gt;65&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//PWM&lt;/span&gt;
&lt;span class="linenos"&gt;66&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;TCCR0A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;COM0B1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;WGM00&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// mode #1&lt;/span&gt;
&lt;span class="linenos"&gt;67&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;TCCR0B&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;CS00&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// clkI/O/(No prescaling)&lt;/span&gt;
&lt;span class="linenos"&gt;68&lt;/span&gt;
&lt;span class="linenos"&gt;69&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//INT0 enable:&lt;/span&gt;
&lt;span class="linenos"&gt;70&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;MCUCR&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ISC01&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ISC00&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;71&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;GIMSK&lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;INT0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;72&lt;/span&gt;
&lt;span class="linenos"&gt;73&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//PB2 as input for INT0&lt;/span&gt;
&lt;span class="linenos"&gt;74&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;DDRB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=~&lt;/span&gt;&lt;span class="n"&gt;_BV&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PB2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;75&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;PORTB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PB2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;76&lt;/span&gt;
&lt;span class="linenos"&gt;77&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;sei&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;78&lt;/span&gt;
&lt;span class="linenos"&gt;79&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="c1"&gt;//Disable ADC, saves ~230uA&lt;/span&gt;
&lt;span class="linenos"&gt;80&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;ADCSRA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ADEN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;81&lt;/span&gt;
&lt;span class="linenos"&gt;82&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;tardis_light&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;83&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;go_to_sleep&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;84&lt;/span&gt;
&lt;span class="linenos"&gt;85&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;){}&lt;/span&gt;
&lt;span class="linenos"&gt;86&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Viso šito reikalo rezultatas gavosi štai toks:&lt;/p&gt;
&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/132202537" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;p&gt;Elektrinę principinę schemą eagle formatu bei AVR Studio 4 projekto failus rasite mano &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/TARDIS"&gt;GitHub'e&lt;/a&gt;.&lt;/p&gt;
</content><category term="Elektronika"></category><category term="Atmel"></category><category term="attiny85"></category><category term="AVR"></category><category term="Doctor Who"></category><category term="TARDIS"></category><category term="Tardis light"></category><category term="tardis pulsing LED"></category></entry><entry><title>Flip-Dot Clock laiko sinchronizavimas su Aviete per Bluetooth</title><link href="https://paulius.bautrenas.lt/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth.html" rel="alternate"></link><published>2015-04-29T14:20:00+03:00</published><updated>2015-04-29T14:20:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-04-29:/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flip-dot-clock-synch.png"&gt;&lt;img alt="flip-dot clock synch" class="aligncenter size-full wp-image-752" src="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flip-dot-clock-synch.png" style="width: 571px; height: 264px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Persukdamas savo &lt;a class="reference external" href="flip-dot-clock"&gt;elektromechaninį laikrodį&lt;/a&gt; į vasaros laiką, pastebėjau, kad laikrodis skuba daugiau nei viena minute. Kadangi laikrodis surinktas kreivai - šleivai, gali būti, kad RTC veikimą įtakoja kokia nors elektromagnetinė interferencija ar pan. Per daug į tai gilintis patingėjau, nes prisiminiau, kad prie laikrodžio kaip tyčia yra prijungtas&amp;nbsp;&lt;a class="reference external" href="http://paulius.bautrenas.lt/blog/?p=493"&gt;HC05 BlueTooth moduliukas …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flip-dot-clock-synch.png"&gt;&lt;img alt="flip-dot clock synch" class="aligncenter size-full wp-image-752" src="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flip-dot-clock-synch.png" style="width: 571px; height: 264px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Persukdamas savo &lt;a class="reference external" href="flip-dot-clock"&gt;elektromechaninį laikrodį&lt;/a&gt; į vasaros laiką, pastebėjau, kad laikrodis skuba daugiau nei viena minute. Kadangi laikrodis surinktas kreivai - šleivai, gali būti, kad RTC veikimą įtakoja kokia nors elektromagnetinė interferencija ar pan. Per daug į tai gilintis patingėjau, nes prisiminiau, kad prie laikrodžio kaip tyčia yra prijungtas&amp;nbsp;&lt;a class="reference external" href="http://paulius.bautrenas.lt/blog/?p=493"&gt;HC05 BlueTooth moduliukas&lt;/a&gt;, kuris leidžia laikrodžio laiką atnaujinti nuotoliu būdu, o tai yra puiki galimybė laiko neatitikimą nuo realybės išspręsti reguliaria laiko sinchronizacija su RPI, kuri savo ruožtu laiką gauna iš NTP serverio.&lt;/p&gt;
&lt;div class="section" id="pasiruosimas"&gt;
&lt;h2&gt;Pasiruošimas&lt;/h2&gt;
&lt;p&gt;Įkišam USB Bluetooth adapterį į RPI ir terminale įvykdome šias komandas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;update
sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;bluetooth&lt;span class="w"&gt; &lt;/span&gt;bluez-utils&lt;span class="w"&gt; &lt;/span&gt;blueman
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Įvykdytos komandos sudiegs visą bendravimui su bluetooth adapteriu reikalingą programinę įrangą. Norint įsitikinti, kad bluetooth modulis susidiegė teisingai, galima įvykdyti šią komandą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;hciconfig
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Turėtume pamatyti kažką panašaus į:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/hciconfig.png"&gt;&lt;img alt="hciconfig" class="aligncenter size-full wp-image-764" src="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/hciconfig.png" style="width: 621px; height: 111px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Įsitikinti, ar bluetooth veikia galima ir taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;/etc/init.d/bluetooth&lt;span class="w"&gt; &lt;/span&gt;status
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Beje, tokiu pat būdu, iškilus poreikiui, galima sustabdyti, paleisti ir perkrauti bluetooth komunikatorių. Tam komandoje žodį &amp;quot;&lt;em&gt;status&lt;/em&gt;&amp;quot;, atitinkamai, reiktų keisti &amp;quot;s&lt;em&gt;tart&amp;quot;&lt;/em&gt;, &amp;quot;&lt;em&gt;stop&amp;quot;&lt;/em&gt;, &amp;quot;&lt;em&gt;restart&amp;quot;&lt;/em&gt;&amp;nbsp;ar &amp;quot;&lt;em&gt;force-reload&lt;/em&gt;&amp;quot;.&lt;/p&gt;
&lt;p&gt;Jeigu bluetooth modulis veikia tvarkingai, galima susirasti aplinkinius įrenginius su komanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;hcitool&lt;span class="w"&gt; &lt;/span&gt;scan
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/hcitool_scan.png"&gt;&lt;img alt="hcitool_scan" class="aligncenter size-full wp-image-766" src="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/hcitool_scan.png" style="width: 474px; height: 82px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Įrenginių sąraše turėtų matytis mus dominantis įrenginys. Norint su juo bendrauti, bluetooth įrenginius reikia suporuoti (angl. &lt;em&gt;pair&lt;/em&gt;) su komanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;bluez-simple-agent&lt;span class="w"&gt; &lt;/span&gt;hci0&lt;span class="w"&gt; &lt;/span&gt;xx:xx:xx:xx:xx:xx
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Savaime suprantama, vietoje &lt;em&gt;xx:xx:xx:xx:xx:xx&lt;/em&gt;&amp;nbsp;reiktų nurodyti savo pasirinkto bluetooth įrenginio MAC adresą. Įvykdžius komandą bei teisingai įvedus įrenginio slaptažodį (PIN kodą), įrenginiai turėtų susiporuoti ir būti pasiruošę tiesioginiam bendravimui. Norint su įrenginiu bendrauti nuosekliuoju protokolu (USART), reikia suderinti&amp;nbsp;RFCOMM protokolo nustatymus:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;nano&lt;span class="w"&gt; &lt;/span&gt;/etc/bluetooth/rfcomm.conf
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Faile reikia paredaguoti šias eilutes, įrašant į atitinkamą vietą savo pasirinkto bluetooth įrenginio MAC adresą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;rfcomm1&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nb"&gt;bind&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;yes&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;device&lt;span class="w"&gt; &lt;/span&gt;xx:xx:xx:xx:xx:xx&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;channel&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;comment&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Connection to Bluetooth serial module&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Išsaugojus failą, įvykdome komandą, kuri sukurs virtualų nuoseklųjį prievadą (angl. &lt;em&gt;serial port&lt;/em&gt;) &lt;strong&gt;/dev/rfcomm1&lt;/strong&gt;, per kurį bus galima bendrauti su pasirinktu įrenginiu, mano atveju su &lt;a class="reference external" href="flip-dot-clock"&gt;flip-dot laikrodžiu&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;rfcomm&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;bind&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;all
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pasiruošimas kaip ir baigtas, liko tik susidiegti &lt;a class="reference external" href="https://github.com/pyserial/pyserial"&gt;pySerial&lt;/a&gt; biblioteką, kuri leis siųsti ir priimti duomenis nuosekliuoju prievadu.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;python-serial
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="python-skriptas"&gt;
&lt;h2&gt;Python skriptas&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flip-dot_synch.png"&gt;&lt;img alt="flip-dot_synch" class="aligncenter size-large wp-image-754" src="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flip-dot_synch-1024x426.png" style="width: 625px; height: 260px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Po ilgų išieškojimų gavosi štai toks nepadoriai ilgas python skriptas (veikimo diagrama viršuje), kurio naujausią versiją rasite &lt;a class="reference external" href="https://github.com/pauliusbau/raspberrypi-mayhem/tree/master/RPI-bluetoothTimeSynch"&gt;mano GitHub saugykloje&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Skirptas gavosi toks ilgas todėl, kad jis &lt;a class="reference external" href="flip-dot-clock"&gt;laikrodžio&lt;/a&gt; laiką ir datą atnaujina ne aklai, tačiau tik tada, kai to reikia, t. y. kai laikrodžio laikas nesutampa su RPI laiku per&amp;nbsp;&lt;em&gt;max_seconds_diff = 20&lt;/em&gt; sekundžių. Tam teko realizuoti aibę visokių papildomų patikrinimų ir apsaugų nuo timeout'ų ir blogo suveikimo. Taip pat skripte realizavau ir logo rašymą į failą &lt;em&gt;flip-dot_synch.log&lt;/em&gt;, kuris&amp;nbsp;labai praverčia skriptą leidžiant cron priemonėmis:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;,4&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;/home/python/flip-dot_synch.py&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Beje, sukurtus logus terminale patogu skaityti su komanda &amp;quot;tail&amp;quot;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tail&lt;span class="w"&gt; &lt;/span&gt;/home/python/flip-dot_synch.log
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flipdot_synch_log.png"&gt;&lt;img alt="flipdot_synch_log" class="aligncenter size-full wp-image-773" src="https://paulius.bautrenas.lt/images/flip-dot-clock-laiko-sinchronizavimas-su-aviete-per-bluetooth/flipdot_synch_log.png" style="width: 675px; height: 408px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="naudinga-literatura"&gt;
&lt;h2&gt;Naudinga literatūra:&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.uugear.com/portfolio/bluetooth-communication-between-raspberry-pi-and-arduino/"&gt;http://www.uugear.com/portfolio/bluetooth-communication-between-raspberry-pi-and-arduino/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.modmypi.com/blog/installing-the-raspberry-pi-nano-bluetooth-dongle"&gt;http://www.modmypi.com/blog/installing-the-raspberry-pi-nano-bluetooth-dongle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://blog.davidvassallo.me/2014/05/11/android-linux-raspberry-pi-bluetooth-communication/"&gt;http://blog.davidvassallo.me/2014/05/11/android-linux-raspberry-pi-bluetooth-communication/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/19908167/reading-serial-data-in-realtime-in-python"&gt;http://stackoverflow.com/questions/19908167/reading-serial-data-in-realtime-in-python&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.roman10.net/serial-port-communication-in-python/#comments"&gt;http://www.roman10.net/serial-port-communication-in-python/#comments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.regexr.com"&gt;http://www.regexr.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://regex101.com/#python"&gt;https://regex101.com/#python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="Programavimas"></category><category term="bluetooth"></category><category term="clock"></category><category term="date"></category><category term="flip-dot"></category><category term="Python"></category><category term="python serial"></category><category term="RaspberriPi"></category><category term="regexp"></category><category term="RPI"></category><category term="synch"></category><category term="synchronization"></category><category term="time"></category></entry><entry><title>Avietė: DHT22 duomenų atvaizdavimas</title><link href="https://paulius.bautrenas.lt/aviete-highcharts.html" rel="alternate"></link><published>2015-03-15T12:58:00+02:00</published><updated>2015-03-15T12:58:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-03-15:/aviete-highcharts.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-highcharts/highcarts1.png"&gt;&lt;img alt="highcarts" class="aligncenter size-large wp-image-712" src="https://paulius.bautrenas.lt/images/aviete-highcharts/highcarts1-1024x367.png" style="width: 625px; height: 224px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip jau rašiau &lt;a class="reference external" href="aviete-dht22-mysql"&gt;ankščiau&lt;/a&gt;, prie savo RaspberryPi esu prisijungęs porą termometrų/higrometrų, kurių duomenis kas tam tikrą laiką saugau MySQL duomenų bazėje. Kaip man ir nepatiktų rašyti SQL užklausas, vis tiek norėtųsi namų &amp;quot;meteo stotelės&amp;quot; duomenis matyti gražiu, suprantamu, grafiniu formatu. Taip pat būtų visai smagu turėti galimybė pasiekti tuos …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-highcharts/highcarts1.png"&gt;&lt;img alt="highcarts" class="aligncenter size-large wp-image-712" src="https://paulius.bautrenas.lt/images/aviete-highcharts/highcarts1-1024x367.png" style="width: 625px; height: 224px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip jau rašiau &lt;a class="reference external" href="aviete-dht22-mysql"&gt;ankščiau&lt;/a&gt;, prie savo RaspberryPi esu prisijungęs porą termometrų/higrometrų, kurių duomenis kas tam tikrą laiką saugau MySQL duomenų bazėje. Kaip man ir nepatiktų rašyti SQL užklausas, vis tiek norėtųsi namų &amp;quot;meteo stotelės&amp;quot; duomenis matyti gražiu, suprantamu, grafiniu formatu. Taip pat būtų visai smagu turėti galimybė pasiekti tuos duomenis iš bet kurios pasaulio vietos internetu. Žodžiu, prisižiūrėjęs pavyzdžių internete, nusprendžiau surinktus duomenis atvaizduoti internetinėje naršyklėje grafiku, skalėmis ir tekstu.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-highcharts/phpmysql.gif"&gt;&lt;img alt="phpmysql" class="aligncenter size-full wp-image-718" src="https://paulius.bautrenas.lt/images/aviete-highcharts/phpmysql.gif" style="width: 431px; height: 179px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Visa duomenų atvaizdavimo sistema susideda iš vidinės (angl. &lt;em&gt;back-end&lt;/em&gt;) ir išorinės (angl. &lt;em&gt;front-end&lt;/em&gt;) dalių. Vidinė dalis - tai MySQL duomenų bazė ir spec. PHP skriptas, pagal tam tikrus kriterijus iš DB ištraukiantis duomenis ir gražinantis juos jSON formatu. Išorinė dalis - web puslapiai, vienokiu ar kitokiu būdu atvaizduojantys back-end'o sugeneruotus duomenis.&lt;/p&gt;
&lt;div class="section" id="back-end"&gt;
&lt;h2&gt;Back End&lt;/h2&gt;
&lt;p&gt;Kadangi iki šiol realios web programavimo patirties kaip ir neturėjau, nusprendžiau viską daryti kuo paprasčiau, t. y. neišradinėti dviračio ir naudoti tik gerai internete aprašytus sprendimus. Užbėgdamas už akių prasitarsiu, kad grafiniam duomenų atvaizdavimui pasirinkau &lt;a class="reference external" href="http://www.highcharts.com"&gt;HighCharts&lt;/a&gt; grafikus. HighCharts labai gerai draugauja su &lt;a class="reference external" href="http://blueflame-software.com/blog/how-to-create-dynamic-x-axis-data-using-json"&gt;jSON&lt;/a&gt;, todėl būtent šis pasirinkimas ir lėmė back-end gražinamų duomenų struktūrą.&lt;/p&gt;
&lt;p&gt;Po ilgo knibinėjimosi, gavosi štai toks &lt;em&gt;data.php&lt;/em&gt; skriptas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="x"&gt;   &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;   &lt;span class="nv"&gt;$servername&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;localhost&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;   &lt;span class="nv"&gt;$username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;USERNAME&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;   &lt;span class="nv"&gt;$password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;PASSWORD&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;   &lt;span class="nv"&gt;$dbname&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;warehouse&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;   &lt;span class="nv"&gt;$con&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;mysql_connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$servername&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nv"&gt;$username&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nv"&gt;$password&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nv"&gt;$con&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;     &lt;span class="k"&gt;die&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Could not connect: &amp;#39;&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="nb"&gt;mysql_error&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;   &lt;span class="nb"&gt;mysql_select_db&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$dbname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$con&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;14&lt;/span&gt;   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;isset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$_GET&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;getLast&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;15&lt;/span&gt;       &lt;span class="nv"&gt;$sth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;mysql_query&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;select&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="s2"&gt;                           UNIX_TIMESTAMP(date_format(d.d_actualdate, &amp;#39;%Y-%m-%d %H:%i&amp;#39;))*1000 as d_actualdate&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;&lt;span class="s2"&gt;                           ,d.D_Temperature_1 d_temperature_1&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;&lt;span class="s2"&gt;                           ,d.D_Humidity_1 d_humidity_1&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;&lt;span class="s2"&gt;                           ,d.D_Temperature_2 d_temperature_2&lt;/span&gt;
&lt;span class="linenos"&gt;20&lt;/span&gt;&lt;span class="s2"&gt;                           ,d.D_Humidity_2 d_humidity_2&lt;/span&gt;
&lt;span class="linenos"&gt;21&lt;/span&gt;&lt;span class="s2"&gt;                           ,d.D_Temperature_3 d_temperature_3&lt;/span&gt;
&lt;span class="linenos"&gt;22&lt;/span&gt;&lt;span class="s2"&gt;                           from warehouse.duomenys d&lt;/span&gt;
&lt;span class="linenos"&gt;23&lt;/span&gt;&lt;span class="s2"&gt;                           where d.D_ActualDate &amp;gt;= DATE_SUB(NOW(), INTERVAL 1 HOUR)&lt;/span&gt;
&lt;span class="linenos"&gt;24&lt;/span&gt;&lt;span class="s2"&gt;                           order by 1 desc&lt;/span&gt;
&lt;span class="linenos"&gt;25&lt;/span&gt;&lt;span class="s2"&gt;                           limit 1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;26&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt;27&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;28&lt;/span&gt;   &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;isset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$_GET&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dateMin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="nv"&gt;$_GET&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dateMax&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;29&lt;/span&gt;           &lt;span class="nv"&gt;$sth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;mysql_query&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt;30&lt;/span&gt;&lt;span class="s2"&gt;                               UNIX_TIMESTAMP(date_format(date_add(d.d_actualdate, INTERVAL 2 HOUR), &amp;#39;%Y-%m-%d %H:%i&amp;#39;))*1000 as d_actualdate&lt;/span&gt;
&lt;span class="linenos"&gt;31&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_temperature_1,1) as d_temperature_1&lt;/span&gt;
&lt;span class="linenos"&gt;32&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_temperature_2,1) as d_temperature_2&lt;/span&gt;
&lt;span class="linenos"&gt;33&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_humidity_1,1) as d_humidity_1&lt;/span&gt;
&lt;span class="linenos"&gt;34&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_humidity_2,1) as d_humidity_2&lt;/span&gt;
&lt;span class="linenos"&gt;35&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_temperature_3,1) as d_temperature_3&lt;/span&gt;
&lt;span class="linenos"&gt;36&lt;/span&gt;&lt;span class="s2"&gt;                               from warehouse.duomenys d&lt;/span&gt;
&lt;span class="linenos"&gt;37&lt;/span&gt;&lt;span class="s2"&gt;                               where d.d_actualdate &amp;gt;= &amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nv"&gt;$_GET&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dateMin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;38&lt;/span&gt;&lt;span class="s2"&gt;                               and d.d_actualdate &amp;lt;= &amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nv"&gt;$_GET&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dateMax&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;39&lt;/span&gt;&lt;span class="s2"&gt;                               order by d.d_actualdate&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="hll"&gt;&lt;span class="linenos"&gt;40&lt;/span&gt;       &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class="linenos"&gt;41&lt;/span&gt;
&lt;span class="linenos"&gt;42&lt;/span&gt;                               &lt;span class="nv"&gt;$sth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;mysql_query&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt;43&lt;/span&gt;&lt;span class="s2"&gt;                               UNIX_TIMESTAMP(date_format(date_add(d.d_actualdate, INTERVAL 2 HOUR), &amp;#39;%Y-%m-%d %H:00&amp;#39;))*1000 as d_actualdate&lt;/span&gt;
&lt;span class="linenos"&gt;44&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(avg(d.d_temperature_1),1) as d_temperature_1&lt;/span&gt;
&lt;span class="linenos"&gt;45&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(avg(d.d_temperature_2),1) as d_temperature_2&lt;/span&gt;
&lt;span class="linenos"&gt;46&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(avg(d.d_humidity_1),1) as d_humidity_1&lt;/span&gt;
&lt;span class="linenos"&gt;47&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(avg(d.d_humidity_2),1) as d_humidity_2&lt;/span&gt;
&lt;span class="linenos"&gt;48&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(avg(d.d_temperature_3),1) as d_temperature_3&lt;/span&gt;
&lt;span class="linenos"&gt;49&lt;/span&gt;&lt;span class="s2"&gt;                               from warehouse.duomenys d&lt;/span&gt;
&lt;span class="linenos"&gt;50&lt;/span&gt;&lt;span class="s2"&gt;                               where d.d_actualdate &amp;gt;= DATE_SUB(date(NOW()), INTERVAL 1 WEEK)&lt;/span&gt;
&lt;span class="linenos"&gt;51&lt;/span&gt;&lt;span class="s2"&gt;                               and d.d_actualdate &amp;lt; DATE_SUB(date(NOW()), INTERVAL 1 DAY)&lt;/span&gt;
&lt;span class="linenos"&gt;52&lt;/span&gt;&lt;span class="s2"&gt;                               group by date_format(d.d_actualdate, &amp;#39;%Y-%m-%d %H&amp;#39;)&lt;/span&gt;
&lt;span class="linenos"&gt;53&lt;/span&gt;
&lt;span class="linenos"&gt;54&lt;/span&gt;&lt;span class="s2"&gt;                               UNION&lt;/span&gt;
&lt;span class="linenos"&gt;55&lt;/span&gt;
&lt;span class="linenos"&gt;56&lt;/span&gt;&lt;span class="s2"&gt;                               SELECT&lt;/span&gt;
&lt;span class="linenos"&gt;57&lt;/span&gt;&lt;span class="s2"&gt;                               UNIX_TIMESTAMP(date_format(date_add(d.d_actualdate, INTERVAL 2 HOUR), &amp;#39;%Y-%m-%d %H:%i&amp;#39;))*1000 as d_actualdate&lt;/span&gt;
&lt;span class="linenos"&gt;58&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_temperature_1,1) as d_temperature_1&lt;/span&gt;
&lt;span class="linenos"&gt;59&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_temperature_2,1) as d_temperature_2&lt;/span&gt;
&lt;span class="linenos"&gt;60&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_humidity_1,1) as d_humidity_1&lt;/span&gt;
&lt;span class="linenos"&gt;61&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_humidity_2,1) as d_humidity_2&lt;/span&gt;
&lt;span class="linenos"&gt;62&lt;/span&gt;&lt;span class="s2"&gt;                               ,round(d.d_temperature_3,1) as d_temperature_3&lt;/span&gt;
&lt;span class="linenos"&gt;63&lt;/span&gt;&lt;span class="s2"&gt;                               from warehouse.duomenys d&lt;/span&gt;
&lt;span class="linenos"&gt;64&lt;/span&gt;&lt;span class="s2"&gt;                               where d.d_actualdate &amp;gt;= DATE_SUB(date(NOW()), INTERVAL                             1 DAY)&lt;/span&gt;
&lt;span class="linenos"&gt;65&lt;/span&gt;
&lt;span class="linenos"&gt;66&lt;/span&gt;&lt;span class="s2"&gt;                               order by 1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;67&lt;/span&gt;       &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;68&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;69&lt;/span&gt;
&lt;span class="linenos"&gt;70&lt;/span&gt;   &lt;span class="nv"&gt;$return_arr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;array&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;71&lt;/span&gt;
&lt;span class="linenos"&gt;72&lt;/span&gt;   &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;mysql_fetch_array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$sth&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt;73&lt;/span&gt;
&lt;span class="linenos"&gt;74&lt;/span&gt;   &lt;span class="nv"&gt;$rows&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;at&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;d_actualdate&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;75&lt;/span&gt;       &lt;span class="nv"&gt;$rows&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;T1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;d_temperature_1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;76&lt;/span&gt;       &lt;span class="nv"&gt;$rows&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;T2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;d_temperature_2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;77&lt;/span&gt;       &lt;span class="nv"&gt;$rows&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;H1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;d_humidity_1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;78&lt;/span&gt;       &lt;span class="nv"&gt;$rows&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;H2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;d_humidity_2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;79&lt;/span&gt;       &lt;span class="nv"&gt;$rows&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;T3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;d_temperature_3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="linenos"&gt;80&lt;/span&gt;
&lt;span class="linenos"&gt;81&lt;/span&gt;   &lt;span class="nb"&gt;array_push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$return_arr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nv"&gt;$rows&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;82&lt;/span&gt;   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;83&lt;/span&gt;
&lt;span class="linenos"&gt;84&lt;/span&gt;   &lt;span class="nv"&gt;$data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;datapoints&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nv"&gt;$return_arr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;85&lt;/span&gt;
&lt;span class="linenos"&gt;86&lt;/span&gt;   &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="nb"&gt;json_encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;JSON_NUMERIC_CHECK&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;87&lt;/span&gt;
&lt;span class="linenos"&gt;88&lt;/span&gt;   &lt;span class="nb"&gt;mysql_close&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$con&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;89&lt;/span&gt;   &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Į skriptą galima kreiptis trimis skirtingais būdais (paryškinimai kode):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;data.php\?getLast - gražina paskutinės duomenų surinkimo iteracijos reikšmes.&lt;/li&gt;
&lt;li&gt;data.php\?dateMin=2015-03-03&amp;amp;dateMax=2015-03-04 - gražina visus nurodytos datos intervalo duomenis.&lt;/li&gt;
&lt;li&gt;data.php - gražina paskutinių 7 dienų duomenis. Čia, tvarkingam duomenų atvaizdavimui, yra realizuotas šioks toks duomenų agregavimas. T. y. pirmų 6 dienų duomenys yra pateikiami valandos vidurkiais, o paskutinės dienos - visi duomenys (neagreguoti).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Visais atvejais, duomenys yra gražinami jSON'u, kurios struktūros pavyzdys yra pateiktas dešinėje. Duomenys yra gražinami &amp;quot;&lt;em&gt;datapoints&lt;/em&gt;&amp;quot; masyve. Kiekviename iš masyvo elementų yra pateikiama duomenų data &amp;quot;&lt;em&gt;at&lt;/em&gt;&amp;quot; &lt;a class="reference external" href="http://www.w3schools.com/jsref/jsref_gettime.asp"&gt;JavaScript TimeStamp&lt;/a&gt; formatu ir konkrečios iteracijos jutiklių duomenys.&lt;/p&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Duomenų surinkimo laiką specialiai gražinu js timestamp formatu, nes tik tokį laiko ir datos formatą supranta HighCharts grafikas, kitais atvejais (datą gražinant perskaitomu formatu, pav. 2015-03-02 15:32), HighCharts tai interpretuoja kaip kategorijos tekstą ir dalis šaunių HighCharts funkcijų tiesiog nebeveikia.&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-highcharts/jSON.jpg"&gt;&lt;img alt="jSON" class="aligncenter wp-image-729 size-full" src="https://paulius.bautrenas.lt/images/aviete-highcharts/jSON.jpg" style="width: 249px; height: 540px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="front-end"&gt;
&lt;h2&gt;Front End&lt;/h2&gt;
&lt;div class="section" id="grafikas"&gt;
&lt;h3&gt;Grafikas&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-highcharts/highcarts1.png"&gt;&lt;img alt="highcarts" class="aligncenter size-large wp-image-712" src="https://paulius.bautrenas.lt/images/aviete-highcharts/highcarts1-1024x367.png" style="width: 625px; height: 224px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip jau minėjau ankščiau, grafikui naudoju &lt;a class="reference external" href="http://www.highcharts.com"&gt;HighCharts&lt;/a&gt;. Ties HighCharts apsistojau dėl &lt;a class="reference external" href="http://api.highcharts.com/highcharts"&gt;labai geros dokumentacijos&lt;/a&gt;, galybės &lt;a class="reference external" href="http://www.highcharts.com/docs/chart-and-series-types/line-chart"&gt;pavyzdžių&lt;/a&gt; ir paprasto, interaktyvaus valdymo.&lt;/p&gt;
&lt;p&gt;Grafiko kodas gavosi labai ilgas iš principo dėl to, kad pagal savo poreikius keičiau daug standartinių HighCharts nustatymų ir papildomai priprogramavau keletą funkcijų: suprogramavau grafike atvaizduojamų duomenų laiko rėžio nustatymą per jQuaryUI (&lt;em&gt;by default&lt;/em&gt; grafikas užsikrauna paskutinių 7 dienų duomenis), pridėjau šviesaus paros laiko (saulėtekis - saulėlydis) atvaizdavimą, kurį radau &lt;a class="reference external" href="http://blog.tafkas.net/2012/11/26/charting-sunrise-and-sunset-in-highcharts/"&gt;čia&lt;/a&gt;, ir nustačiau automatini grafiko duomenų atnaujinimą.&lt;/p&gt;
&lt;p&gt;Dalį grafiko kodo galite rasti mano &lt;a class="reference external" href="http://jsfiddle.net/pauliusbau/3e9cwxcr/4/"&gt;JSFiddle&lt;/a&gt;, o visą grafiko kodą rasite &lt;a class="reference external" href="#download"&gt;atsisiuntimuose&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="skales-ir-tekstas"&gt;
&lt;h3&gt;Skalės ir Tekstas&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-highcharts/gauges.png"&gt;&lt;img alt="gauges" class="aligncenter size-large wp-image-734" src="https://paulius.bautrenas.lt/images/aviete-highcharts/gauges-577x1024.png" style="width: 249px; height: 442px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-highcharts/text.png"&gt;&lt;img alt="text" class="aligncenter size-large wp-image-735" src="https://paulius.bautrenas.lt/images/aviete-highcharts/text-577x1024.png" style="width: 249px; height: 442px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nors grafikas ir yra labai patogus įrankis,&amp;nbsp; tačiau juo gan sunku naudotis mobiliajame telefone. Iš principo, po ilgesnio naudojimosi, supratau, kad apskritai telefone mane labiau domina išvysti paskutinius, aktualius duomenis, o ne visos savaitės grafiką. Taip gimė dar pora puslapiukų, kuriuose atvaizduojama tik paskutinė informacija.&lt;/p&gt;
&lt;p&gt;Pirmiausiai, pagaminau puslapiuką (&lt;a class="reference external" href="https://paulius.bautrenas.lt/images/aviete-highcharts/gauges.png"&gt;gauges.php&lt;/a&gt;), kuriame DHT22 duomenys atvaizduojami skalėmis. Skalės sugeneruotos su &lt;a class="reference external" href="http://www.highcharts.com/demo/gauge-speedometer"&gt;HighCharts&lt;/a&gt;, duomenys į skales yra perduodami jSON'u, panaudojant &lt;em&gt;data.php\?getLast&lt;/em&gt; metodą.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;getGaugeConfig&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;renderID&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;data_temp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;data_hum&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;config&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{};&lt;/span&gt;
&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;//.....//&lt;/span&gt;
&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;config&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt;5&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;title&lt;/span&gt;
&lt;span class="linenos"&gt;6&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="linenos"&gt;7&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;//.....//&lt;/span&gt;
&lt;span class="linenos"&gt;8&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;config&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;9&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Šioje vietoje, manau, įdomiausia yra tai, kad tas pats skalių configas yra panaudotas dviem skirtingom skalėms atvaizduoti. Tai atlikau, sukūręs funkciją &lt;em&gt;getGaugeConfig&lt;/em&gt;, per kurios argumentus į skalių configą perduodu reikiamus parametrus. Viršuje, pateiktas tik mažulytis funkcijos fragmentas, visą kodą rasite &lt;a class="reference external" href="#download"&gt;atsisiuntimuose&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Po ilgesnio naudojimosi &amp;quot;skalių puslapiu&amp;quot;, pastebėjau, kad labiau žiūriu ne į rodykles, bet į skaičius po jomis. Taip kilo idėja padaryti mažą paprastą puslapį, kuriame aktualūs duomenys būtų išvedami tiesiog tekstu (&lt;a class="reference external" href="https://paulius.bautrenas.lt/images/aviete-highcharts/text.png"&gt;nuotrauka viršuje&lt;/a&gt;). Ant greitųjų &amp;quot;sumečiau&amp;quot; &lt;em&gt;now.php&lt;/em&gt;, kurio išeities kodą rasite &lt;a class="reference external" href="#download"&gt;atsisiuntimuose&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Puslapis gavosi idiotiškai paprastas, bet žavus. Su &amp;quot;&lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag"&gt;viewport&lt;/a&gt;&amp;quot; nustatymais&amp;nbsp; ir šiek tiek &lt;a class="reference external" href="http://getbootstrap.com/"&gt;bootstrap&lt;/a&gt; jį pritaikiau savo telefono ekranui. Duomenis puslapiui paruošiu tuo pačiu &lt;em&gt;data.php**&lt;/em&gt;?getLast**, o iškoduotą jSON atvaizduoju su paprasčiausiu &lt;a class="reference external" href="http://www.w3schools.com/jsref/prop_html_innerhtml.asp"&gt;innerHTML&lt;/a&gt;. Tiesa, duomenų surinkimo laiką puslapyje formatavau su &lt;a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleFormat"&gt;toLocaleFormat&lt;/a&gt;. Sunku patikėti, bet šios patogios funkcijos Chrome nepalaiko :/ Gerai, kad radau &lt;a class="reference external" href="http://javascript.ru/Date/toLocaleFormat#comment-16083"&gt;internete&lt;/a&gt;, kaip alternatyvią funkciją realizuoti pačiam:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nb"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;prototype&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;FormatDate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;format&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;f&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getYear&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1900&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nx"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getMonth&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nx"&gt;d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getDate&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="nx"&gt;H&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getHours&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="nx"&gt;M&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getMinutes&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="nx"&gt;S&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getSeconds&lt;/span&gt;&lt;span class="p"&gt;()}&lt;/span&gt;
&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;k&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nx"&gt;format&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;format&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;f&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;10&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;f&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;f&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;span class="linenos"&gt;5&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;format&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;6&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="atsisiuntimai"&gt;
&lt;span id="download"&gt;&lt;/span&gt;&lt;h2&gt;Atsisiuntimai&lt;/h2&gt;
&lt;p&gt;Visus aukščiau aprašytus skriptus rasite &lt;a class="reference external" href="https://github.com/pauliusbau/raspberrypi-mayhem/tree/master/RPI-Weather"&gt;mano GitHub saugykloje&lt;/a&gt;!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="naudinga-literatura"&gt;
&lt;h2&gt;Naudinga literatūra:&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://blueflame-software.com/blog/using-highcharts-with-php-and-mysql"&gt;http://blueflame-software.com/blog/using-highcharts-with-php-and-mysql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://blueflame-software.com/blog/how-to-create-dynamic-x-axis-data-using-json"&gt;http://blueflame-software.com/blog/how-to-create-dynamic-x-axis-data-using-json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://blueflame-software.com/blog/how-to-load-mysql-results-to-highcharts-using-json"&gt;http://blueflame-software.com/blog/how-to-load-mysql-results-to-highcharts-using-json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.kliptu.com/free-script/dynamic-highchart-example-with-jquery-php-json"&gt;http://www.kliptu.com/free-script/dynamic-highchart-example-with-jquery-php-json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.boock.ch/meteo/tuto_mysql_highcharts/tuto_mysql_highcharts_04.php"&gt;http://www.boock.ch/meteo/tuto_mysql_highcharts/tuto_mysql_highcharts_04.php&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html"&gt;http://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/11851122/blank-page-highchart-in-using-jquery-to-call-json-arrary/11852873#11852873"&gt;http://stackoverflow.com/questions/11851122/blank-page-highchart-in-using-jquery-to-call-json-arrary/11852873#11852873&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/13228081/highcharts-not-displaying-series-pushed-from-json"&gt;http://stackoverflow.com/questions/13228081/highcharts-not-displaying-series-pushed-from-json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://williams.best.vwh.net/sunrise_sunset_algorithm.htm"&gt;http://williams.best.vwh.net/sunrise_sunset_algorithm.htm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://blog.tafkas.net/2012/11/26/charting-sunrise-and-sunset-in-highcharts"&gt;http://blog.tafkas.net/2012/11/26/charting-sunrise-and-sunset-in-highcharts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://jsfiddle.net/jlbriggs/FnhRV"&gt;http://jsfiddle.net/jlbriggs/FnhRV&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.java2s.com/Tutorials/Javascript/jQuery_UI/DatePicker/Build_jQuery_UI_Datepicker_Select_a_Date_Range_in_JavaScript.htm"&gt;http://www.java2s.com/Tutorials/Javascript/jQuery_UI/DatePicker/Build_jQuery_UI_Datepicker_Select_a_Date_Range_in_JavaScript.htm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://javascript.ru/Date/toLocaleFormat#comment-16083"&gt;http://javascript.ru/Date/toLocaleFormat#comment-16083&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="Programavimas"></category><category term="bootstrap"></category><category term="DHT22"></category><category term="gauges"></category><category term="github"></category><category term="HighCharts"></category><category term="innerHTML"></category><category term="JavaScript"></category><category term="jQuary"></category><category term="jQuaryUI"></category><category term="JS"></category><category term="jSON"></category><category term="jSON push"></category><category term="MySQL"></category><category term="php"></category><category term="RaspberriPi"></category><category term="RPI"></category><category term="Sunrise"></category><category term="Sunset"></category><category term="timedate"></category><category term="toLocaleFormat"></category><category term="viewport"></category></entry><entry><title>Flip-Dot Clock</title><link href="https://paulius.bautrenas.lt/flip-dot-clock.html" rel="alternate"></link><published>2015-02-12T09:30:00+02:00</published><updated>2015-02-12T09:30:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2015-02-12:/flip-dot-clock.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319.jpg"&gt;&lt;img alt="IMG_7319" class="aligncenter wp-image-630 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319_800x600.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Idėja susikonstruoti unikalų sieninį laikrodį mano galvoje kirbėjo gan seniai, tačiau iki šiol niekaip iki to „nepriėjo“ rankos. Be to, internetas yra pilnas kuo įvairiausių „nixie“, LED'inių, mechaninių, pneumatinių, hidraulinių ir kitokių laikrodžių, o man norėjosi kažko įdomesnio. Taip pat kaip ir kiekvienas tikras inžinierius esu didelis tinginys, todėl nenorėjau …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319.jpg"&gt;&lt;img alt="IMG_7319" class="aligncenter wp-image-630 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7319_800x600.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Idėja susikonstruoti unikalų sieninį laikrodį mano galvoje kirbėjo gan seniai, tačiau iki šiol niekaip iki to „nepriėjo“ rankos. Be to, internetas yra pilnas kuo įvairiausių „nixie“, LED'inių, mechaninių, pneumatinių, hidraulinių ir kitokių laikrodžių, o man norėjosi kažko įdomesnio. Taip pat kaip ir kiekvienas tikras inžinierius esu didelis tinginys, todėl nenorėjau per daug vargti su mandromis konstrukcijomis ir kitokiais velniais, todėl ilgai laukiau reikiamo momento kol į rankas paklius kas nors, iš ko būtų galima pasidaryti laikrodį. Šis momentas atėjo buvusiame darbe, kai į mano rankas pakliuvo &lt;a class="reference external" href="elektromechanines-svieslentes"&gt;elektromechaninė švieslentė (angl. flip-dot)&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="schema-ir-pcb"&gt;
&lt;h2&gt;Schema ir PCB&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-sch.png"&gt;&lt;img alt="flip_dot_controller_V2-sch" class="aligncenter size-large wp-image-648" src="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-sch-774x1024.png" style="width: 625px; height: 827px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Laikrodžio valdikliui iš principo panaudojau tą patį, šiek tiek ankščiau aprašytą valdiklį, su kuriuo tyrinėjau &lt;a class="reference external" href="elektromechanines-svieslentes"&gt;elektromechanines švieslentes&lt;/a&gt;. Vienintelis skirtumas tas, kad šį kartą prie jo papildomai prijungiau Dallas DS1307 RTC laikrodį. Tuo pačiu linijinį įtampos stabilizatorių 7805 pakeičiau impulsiniu nekaistančiu LM2574n-5 su atitinkamu apkabinimu. Schemos stabilumui užtikrinti, papildomai ant AtMEGA16 Reset kojos užkabinau supervizorių &lt;a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/11187f.pdf"&gt;MCP100T-475I&lt;/a&gt;, kuris neleidžia atmegai startuoti, kol jos maitinimo įtampa nepakilo aukščiau 4,75 V.&lt;/p&gt;
&lt;p&gt;Šią valdiklio versiją papildžiau aibe naujų jungčių. Išvedžiau vieną iš ADC pinų. Numačiau jungtį rotorinio enkoderio ar išorinių mygtukų prijungimui. Valdiklio darbo statuso šviesos diodus irgi iškėliau ant papildomos jungties. Įprojektavau galimybė prijungti papildomą lauktranzių grandinę, skirtą laikrodžio apšvietimo komutavimui.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_sch.png"&gt;&lt;img alt="fet_board_sch" class="aligncenter wp-image-646 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_sch-166x300.png" style="width: 166px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tiesa, tuos lauktranzius teko iškelti ant atskiros plokštelės, nes į nemokamo Eagle langą jie tiesiog gražiai nebetilpo. Na bet kokiu atveju, abi PCB gavosi gan šaunios:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-brd.png"&gt;&lt;img alt="flip_dot_controller_V2-brd" class="aligncenter size-large wp-image-647" src="https://paulius.bautrenas.lt/images/flip-dot-clock/flip_dot_controller_V2-brd-1024x818.png" style="width: 625px; height: 499px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_brd.png"&gt;&lt;img alt="fet_board_brd" class="aligncenter wp-image-645 size-medium" src="https://paulius.bautrenas.lt/images/flip-dot-clock/fet_board_brd-300x300.png" style="width: 300px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="surinkimas"&gt;
&lt;h2&gt;Surinkimas&lt;/h2&gt;
&lt;p&gt;Šiek tiek išrinkau turimos švieslentės korpusą ir pradėjau ieškoti vietos elektronikai. Vietos radau ant galinio švieslentės skydelio, šalia į korpusą įmontuotos dienos šviesos (CCFL) lempos inverterio.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6960.jpg"&gt;&lt;img alt="IMG_6960" class="aligncenter size-large wp-image-657" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6960-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6982.jpg"&gt;&lt;img alt="IMG_6982" class="aligncenter size-large wp-image-658" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6982-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Būdamas didelis tinginys, daugelį aukščiau aprašytų pakeitimų padariau lituokliu ant egzistuojančios plokštės ir negaminau naujos PCB. Tiesa, tai kainavo šiek tiek nervų.. Taip daryti tikrai niekam nerekomenduočiau, bet dėl sprendimo per daug nesigailiu, nes pakeitimų nebuvo labai daug.&lt;/p&gt;
&lt;p&gt;Valdiklio ir švieslentės maitinimui panaudojau kinietišką DC-DC modulį iš Aliexpress. Iš senų laikų turėjau likusį RTC moduliuką, o ir &amp;quot;netyčia&amp;quot; iš pat pradžių valdiklio PCB buvau įprojektavęs I2C jungtį.. Žodžiu, pakoreguotas valdiklis atrodė taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6988.jpg"&gt;&lt;img alt="IMG_6988" class="aligncenter size-large wp-image-654" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6988-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6987.jpg"&gt;&lt;img alt="IMG_6987" class="aligncenter size-large wp-image-655" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6987-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Dalis, prie PCB prilituotų laidų eina į laikrodžio nustatymo mygtukus. Kiti į lauktranzių plokštelę. Lauktranzių plokštelės PCB, kaip supratote, irgi negaminau, o tiesiog greituoju surinkau ant &amp;quot;nulinės&amp;quot; plokštės:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6985.jpg"&gt;&lt;img alt="IMG_6985" class="aligncenter size-large wp-image-662" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6985-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tiek valdiklį, tiek dc-dc, tiek ir lauktranzių plokštelę pritvirtinau varžtais ir sujungiau visus laidus:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6991.jpg"&gt;&lt;img alt="IMG_6991" class="aligncenter size-large wp-image-665" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6991-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7001.jpg"&gt;&lt;img alt="IMG_7001" class="aligncenter size-large wp-image-672" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7001-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Laikrodis valdomas dviem mygtukais. Vienas įjungia/išjungia laiko nustatymo režimą. Kitas nustato laiką ir junginėja apšvietimą (apie tai vėliau). Iš senų laikų turėjau nusipirkęs neracionaliai brangius mygtukus su šviesos diodais. Juos irgi sulitavau ant &amp;quot;nulinės plokštės&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6983.jpg"&gt;&lt;img alt="IMG_6983" class="aligncenter size-large wp-image-660" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6983-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pačia plokštelę pritvirtinau taip, kad mygtukai būtų prieinami iš išorės.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7697.jpg"&gt;&lt;img alt="IMG_7697" class="aligncenter size-large wp-image-688" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7697-768x1024.jpg" style="width: 625px; height: 833px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kitame švieslentės šone sumontavau maitinimo jungtį ir saugiklį. Papildomai apsaugai nuo neteisingo pajungimo įmontavau peraugusį šotki diodą:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6994.jpg"&gt;&lt;img alt="IMG_6994" class="aligncenter size-large wp-image-670" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6994-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6995.jpg"&gt;&lt;img alt="IMG_6995" class="aligncenter size-large wp-image-671" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_6995-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Surinktas laikrodis atrodo taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7317.jpg"&gt;&lt;img alt="IMG_7317" class="aligncenter size-large wp-image-631" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7317-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="softas"&gt;
&lt;h2&gt;Softas&lt;/h2&gt;
&lt;p&gt;Tai sudėtingiausia projekto dalis. Valdiklio kodas painus todėl, kad projekto įgyvendinimas užtruko porą metų. T. y. valdiklis ir &amp;quot;basic&amp;quot; valdymo programa buvo sukurta maždaug 2012 metais, rašant magistrinį darbą. Visas kitas funkcionalumas suprogramuotas 2014 m. pabaigoje, kai pagaliau atsiraro įkvėpimas. Kodo &amp;quot;tvarkingumui&amp;quot; tikrai nepadėjo ir tai, kad ūpui pakelti dažnai nevengiau buteliuko alaus ar viskio šlakelio. :D Na bet yra kaip yra. Gal vienas kitas bugas ir liko, bet daigtas veikia, atlieka savo funkcijas ir nelūžta.&lt;/p&gt;
&lt;p&gt;Programos kodo per daug nekomentuosiu, tačiau ateities kartoms šiek tiek aprašysiu priimtus programinius ir AtMEGA16&amp;nbsp;hardware išnaudojimo sprendimus. Pirmiausia apie softą. Apie flip-dot švieslentės valdymo mechanizmą užsiminiau įraše apie &lt;a class="reference external" href="elektromechanines-svieslentes"&gt;elektromechanines švieslentes&lt;/a&gt;. Ten nieko sudėtingo, tiesiog switch-case konstrukcija, atitinkamai sukomutuojanti švieslentės valdymo dešifratorius. Įdomesnis to praktinis pritaikymas, nes norint atvaizduoti skaičius (laiką), teko sukurti nuosavą &amp;quot;šriftą&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/octagon_fontas.png"&gt;&lt;img alt="octagon_fontas" class="aligncenter size-large wp-image-704" src="https://paulius.bautrenas.lt/images/flip-dot-clock/octagon_fontas-1024x591.png" style="width: 625px; height: 361px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nusprendžiau naudoti 5x3 taškų dydžio skaičius (didesni tiesiog gražiai netilpo į mano turimą 13x28 matricą).&amp;nbsp; Mano turima elektromechaninė švieslentė yra taip jau sutverta, kad stulpelius yra valdyti daug patogiau nei eilutes, todėl kiekvieną skaitmenį sudaro 3 baitai stulpelių. Kiekviename baite yra saugoma informacija apie kiekvieną stulpelio tašką: 0 - juoda spalva, 1 - geltona. Skaitmens stulpeliai yra skaitomi iš &amp;quot;apačios į viršų&amp;quot;. Taip atrodo visas 11 simbolių (skaitmenys 0–9 ir simbolis &amp;quot;:&amp;quot;) šrifto masyvas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fdfont&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//0&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x09&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//1&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1D&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//2&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//3&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x04&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//4&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1D&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//5&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//6&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//7&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//8&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1D&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x1F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;//9&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x0A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mh"&gt;0x00&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// :&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Skaičius atvaizduoja funkcija &lt;strong&gt;print_number&lt;/strong&gt;&lt;em&gt;(number,pst,peil),&lt;/em&gt; kuriai reikalingi 3 argumentai: &lt;em&gt;number&lt;/em&gt; - norimas atvaizduoti skaitmuo; &lt;em&gt;pst&lt;/em&gt; ir &lt;em&gt;peil&lt;/em&gt; - atvaizduotino skaitmens apatinio kairiojo kampo koordinatės (skaičiuojama nuo matricos apatinio kairiojo kampo). Ši funkcija atitinkamai išsikviečia funkciją &lt;strong&gt;print_column&lt;/strong&gt;&lt;em&gt;,&lt;/em&gt; kuri nuskaito šrifto masyvą&amp;nbsp; ir su funkcija &lt;strong&gt;segmentas&lt;/strong&gt; atitinkamai, bitas po bito perverčia matricos skydelius. Kaip greitai (dar net ne maksimalus greitis) veikia laikrodis, galite pamatyti čia:&lt;/p&gt;
&lt;p&gt;Laiko &amp;quot;rodymas&amp;quot; yra realizuotas &lt;strong&gt;TIMER0_OVF_vect&lt;/strong&gt; pertrauktimi. Čia kelis kartus per sekundę yra tikrinama, ar nepasikeitė laikas. Jeigu laikas pasikeitė, yra patikrinama, kurie skaitmenys būtent pasikeitė ir tik jie yra perpiešiami. Vizualiai tai atrodo maždaug taip:&lt;/p&gt;
&lt;p&gt;Laikrodžio nustatymai keičiami tiek per USART sąsają, tiek ir valdymo mygtukais. Mygtuku, prijungtu prie INT1 (PD3), galima įjungti ir išjungti laikrodžio apšvietimą. Labai knietėjo pabandyti laikrodį apšviesti UV šviesos diodų juosta, todėl suprogramavau galimybę įsijungti CCFL arba UV apšvietimą:&lt;/p&gt;
&lt;p&gt;Mygtuku, prijungtu prie INT0 (PD2), yra aktyvuojamas rankinis laiko nustatymo režimas. Aktyvavus šį režimą, mygtukas &amp;quot;INT1&amp;quot; didina pasirinktą skaičių, o mygtukas &amp;quot;INT0&amp;quot; - šoliuoja per skaitmenis.&amp;nbsp; Pasirinktas skaitmuo yra indikuojamas brūkšneliu po skaitmeniu. Perėjus per visus skaitmenis, nustatytas laikas yra išsaugomas. Žinoma, yra suprogramuota papildoma apsauga nuo durniaus, neleidžianti išsaugoti nerealaus laiko (&amp;gt;23:59), bei išeinanti iš rankinio laiko nustatymo režimo, jei jis užtrunka per ilgai (kažkas pradėjo nustatinėti laikrodį ir pamiršo). Pastaroji apsauga yra realizuota&amp;nbsp; pertrauktimi &lt;strong&gt;TIMER1_COMPA_vect&lt;/strong&gt;, kuri nuolat tikrina ar nebuvo viršytas nustatytas laiko intervalas. Intervalas yra &amp;quot;įhardkodintas&amp;quot; parametre &lt;em&gt;set_time_timeout&lt;/em&gt;. Parametro reikšmė - maksimalus laiko tarpas sekundėmis tarp atliktų veiksmų. Viršijus šį laiką (nespėjus išsaugoti naujo nustatyto laiko), nustatymai yra anuliuojami ir yra gražinamas senas laikas. Pats rankinis nustatymas atrodo taip:&lt;/p&gt;
&lt;p&gt;Laiką ir datą galima nustatyti ir per &lt;strong&gt;USART&lt;/strong&gt; sąsają (9600 Boud, 8 bitų su 1 Stop bitu). USART sąsaja taip pat galima įjungti ir išjungti laikrodžio apšvietimą. USART meniu atrodo taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard01.jpg"&gt;&lt;img alt="Clipboard01" class="aligncenter size-full wp-image-677" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard01.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;USART sąsaja yra pritaikyta žmogui. T. y. nustatant laiką ar datą valdiklis gražiai paprašo įvesti valandas, minutes ir sekundes (metus, mėnesį dieną), pasitikslina ar norime įvestus duomenis išsaugoti ir tik tada atlieka realius pakeitimus. Apšvietimas komutuojamas irgi panašiai, tik čia iš naudotojo gavus darbo režimo nustatymą jis yra vykdomas iš karta, nieko daugiau neklausiant.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard03.jpg"&gt;&lt;img alt="Clipboard03" class="aligncenter size-full wp-image-679" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard03.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard05.jpg"&gt;&lt;img alt="Clipboard05" class="aligncenter size-full wp-image-680" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard05.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard06.jpg"&gt;&lt;img alt="Clipboard06" class="aligncenter size-full wp-image-681" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard06.jpg" style="width: 677px; height: 374px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Įdomu tai, kad prijungus &lt;a class="reference external" href="http://paulius.bautrenas.lt/blog/?p=493"&gt;HC05 bluetooth moduliuką&lt;/a&gt;, visi nustatymai yra puikiausiai pasiekiami iš Android telefono, naudojant &amp;quot;BlueTerm&amp;quot; programėlę:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7023.jpg"&gt;&lt;img alt="IMG_7023" class="aligncenter size-large wp-image-675" src="https://paulius.bautrenas.lt/images/flip-dot-clock/IMG_7023-1024x768.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Manau, daug kam kyla klausimas, kam iš vis tas valdymas per USART, jeigu yra valdymo mygtukai? Atsakymas yra dvigubas: pirmiausia, USART sąsają kūriau dėl sportinio intereso ir dėl galimybės &lt;strong&gt;automatiškai atnaujinti/sinchronizuoti laiką&lt;/strong&gt;. Taip taip, mano laikrodį galima sinchronizuoti su PC laikrodžiu per USART. Tam pasiskolinau&amp;nbsp;&lt;a class="reference external" href="http://noahcoad.com/"&gt;Noah Coad&lt;/a&gt; programos &amp;quot;&lt;a class="reference external" href="http://blogs.msmvps.com/coad/2005/03/23/serialport-rs-232-serial-com-port-in-c-net/"&gt;SerialPort Terminal&lt;/a&gt;&amp;quot; kodą ir jį šiek tiek patobulinau pagal savo poreikius.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard08.jpg"&gt;&lt;img alt="Clipboard08" class="aligncenter size-full wp-image-683" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard08.jpg" style="width: 629px; height: 576px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Programoje pridėjau 3 mygtukus. Mygtukas &amp;quot;About&amp;quot; gražina laikrodžio techninę informaciją, o mygtukai &amp;quot;SyncTime&amp;quot; ir &amp;quot;SyncDate&amp;quot; atitinkamai sinchronizuoja flip-dot laikrodžio RTC su kompiuterio laikrodžiu (dėl lėto USART galima kelių sekundžių paklaida):&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard12.jpg"&gt;&lt;img alt="Clipboard12" class="aligncenter size-full wp-image-684" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard12.jpg" style="width: 629px; height: 546px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard13.jpg"&gt;&lt;img alt="Clipboard13" class="aligncenter size-full wp-image-685" src="https://paulius.bautrenas.lt/images/flip-dot-clock/Clipboard13.jpg" style="width: 629px; height: 546px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="naudingos-nuorodos"&gt;
&lt;h2&gt;Naudingos nuorodos&lt;/h2&gt;
&lt;p&gt;Valdiklio schemą, PCB ir programinį kodą rasite mano &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/Flip-Dot%20Clock"&gt;GitHub'e&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Projekto aprašymą anglų kalba rasite &lt;a class="reference external" href="https://hackaday.io/project/168888-flip-dot-clock"&gt;Hackaday.io&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="Elektronika"></category><category term="atmega16"></category><category term="ccfl"></category><category term="clock"></category><category term="ds1307"></category><category term="flip-dot"></category><category term="flipdot"></category><category term="font"></category><category term="mosfet"></category><category term="uart"></category><category term="UV LED"></category></entry><entry><title>Elektromechaninės švieslentės (flip-dot display)</title><link href="https://paulius.bautrenas.lt/elektromechanines-svieslentes.html" rel="alternate"></link><published>2014-12-30T09:45:00+02:00</published><updated>2014-12-30T09:45:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-12-30:/elektromechanines-svieslentes.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg"&gt;&lt;img alt="flipdot_1" class="aligncenter size-medium wp-image-610" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg" style="width: 624px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nors tai tikrai sena technologija, tačiau elektromechaninės (angl. flip-dot) švieslentės yra vis dar plačiai paplitusios. Jos naudojamos ten, kur reikia didelio informacijos perskaitomumo ir didelio apžvalgos kampo. Elektromechaninės švieslentės dažniausiai yra naudojamos traukinių ir autobusų stotyse, lauko stadionuose, oro uostuose ir viešajame transporte. Prieš porą metų, kelios tokios švieslentės pakliuvo …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg"&gt;&lt;img alt="flipdot_1" class="aligncenter size-medium wp-image-610" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_1.jpg" style="width: 624px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nors tai tikrai sena technologija, tačiau elektromechaninės (angl. flip-dot) švieslentės yra vis dar plačiai paplitusios. Jos naudojamos ten, kur reikia didelio informacijos perskaitomumo ir didelio apžvalgos kampo. Elektromechaninės švieslentės dažniausiai yra naudojamos traukinių ir autobusų stotyse, lauko stadionuose, oro uostuose ir viešajame transporte. Prieš porą metų, kelios tokios švieslentės pakliuvo man į rankas. Kadangi norėjau švieslentes panaudoti savo tikslams, nusprendžiau jas šiek tiek plačiau patyrinėti. Ypač domino jų valdymas ir &amp;quot;vangių&amp;quot; segmentų atsiradimo priežastys.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_2.jpg"&gt;&lt;img alt="flipdot_2" class="aligncenter size-large wp-image-580" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flipdot_2.jpg" style="width: 625px; height: 168px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viršuje pateikta kompanijos „LAWO Luminator Technology Group“ informacinės sistemos „Full-matrix System“ elektromechaninių švieslenčių, naudojamų Vilniaus miesto autobusuose, nuotrauka. „Full-matrix System“ švieslentės yra elektromechaninės. Kiekviena švieslentė turi papildomą liuminescencinį apšvietimą, naudojamą tamsiu paros metu. Kiekviena švieslentė yra sudaryta iš aibės individualių 10 – 15 mm skersmens aštuonkampių skydelių, kurių viena pusė yra nudažyta juodai, kita – geltonai.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0076.jpg"&gt;&lt;img alt="image1" class="aligncenter size-large wp-image-582" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0076-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kiekvieną skydelį valdo elektromagnetas, sudarytas iš U formos magnetolaidžio bei dviejų ričių. Elektromagnetas, priklausomai nuo valdymo signalo, atverčia arba geltonąją arba juodąją skydelio pusę. Išjungus valdymo signalą, dėl liekamojo elektromagneto magnetolaidžio įmagnetėjimo skydelis pasilieka fiksuotoje padėtyje.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0067.jpg"&gt;&lt;img alt="image2" class="aligncenter size-large wp-image-581" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0067-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tokiu būdu yra užtikrinamas vaizduojamo teksto įskaitomumas bei beveik 180º matymo kampas. Detalus švieslentės skydelių vartymo mechanizmų veikimas ir gamybos metodas yra aprašytas patente „&lt;a class="reference external" href="http://www.freepatentsonline.com/20030041492.pdf"&gt;US 2003/0041492 A1 Small dot display element&lt;/a&gt;“. Šaltinyje yra nurodyta, kad skydeliai ramybės būsenoje yra šiek tiek pasvirę. Pagal patentą, tai yra padaryta tam, kad būtų sumažintas sukimo monetas, reikalingas skydelio pervertimui. Iš principo, kuo mažesnis skydelio posvyrio kampas, tuo didesniu apžvalgos kampu skydelis yra matomas, tačiau tuo pačiu reikia sukurti stipresnį magnetinį lauką skydelio pervertimui.&lt;/p&gt;
&lt;p&gt;Švieslentės yra maitinamos nuolatine 24V ± 20% įtampa. Dėl konstrukcijos ypatybių lentos naudoja labai mažai elektros srovės: 360 – 560 mA skydelių pervertimo metu ir tik 60 – 200 mA „ramybės“ būsenoje. Lentų konstrukcija taip pat lemia ir tai, kad atvaizduojamas tekstas išlieka net ir išjungus maitinimą. Tiesa, elektromechaninė konstrukciją turi ir trūkumų: švieslentės skydeliai ilgainiui tampa „vangūs“, apsiverčia per lėtai arba neatsiverčia iš viso. Švieslentės yra jautrios mechaninėms šiukšlėms ir dulkėms. Be to, „pasyvūs“ švieslentės taškai reikalauja papildomo apšvietimo, kuris yra gana reiklus elektros srovei (0,5 – 5,5 A).&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/268118_10150228228661035_4800258_n.jpg"&gt;&lt;img alt="268118_10150228228661035_4800258_n" class="aligncenter wp-image-609 size-full" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/268118_10150228228661035_4800258_n-e1419866057695.jpg" style="width: 719px; height: 331px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vilniaus autobusuose taip pat yra naudojama kompanijos „Krueger Apparatebau GmbH &amp;amp; Co.“ gaminama informacinė sistema. Šios kompanijos švieslenčių Vilniaus autobusuose yra įrengta nedaug, tačiau „Krueger“ sistema iš kitų sistemų išsiskiria savo mechanine konstrukcija. Ankščiau aprašytose švieslentėse skydelių vartymo mechanizmas pagal atitinkamą valdymo signalą perverčia visą skydelį (&lt;cite&gt;nuotrauka &amp;lt;{static}/images/elektromechanines-svieslentes/PICT0076.jpg&amp;gt;&lt;/cite&gt;), tačiau „Kruger“ sistemoje yra verčiama tik viena skydelio „pusė“. T. y. „Krueger“ švieslentės tašką sudaro judanti skydelio dalis bei nejudanti, pusiau juodai ir geltonai nudažyta, plokštelė. Vartymo mechanizmą paveikus atitinkamu valdymo signalu, vartomoji skydelio dalis yra atverčiama geltonąja puse, kuri uždengia juodąją nejudančios plokštelės pusę, arba juodąja, kuri uždengia geltonąją stacionarios plokštelės pusę.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0096.jpg"&gt;&lt;img alt="image3" class="aligncenter size-large wp-image-585" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0096-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Lyginant horizontaliai ir vertikaliai vartomų švieslenčių segmentus, kvadratinės konstrukcijos segmento matomas plotas yra bent 16 % didesnis jei apskrito, horizontaliai vartomo skydelio. Tokia skydelių konstrukcija užtikrina geresnį informacijos perskaitomumą ir didesnį švieslentės vaizduojamos informacijos atnaujinimo greitį. Taip pat vertikalios konstrukcijos segmentų elektromagneto konstrukcija yra daug paprastesnė: „Krueger“ sistemoje yra naudojamas įprastos konstrukcijos solenoidas su cilindrine feromagnetine šerdimi. Tokia konstrukcija yra ne tik paprastesnė, bet ir pigesnė, jos gamybai nėra keliami tokie griežti reikalavimai kaip U formos (naudojami „LAWO“ sistemoje) vartymo mechanizmams.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0110.jpg"&gt;&lt;img alt="image4" class="aligncenter size-large wp-image-586" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/PICT0110-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class="section" id="vangiu-skydeliu-nustatymas-ir-atsiradimo-priezastys"&gt;
&lt;h2&gt;&lt;strong&gt;&amp;quot;Vangių&amp;quot; skydelių nustatymas ir atsiradimo priežastys&lt;/strong&gt;&lt;/h2&gt;
&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/38010951" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;p&gt;Kaip jau minėjau tekste, kartais kai kurie švieslentės skydeliai pasidaro &amp;quot;vangūs&amp;quot;, apsiverčia per lėtai arba neatsiverčia iš viso. Tai puikiai iliustruoja šis aukščiau patalpintas video (atsiprašau už kokybę). Video filmuke valdiklis paeiliui perverčia kiekvieną matricos skydelį į geltonąją pusę, po to - į juodąją. Manau tikrai turėtumėte pastebėti skydelius, kurie veikia kitaip nei visi. T. y. persiverčia atvirkščiai negu visi, persivertę nelieka nustatytoje padėtyje ir t. t. Vat tokių skydelių atsiradimo priežastį ir nusprendžiau patyrinėti šiek tiek giliau.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta.jpg"&gt;&lt;img alt="lenta" class="aligncenter size-large wp-image-590" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta-1024x682.jpg" style="width: 625px; height: 416px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tyrimui buvo pasirinkta „Full-matrix System“ informacinėje sistemoje naudojama šono skaitinė švieslentė, sudaryta iš 448 skydelių su vartymo mechanizmais (elektromagnetais). Vartymo mechanizmai yra elektriškai sujungti į matricą, sudarytą iš 16 eilučių ir 28 stulpelių. Šono skaitinėje lentoje yra sumontuoti 3 vartymo mechanizmų valdikliai FP2800A.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta_2.jpg"&gt;&lt;img alt="lenta_2" class="aligncenter size-large wp-image-591" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/lenta_2-1024x497.jpg" style="width: 625px; height: 303px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;FP2800A – tai „iš 5 į 28“ tipo dešifratorius, atpažįstantis kodinę signalų jo įėjimuose kombinaciją ir sukuriantis signalą viename tą kodinę kombinaciją atitinkančiame išėjime [R. Kirvaitis. Loginės schemos]. Pagrindinė FP2800A ypatybė yra ta, kad dešifratoriaus išėjimai dirba „šaltinio imtuvo“ režimais&amp;nbsp; (nuotrauka apačioje), t.&amp;nbsp; y. dešifratorius pagal valdymo komandą gali tam tikrą išėjimą prijungti arba prie maitinimo šaltinio teigiamo poliaus arba prie neigiamo. Tai yra ypač svarbu elektromechaninių švieslenčių valdymui, nes elektros srovė per vartymo mechanizmo rites turi tekėti abejomis kryptimis.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/source-sink.jpg"&gt;&lt;img alt="source-sink" class="aligncenter size-full wp-image-593" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/source-sink.jpg" style="width: 877px; height: 219px;" /&gt;&lt;/a&gt;
Kaip jau buvo minėta, švieslentės 16 x 24 skydelių matricą valdo 3 vartymo mechanizmų valdikliai FP2800A. Vienas iš jų yra skirtas matricos stulpelių valdymui (funkcinė schema virsuje), kiti du – eilučių valdymui. Kiekvienas iš šių valdiklių yra valdomas 7 linijų duomenų perdavimo magistrale, kuri pagrindiniame valdiklyje dažnai būna multipleksuojama. Mikrovaldiklis tinkamais laiko momentais privalo kiekvienam iš valdiklių nurodyti konkretų komutuojamo išėjimo adresą (5 adreso linijos) ir komutuojamo išėjimo poliariškumą (Data signalas). Be to, mikrovaldiklis turi generuoti Enable signalą, inicijuojantį adreso linijos dešifraciją, bei dekoduoto valdiklio išėjimo prijungimą arba prie maitinimo šaltinio teigiamo poliaus, arba prie neigiamo.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/rc.jpg"&gt;&lt;img alt="rc" class="aligncenter wp-image-592" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/rc.jpg" style="width: 251px; height: 143px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/pinout.png"&gt;&lt;img alt="pinout" class="aligncenter size-medium wp-image-621" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/pinout-279x300.png" style="width: 279px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Valdikliai FP2800A gali komutuoti iki 370 mA srovę, todėl, norint apsaugoti skydelių vartymo mechanizmus bei pačius valdiklius, yra būtina riboti valdiklio išėjimų komutavimo intervalus. Tam gamintojas siūlo nesudėtingą schemą (nuotrauka viršuje), sudarytą iš kondensatoriaus C1 ir rezistoriaus R1. Gamintojo rekomenduotinos elementų parametrų vertės yra C1=0,22 μF ir R=22 kΩ , garantuojančios maksimalią 24 ms Enable signalo veikimo trukmę. Kadangi elektros srovė turi tekėti abejomis kryptimis per skydelių vartymo mechanizmų elektromagnetų rites, yra naudojami 2 atskiri lygiagrečiai sujungti valdikliai. Valdiklių apsaugai jų išėjimai yra atskirti diodais D1 ir D2 (nuotrauka viršuje, dešinėje).&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/timing.jpg"&gt;&lt;img alt="timing" class="aligncenter size-full wp-image-594" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/timing.jpg" style="width: 908px; height: 380px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/apsauga.jpg"&gt;&lt;img alt="apsauga" class="aligncenter size-full wp-image-588" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/apsauga.jpg" style="width: 541px; height: 236px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Norint detaliau ištirti švieslentės veikimą bei gauti norimas dinamines charakteristikas buvo nuspręsta sukurti eksperimentinį švieslentės valdiklį, kuris leistų valdyti švieslentės taškus pagal tiesiogines komandas, siunčiamas iš asmeninio kompiuterio. Vienas svarbiausių dalykų, kuriant eksperimentinį valdiklį, buvo sužinoti, kaip švieslentės taškai yra prijungti prie 3 vartymo mechanizmų valdiklių FP2800A. Tai buvo nustatyta rankiniu būdu, analizuojant švieslentės spausdintinę plokštę.&amp;nbsp; Dešifratorių FP2800A ir flip-dot matricos jungimai yra pateikti lentelėje apačioje. Lentelėje panaudota eilučių ir stulpelių numeracija yra pažymėta pirmoje poskyrio nuotraukoje.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/desifratoriaus_jungimas.jpg"&gt;&lt;img alt="desifratoriaus_jungimas" class="aligncenter size-large wp-image-589" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/desifratoriaus_jungimas-1024x288.jpg" style="width: 625px; height: 175px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Eksperimentiniame švieslentės valdiklyje buvo panaudotas mikrovaldiklis AtMEGA16, tiesiogiai, per lankstų 26 gyslų kabelį su IDC jungtimi, siunčiantis valdymo ir adreso signalų kombinacijas dešifratoriams FP2800A. Valdiklyje periferinių įrenginių ir asmeninio kompiuterio prijungimui buvo įprojektuotos USART ir I2C sąsajos. Taip pat numatyti keli papildomi mygtukai ir šviesos diodai, naudojami valdiklio veiksmų kontrolei ir indikacijai, bei IBIS duomenų perdavimo sąsaja, naudotina komunikacijai su įvairiais autobusuose naudojamų informacinių sistemų įrenginiais.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flip-dot_controller.jpg"&gt;&lt;img alt="flip-dot_controller" class="aligncenter size-full wp-image-596" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/flip-dot_controller.jpg" style="width: 848px; height: 576px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Daugiau informacijos apie valdiklį rasite mano &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/Flip-Dot%20Clock"&gt;GitHub'e&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Srovės matavimui buvo parinktas 1 Ω 17 W šunto rezistorius. Didelės vardinės galios rezistorius buvo parinktas tam, kad būtų galima išvengti šiluminių galios nuostolių dėl kurių šuntas fiziškai šyla. Dėl to keičiasi jo elektriniai parametrai, t. y. varža, kas darbo metu sukelia srovės matavimo paklaidas. Rezistoriaus vardinė 1 Ω varža leido tiksliai ir be papildomų matematinių veiksmų nustatyti, kokia srovė teką švieslentės grandine. Įtampos krytis šunto varžoje buvo matuojamas skaitmeniniu oscilografu Rigol DS1052E.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656895.jpg"&gt;&lt;img alt="134131656895" class="aligncenter size-full wp-image-599" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656895.jpg" style="width: 780px; height: 309px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tyrimo metu, eksperimentiniam valdikliui buvo sudaryta programa, paeiliui perverčianti visus 28-o stulpelio skydelius pirma į geltonąją pusę, po to – į juodąją. Bandymo buvo gauta srovės oscilograma, pateikta viršuje, kairėje.&amp;nbsp; Iš jos matome, kad verčiant skydelius į geltonąją pusę (1 impulsų serija), srovė tekanti per skydelių elektromagnetų rites yra maždaug 100 mA mažesnė nei verčiant skydelius į juodąją pusę (2 impulsų serija). Tai galima paaiškinti tuo, kad skydelio vartymo mechanizmo elektromagneto magnetolaidis yra nesimetriškas. Vienas magnetolaidžio strypelis yra šiek tiek ilgesnis nei kitas. Dėl to, skydelio posvyrio kampas abiejose stacionariose padėtyse skiriasi. Pasak &lt;a class="reference external" href="http://www.freepatentsonline.com/20030041492.pdf"&gt;patento&lt;/a&gt;, kuo yra mažesnis skydelio posvyrio kampas, tuo reikia sukurti stipresnį magnetinį lauką skydelio pervertimui.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131672916.jpg"&gt;&lt;img alt="134131672916" class="aligncenter size-full wp-image-602" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131672916.jpg" style="width: 775px; height: 503px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Galima pastebėti, kad verčiant 28-ojo stulpelio pirmąjį skydelį, per elektromagnetą tekanti srovė yra mažesnė (pažymėta raudona rodykle) nei verčiant kitus to paties stulpelio segmentus. Ši tendencija kartojasi ir individualiai vartant tik šį segmentą. Iš oscilogramos (28;1) matome, kad srovė tekanti per segmento (28;1) elektromagneto ritę yra vienoda verčiant skydelį ir į vieną pusę, ir į kitą. Taip būti neturėtų, nes korektiškai veikiančių segmentų vertimo srovės skiriasi. Apačioje yra pateikta segmento (3;4) oscilograma, patvirtinanti prieš tai suformuotą teiginį.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656919.jpg"&gt;&lt;img alt="134131656919" class="aligncenter size-full wp-image-600" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656919.jpg" style="width: 788px; height: 315px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656944.jpg"&gt;&lt;img alt="134131656944" class="aligncenter size-full wp-image-601" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656944.jpg" style="width: 404px; height: 309px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Paveiksle, pateiktame viršuje, dešinėje, yra atvaizduota srovės, tekančios per segmento su išimtu feromagnetiniu skydeliu vartymo mechanizmo elektromagnetą, oscilograma. Iš tiesų (28;1) ir (1;3) segmentų oscilogramos yra labai panašios, tik šiek tiek skiriasi amplitudinės vertės, todėl galima teigti, kad&amp;nbsp; segmento (28;1) skydelis yra sugadintas. Iš tikro, tai matosi net plika akimi. Skydelis yra vangus, persiverčia daug lėčiau nei visi kiti. Taip pat jis tvirtai nesilaiko stacionarioje pozicijoje, ir persiverčia, verčiant kaimyninius skydelius, pav. (27;1) ar (28;2).&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656861.jpg"&gt;&lt;img alt="134131656861" class="aligncenter size-full wp-image-598" src="https://paulius.bautrenas.lt/images/elektromechanines-svieslentes/134131656861.jpg" style="width: 774px; height: 237px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Su specialia magnetinius polius parodančia &lt;a class="reference external" href="http://www.directindustry.com/prod/magnet-physik/magnetic-field-sensors-11843-778655.html"&gt;kortele&lt;/a&gt; buvo nustatyta, kad segmento (28;1) skydelis yra nekorektiškai permagnetintas. Paveiksle viršuje yra pateiktas gerai įmagnetinto skydelio (segmentas (3;4)) brėžinys, šalia – neteisingai permagnetinto. Iš paveikslų matome, kad gerai veikiantis skydelis yra įmagnetintas horizontalia kryptimi, o vangus skydelis – vertikalia.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Elektronika"></category><category term="atmega16"></category><category term="flip-disk"></category><category term="flip-dot"></category><category term="flipdot"></category><category term="FP2800A"></category><category term="Kreuger"></category><category term="Lawo"></category><category term="oscilograma"></category></entry><entry><title>Python: Statistinis klaidingų duomenų taškų eliminavimas</title><link href="https://paulius.bautrenas.lt/python-statistinis-klaidingu-duomenu-tasku-eliminavimas.html" rel="alternate"></link><published>2014-12-04T13:25:00+02:00</published><updated>2014-12-04T13:25:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-12-04:/python-statistinis-klaidingu-duomenu-tasku-eliminavimas.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/nekorektiski_taskai.png"&gt;&lt;img alt="nekorektiski_taskai" class="aligncenter wp-image-555" src="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/nekorektiski_taskai.png" style="width: 531px; height: 187px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Prieš mėnesį prie RaspberryPi prisijungiau porą DHT22 oro temperatūros ir drėgmės jutiklių ir pradėjau automatizuotai iš jų surinktus duomenis saugoti MySQL duomenų bazėje (plačiau &lt;a class="reference external" href="aviete-dht22-mysql"&gt;čia&lt;/a&gt;). Dar programuodamas duomenų surinkimą, pastebėjau, kad laikas nuo laiko DHT22 duomenyse pasitaiko klaidų, pav. vieno iš 10 matavimų rezultatas yra keliais laipsniais didesnis nei likusių …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/nekorektiski_taskai.png"&gt;&lt;img alt="nekorektiski_taskai" class="aligncenter wp-image-555" src="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/nekorektiski_taskai.png" style="width: 531px; height: 187px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Prieš mėnesį prie RaspberryPi prisijungiau porą DHT22 oro temperatūros ir drėgmės jutiklių ir pradėjau automatizuotai iš jų surinktus duomenis saugoti MySQL duomenų bazėje (plačiau &lt;a class="reference external" href="aviete-dht22-mysql"&gt;čia&lt;/a&gt;). Dar programuodamas duomenų surinkimą, pastebėjau, kad laikas nuo laiko DHT22 duomenyse pasitaiko klaidų, pav. vieno iš 10 matavimų rezultatas yra keliais laipsniais didesnis nei likusių ar pan. Tokias klaidas bandžiau eliminuoti suvidurkindamas kelių matavimų duomenis, tačiau tai padėjo tik iš dalies, nes net vienas klaidingas rezultatas gan stipriai iškreipia vidurkio rezultatą (žr. grafiką viršuje). Nusprendžiau matavimų klaidas eliminuoti panaudodamas statistinį &amp;quot;nukrypėlių&amp;quot; eliminavimo metodą.&lt;/p&gt;
&lt;p&gt;Tinkamo metodo ieškojau ilgai. Pirmiausia į galvą atėjo pasinaudoti vidutiniu kvadratiniu nuokrypiu ar Stjudento kriterijumi. Po to atradau &amp;quot;&lt;a class="reference external" href="http://sebastianraschka.com/Articles/2014_dixon_test.html"&gt;Dixon's Q&lt;/a&gt;&amp;quot; testą. Kažkiek pažaidęs, visus šiuos metodus atmečiau, nes radau daug paprastesnį ir labai lengvai python'e realizuojamą &amp;quot;&lt;a class="reference external" href="http://en.wikipedia.org/wiki/Interquartile_range"&gt;Interquartile range&lt;/a&gt;&amp;quot; metodą.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/iqr.jpg"&gt;&lt;img alt="iqr" class="aligncenter size-full wp-image-561" src="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/iqr.jpg" style="width: 443px; height: 165px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Metodo esmė yra ta, kad iš didėjimo tvarka surūšiuoto duomenų masyvo yra atmetamos labai mažos ir labai didelės reikšmės. Tiksliau, atmetamos tos reikšmės, kuriuos yra per daug nutolusios nuo masyvo &lt;a class="reference external" href="https://auzi22.wordpress.com/2009/10/26/moda-ir-mediana/"&gt;medianos&lt;/a&gt;. Tokių reikšmių atmetimui yra apskaičiuojami 25% ir 75% &lt;a class="reference external" href="https://ausram.wordpress.com/2009/10/28/kvartiliai/"&gt;kvartiliai&lt;/a&gt; Q1 ir Q3, jų skirtumas IRQ=Q3-Q1 ir atstumai nuo medianos: L=Q1-1,5*IRQ ir H=Q3+1,5*IRQ. Reikšmės patenkančios už L ir H rėžių yra laikomos per daug nutolusiomis ir yra atmetamos.&lt;/p&gt;
&lt;p&gt;Kaip tai atrodo realybėje, yra labai gerai paaiškinta čia: &lt;a class="reference external" href="https://www.youtube.com/watch?v=9aDHbRb4Bf8"&gt;https://www.youtube.com/watch?v=9aDHbRb4Bf8&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip tai yra realizuojama python'e;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;  &lt;span class="n"&gt;myList&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;  &lt;span class="n"&gt;MLS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;  &lt;span class="n"&gt;Q1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;percentile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;  &lt;span class="n"&gt;Q3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;percentile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;75&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;  &lt;span class="n"&gt;IRQ&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;  &lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;IRQ&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;  &lt;span class="n"&gt;H&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;IRQ&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;---&amp;quot;&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;myList: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MLS: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Q1=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Q3=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; IRQ=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; L=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; H=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Q3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;IRQ&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;H&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kode, kvartiliai Q1 ir Q3 yra apskaičiuojami &lt;a class="reference external" href="http://www.numpy.org/"&gt;NumPy&lt;/a&gt; bibliotekos funkcija &lt;em&gt;percentile(dataList,percentile)&lt;/em&gt;, kuriai paduodamas didėjimo tvarka surūšiuotas masyvas MLS. Likusi matematik matematika - elementari. Kodo rezultatas:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/irq_python.jpg"&gt;&lt;img alt="irq_python" class="aligncenter size-full wp-image-566" src="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/irq_python.jpg" style="width: 453px; height: 65px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pagal metodiką, visos masyvo reikšmės mažesnės, nei L=6,135 ir didesnės nei H=15,875 yra tikėtinai klaidingos ir tolimesniems skaičiavimams netinkamos.&lt;/p&gt;
&lt;p&gt;Savo DHT22 nuskaitymo reikmėms panaudodamas šį metodą parašiau funkciją, kuri ne tik atmeta tikėtinai klaidingas matavimo reikšmes bet ir iš kart apskaičiuoja matavimo rezultatų vidurkį. Funkciją pavadinau &amp;quot;&lt;em&gt;sanity_test(dataList)&lt;/em&gt;&amp;quot;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sanity_test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;      &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;myList: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;      &lt;span class="n"&gt;MLS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;      &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;MLS: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;      &lt;span class="n"&gt;Q1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;percentile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;      &lt;span class="n"&gt;Q3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;percentile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;75&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;      &lt;span class="n"&gt;IRQ&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;      &lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;IRQ&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;      &lt;span class="n"&gt;H&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;IRQ&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;      &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;L: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; H: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;H&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;      &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;----&amp;quot;&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;      &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;      &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;      &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;L&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;H&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;              &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;              &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="linenos"&gt;20&lt;/span&gt;              &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;+ i: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; MLS[&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;]: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="linenos"&gt;21&lt;/span&gt;          &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt;22&lt;/span&gt;              &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;
&lt;span class="linenos"&gt;23&lt;/span&gt;              &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;- i: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; MLS[&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;]: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="linenos"&gt;24&lt;/span&gt;
&lt;span class="linenos"&gt;25&lt;/span&gt;  &lt;span class="n"&gt;data_avg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;26&lt;/span&gt;      &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;----&amp;quot;&lt;/span&gt;
&lt;span class="linenos"&gt;27&lt;/span&gt;      &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;data_avg=&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data_avg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;28&lt;/span&gt;      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;data_avg&lt;/span&gt;
&lt;span class="linenos"&gt;29&lt;/span&gt;
&lt;span class="linenos"&gt;30&lt;/span&gt;  &lt;span class="n"&gt;myList&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mf"&gt;24.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;29.9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;24.1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;20.1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="linenos"&gt;31&lt;/span&gt;  &lt;span class="n"&gt;sanity_test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;myList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Funkcija veikia gan paprastai. Pirmiausiai funkcijai paduotas masyvas yra surūšiuojamas didėjimo tvarka. Po to, kaip ir prieš tai pateiktame kode, yra apskaičiuojami kvartiliai ir išvedamos ribos L ir H. Po to, cikle yra tikrinamas kiekvienas masyvo elementas ir, atmetant sąlygos netenkinančias reikšmes, yra išvedamas vidurkis. Vidurkis yra gražinamas į išorę. Specialiai kode prirašiau daug &lt;em&gt;print'ų&lt;/em&gt;, kad kodo rezultatas būtų kuo vaizdesnis:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/sanity_test.jpg"&gt;&lt;img alt="sanity_test" class="aligncenter size-full wp-image-571" src="https://paulius.bautrenas.lt/images/python-statistinis-klaidingu-duomenu-tasku-eliminavimas/sanity_test.jpg" style="width: 699px; height: 307px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Iš &amp;quot;screenshot&amp;quot; matome, kad funkcija apskaičiavo, jog &amp;quot;tinkamos&amp;quot; masyvo elementų reikšmių ribos L=23,95 ir H=24,25. Ciklas, eidamas per visus masyvo elementus, atmetė elementus, kurie yra mažesnė ar didesni nei šios ribos: MLS[0]=20,1 &amp;lt; 23,95 ir MLS[12]=29,9 &amp;gt; 24,25. Iš sąlygas tenkinančių reikšmių, ciklas išvedė vidurkį data_avg=24,2. Neišmetus netinkamų verčių, vidurkis gaunasi 24,3.&lt;/p&gt;
&lt;p&gt;Įsitikinęs, kad kodas tikrai veikia, &lt;a class="reference external" href="http://paulius.bautrenas.lt/blog/?p=514"&gt;ankstesniame straipsnyje&lt;/a&gt; aprašytą DHT22 duomenų surinkimo kodą patobulinau taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;  1&lt;/span&gt;  &lt;span class="c1"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class="linenos"&gt;  2&lt;/span&gt;  &lt;span class="c1"&gt;# -\*- coding: utf-8 -\*-&lt;/span&gt;
&lt;span class="linenos"&gt;  3&lt;/span&gt;
&lt;span class="linenos"&gt;  4&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;MySQLdb&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;mdb&lt;/span&gt;
&lt;span class="linenos"&gt;  5&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="linenos"&gt;  6&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;arrow&lt;/span&gt;
&lt;span class="linenos"&gt;  7&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="linenos"&gt;  8&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;
&lt;span class="linenos"&gt;  9&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="linenos"&gt; 10&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="linenos"&gt; 11&lt;/span&gt;  &lt;span class="c1"&gt;#import sys&lt;/span&gt;
&lt;span class="linenos"&gt; 12&lt;/span&gt;
&lt;span class="linenos"&gt; 13&lt;/span&gt;  &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;RPi.GPIO&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;GPIO&lt;/span&gt;
&lt;span class="linenos"&gt; 14&lt;/span&gt;
&lt;span class="linenos"&gt; 15&lt;/span&gt;  &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BCM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;## uses GPIO numbers NOT pin numbers&lt;/span&gt;
&lt;span class="linenos"&gt; 16&lt;/span&gt;  &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setwarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kc"&gt;False&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 17&lt;/span&gt;  &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;## 37 PIN / GPIO26&lt;/span&gt;
&lt;span class="linenos"&gt; 18&lt;/span&gt;
&lt;span class="linenos"&gt; 19&lt;/span&gt;  &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/python/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="linenos"&gt; 20&lt;/span&gt;
&lt;span class="linenos"&gt; 21&lt;/span&gt;  &lt;span class="c1"&gt;#globals for temperature and humidity averaging&lt;/span&gt;
&lt;span class="linenos"&gt; 22&lt;/span&gt;  &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 23&lt;/span&gt;  &lt;span class="n"&gt;hum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 24&lt;/span&gt;
&lt;span class="linenos"&gt; 25&lt;/span&gt;  &lt;span class="c1"&gt;#smart averaging process witch eliminates outlier data points&lt;/span&gt;
&lt;span class="linenos"&gt; 26&lt;/span&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sanity_test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 27&lt;/span&gt;      &lt;span class="n"&gt;MLS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dataList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 28&lt;/span&gt;      &lt;span class="c1"&gt;#print MLS&lt;/span&gt;
&lt;span class="linenos"&gt; 29&lt;/span&gt;      &lt;span class="n"&gt;Q1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;percentile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 30&lt;/span&gt;      &lt;span class="n"&gt;Q3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;percentile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;75&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 31&lt;/span&gt;      &lt;span class="n"&gt;IRQ&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;
&lt;span class="linenos"&gt; 32&lt;/span&gt;      &lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;IRQ&lt;/span&gt;
&lt;span class="linenos"&gt; 33&lt;/span&gt;      &lt;span class="n"&gt;H&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Q1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mf"&gt;1.5&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;IRQ&lt;/span&gt;
&lt;span class="linenos"&gt; 34&lt;/span&gt;      &lt;span class="c1"&gt;#print &amp;quot;L: %s H: %s&amp;quot; %(L,H)&lt;/span&gt;
&lt;span class="linenos"&gt; 35&lt;/span&gt;
&lt;span class="linenos"&gt; 36&lt;/span&gt;  &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 37&lt;/span&gt;      &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 38&lt;/span&gt;      &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
&lt;span class="linenos"&gt; 39&lt;/span&gt;          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;L&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;H&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 40&lt;/span&gt;              &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;MLS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="linenos"&gt; 41&lt;/span&gt;              &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="linenos"&gt; 42&lt;/span&gt;              &lt;span class="c1"&gt;#print &amp;quot;+ i: %s MLS[%s]: %s count: %s&amp;quot; %(i,i,MLS[i],count)&lt;/span&gt;
&lt;span class="linenos"&gt; 43&lt;/span&gt;          &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt; 44&lt;/span&gt;              &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;
&lt;span class="linenos"&gt; 45&lt;/span&gt;              &lt;span class="c1"&gt;#print &amp;quot;- i: %s MLS[%s]: %s count: %s&amp;quot; %(i,i,MLS[i],count)&lt;/span&gt;
&lt;span class="linenos"&gt; 46&lt;/span&gt;
&lt;span class="linenos"&gt; 47&lt;/span&gt;  &lt;span class="n"&gt;data_avg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 48&lt;/span&gt;      &lt;span class="c1"&gt;#print data_avg&lt;/span&gt;
&lt;span class="linenos"&gt; 49&lt;/span&gt;      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;data_avg&lt;/span&gt;
&lt;span class="linenos"&gt; 50&lt;/span&gt;
&lt;span class="linenos"&gt; 51&lt;/span&gt;  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_dht22&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;PiPin&lt;/span&gt; &lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 52&lt;/span&gt;      &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 53&lt;/span&gt;      &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_output&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./Adafruit_DHT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2302&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PiPin&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;span class="linenos"&gt; 54&lt;/span&gt;      &lt;span class="n"&gt;matches&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Temp =&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;s+([-+]?[0-9.]+)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 55&lt;/span&gt;      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 56&lt;/span&gt;          &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;
&lt;span class="linenos"&gt; 57&lt;/span&gt;          &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 58&lt;/span&gt;          &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="linenos"&gt; 59&lt;/span&gt;          &lt;span class="c1"&gt;#print temp&lt;/span&gt;
&lt;span class="linenos"&gt; 60&lt;/span&gt;      &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt; 61&lt;/span&gt;          &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 62&lt;/span&gt;          &lt;span class="c1"&gt;#print &amp;quot;fail&amp;quot;&lt;/span&gt;
&lt;span class="linenos"&gt; 63&lt;/span&gt;      &lt;span class="n"&gt;matches&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hum =&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;s+([0-9.]+)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 64&lt;/span&gt;      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 65&lt;/span&gt;          &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;hum&lt;/span&gt;
&lt;span class="linenos"&gt; 66&lt;/span&gt;          &lt;span class="n"&gt;hum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 67&lt;/span&gt;          &lt;span class="c1"&gt;#print hum&lt;/span&gt;
&lt;span class="linenos"&gt; 68&lt;/span&gt;      &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt; 69&lt;/span&gt;          &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 70&lt;/span&gt;          &lt;span class="c1"&gt;#print &amp;quot;fail&amp;quot;&lt;/span&gt;
&lt;span class="linenos"&gt; 71&lt;/span&gt;      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;success&lt;/span&gt;
&lt;span class="linenos"&gt; 72&lt;/span&gt;
&lt;span class="linenos"&gt; 73&lt;/span&gt;  &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt; 74&lt;/span&gt;      &lt;span class="n"&gt;con&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;USERNAME&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;warehouse&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt; 75&lt;/span&gt;
&lt;span class="linenos"&gt; 76&lt;/span&gt;  &lt;span class="n"&gt;cur&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="linenos"&gt; 77&lt;/span&gt;      &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SELECT VERSION()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 78&lt;/span&gt;
&lt;span class="linenos"&gt; 79&lt;/span&gt;  &lt;span class="n"&gt;ver&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="linenos"&gt; 80&lt;/span&gt;      &lt;span class="n"&gt;sys_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;arrow&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH:mm:ss&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 81&lt;/span&gt;
&lt;span class="linenos"&gt; 82&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Database version : &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;ver&lt;/span&gt;
&lt;span class="linenos"&gt; 83&lt;/span&gt;      &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;sys_date&lt;/span&gt;
&lt;span class="linenos"&gt; 84&lt;/span&gt;
&lt;span class="linenos"&gt; 85&lt;/span&gt;  &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#Turn LED ON, while reading DHT2 sensors&lt;/span&gt;
&lt;span class="linenos"&gt; 86&lt;/span&gt;
&lt;span class="linenos"&gt; 87&lt;/span&gt;  &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt; 88&lt;/span&gt;      &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="linenos"&gt; 89&lt;/span&gt;      &lt;span class="n"&gt;humidity_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="linenos"&gt; 90&lt;/span&gt;      &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 91&lt;/span&gt;          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read_dht22&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
&lt;span class="linenos"&gt; 92&lt;/span&gt;              &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="linenos"&gt; 93&lt;/span&gt;              &lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="linenos"&gt; 94&lt;/span&gt;              &lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hum&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="linenos"&gt; 95&lt;/span&gt;              &lt;span class="c1"&gt;#print &amp;quot;[19] Temp: %s Hum: %s Count: %s&amp;quot; %(temp,hum,count_1)&lt;/span&gt;
&lt;span class="linenos"&gt; 96&lt;/span&gt;          &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="c1"&gt;#print &amp;quot;echem..&amp;quot;&lt;/span&gt;
&lt;span class="linenos"&gt; 97&lt;/span&gt;
&lt;span class="linenos"&gt; 98&lt;/span&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt; 99&lt;/span&gt;          &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sanity_test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;100&lt;/span&gt;          &lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;sanity_test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;101&lt;/span&gt;      &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;
&lt;span class="linenos"&gt;102&lt;/span&gt;
&lt;span class="linenos"&gt;103&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[19] Temperature: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Humidity: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;104&lt;/span&gt;
&lt;span class="linenos"&gt;105&lt;/span&gt;  &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="linenos"&gt;106&lt;/span&gt;      &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="linenos"&gt;107&lt;/span&gt;      &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="linenos"&gt;108&lt;/span&gt;      &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt;109&lt;/span&gt;          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read_dht22&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
&lt;span class="linenos"&gt;110&lt;/span&gt;              &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="linenos"&gt;111&lt;/span&gt;              &lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="linenos"&gt;112&lt;/span&gt;              &lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hum&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="linenos"&gt;113&lt;/span&gt;              &lt;span class="c1"&gt;#print &amp;quot;[1] Temp: %s Hum: %s Count: %s&amp;quot; %(temp,hum,count_2)&lt;/span&gt;
&lt;span class="linenos"&gt;114&lt;/span&gt;          &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="c1"&gt;#print &amp;quot;echem..&amp;quot;&lt;/span&gt;
&lt;span class="linenos"&gt;115&lt;/span&gt;
&lt;span class="linenos"&gt;116&lt;/span&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt;117&lt;/span&gt;          &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sanity_test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;118&lt;/span&gt;          &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sanity_test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;119&lt;/span&gt;      &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;
&lt;span class="linenos"&gt;120&lt;/span&gt;
&lt;span class="linenos"&gt;121&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[13] Temperature: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Humidity: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;122&lt;/span&gt;
&lt;span class="linenos"&gt;123&lt;/span&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt;124&lt;/span&gt;              &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="linenos"&gt;125&lt;/span&gt;&lt;span class="s2"&gt;              VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;126&lt;/span&gt;              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="linenos"&gt;127&lt;/span&gt;
&lt;span class="linenos"&gt;128&lt;/span&gt;  &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt;129&lt;/span&gt;              &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="linenos"&gt;130&lt;/span&gt;&lt;span class="s2"&gt;              VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, NULL,NULL,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;131&lt;/span&gt;              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="linenos"&gt;132&lt;/span&gt;
&lt;span class="linenos"&gt;133&lt;/span&gt;  &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="linenos"&gt;134&lt;/span&gt;              &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="linenos"&gt;135&lt;/span&gt;&lt;span class="s2"&gt;              VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,NULL,NULL, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;136&lt;/span&gt;              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="linenos"&gt;137&lt;/span&gt;
&lt;span class="linenos"&gt;138&lt;/span&gt;  &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt;139&lt;/span&gt;              &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="linenos"&gt;140&lt;/span&gt;&lt;span class="s2"&gt;              VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, NULL,NULL,NULL,NULL, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;141&lt;/span&gt;              &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="linenos"&gt;142&lt;/span&gt;
&lt;span class="linenos"&gt;143&lt;/span&gt;  &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="linenos"&gt;144&lt;/span&gt;
&lt;span class="linenos"&gt;145&lt;/span&gt;  &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;146&lt;/span&gt;
&lt;span class="linenos"&gt;147&lt;/span&gt;  &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;mdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt;148&lt;/span&gt;      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt;149&lt;/span&gt;          &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="linenos"&gt;150&lt;/span&gt;
&lt;span class="linenos"&gt;151&lt;/span&gt;  &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Error &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="linenos"&gt;152&lt;/span&gt;      &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;153&lt;/span&gt;
&lt;span class="linenos"&gt;154&lt;/span&gt;  &lt;span class="k"&gt;finally&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt;155&lt;/span&gt;
&lt;span class="linenos"&gt;156&lt;/span&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="linenos"&gt;157&lt;/span&gt;          &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="linenos"&gt;158&lt;/span&gt;      &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleanup&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Naujausią kodo versiją rasite &lt;a class="reference external" href="https://github.com/pauliusbau/raspberrypi-mayhem/tree/master/RPI-Weather"&gt;mano GitHub saugykloje&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Naudinga literatūra:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.mathwords.com/o/outlier.htm"&gt;http://www.mathwords.com/o/outlier.htm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.mathwords.com/i/interquartile_range.htm"&gt;http://www.mathwords.com/i/interquartile_range.htm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://iaingallagher.tumblr.com"&gt;http://iaingallagher.tumblr.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://ausram.wordpress.com/2009/10/28/kvartiliai"&gt;https://ausram.wordpress.com/2009/10/28/kvartiliai&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://goo.gl/Xy0FQ6"&gt;http://goo.gl/Xy0FQ6&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content><category term="Programavimas"></category><category term="Adafruit_DHT"></category><category term="DHT22"></category><category term="first quartile"></category><category term="interquartile ranges"></category><category term="IRQ"></category><category term="kvartiliai"></category><category term="MySQL"></category><category term="numpy"></category><category term="outliers"></category><category term="Q1"></category><category term="Q3"></category><category term="RaspberriPi"></category><category term="third quartile"></category></entry><entry><title>Avietė: DHT22 -&gt; MySQL</title><link href="https://paulius.bautrenas.lt/aviete-dht22-mysql.html" rel="alternate"></link><published>2014-11-14T12:35:00+02:00</published><updated>2014-11-14T12:35:00+02:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-11-14:/aviete-dht22-mysql.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148.jpg"&gt;&lt;img alt="IMG_7148" class="aligncenter size-medium wp-image-515" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148-625x468.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viena pagrindinių priežasčių, kodėl aš iš viso pirkau RaspberryPi, buvo noras pagaliau prisiversti susidraugauti su linuxu ir kažkiek pramokti python, php, mysql, java, js, ir visokius kitokius šiandien aktualius velnius. Programuoti vien dėl programavimo yra tuščias laiko gaišimas, todėl iš karto reikia daryti kažką naudingo, o ne rašinėti visokius &amp;quot;hello …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148.jpg"&gt;&lt;img alt="IMG_7148" class="aligncenter size-medium wp-image-515" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/IMG_7148-625x468.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viena pagrindinių priežasčių, kodėl aš iš viso pirkau RaspberryPi, buvo noras pagaliau prisiversti susidraugauti su linuxu ir kažkiek pramokti python, php, mysql, java, js, ir visokius kitokius šiandien aktualius velnius. Programuoti vien dėl programavimo yra tuščias laiko gaišimas, todėl iš karto reikia daryti kažką naudingo, o ne rašinėti visokius &amp;quot;hello world&amp;quot;. Vos tik nusipirkęs RPI,&amp;nbsp;nusprendžiau pasidaryti kelių zonų termometrą&amp;nbsp;su istorinių duomenų atvaizdavimo galimybe. Tam, kad spyris į užpakalį kažką daryti būtų kuo stipresnis, nusprendžiau viską programuoti pats. Sukurpiau tokį pradinį planą: Cron jobas kas 5 min. paleidžiai Python scriptą, kuris kelis kartus nuskaito DHT22 jutiklio duomenis, juos suvidurkina ir surašo į MySQL DB.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22.jpg"&gt;&lt;img alt="dht22" class="aligncenter size-full wp-image-521" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22.jpg" style="width: 250px; height: 250px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22-temperature-and-humidty-sensor-circuitry-wiring.jpg"&gt;&lt;img alt="dht22 temperature and humidty sensor circuitry wiring" class="aligncenter size-medium wp-image-522" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22-temperature-and-humidty-sensor-circuitry-wiring-207x300.jpg" style="width: 207px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip jau supratot, pasirinkau &lt;a class="reference external" href="http://www.adafruit.com/datasheets/DHT22.pdf"&gt;DHT22&lt;/a&gt; oro temperatūros ir drėgmės jutiklius. Juos pasirinkau dėl pakankamai mažos kainos (~4$ perkant iš &lt;a class="reference external" href="http://www.aliexpress.com/item/1pcs-DHT22-digital-temperature-and-humidity-sensor-Temperature-and-humidity-module-AM2302-replace-SHT11-SHT15-Free/1956275791.html"&gt;AliExpress&lt;/a&gt;), paprasto prijungimo (1-wire) ir, žinoma, dėl to, kad jau yra sukurta DHT22 duomenų nuskaitymo RPI biblioteka. Prie RPI DHT22 jutiklius prijungiau pagal viršuje dešinėje&amp;nbsp;pateiktą schemą. Projekte naudoju du DHT22 jutiklius, &amp;nbsp;todėl dėl naudojamos&amp;nbsp;DHT22 duomenų nuskaitymo bibliotekos apribojimų, jutiklius teko prijungti prie atskirtų RPI portų. Vieną iš jutiklių prijungiau prie GPIO19, kitą prie GPIO19. Iš principo, kur juos prijungti, skirtumo nėra. Man šie portai tiesiog buvo fiziškai patogiausi.&lt;/p&gt;
&lt;p&gt;Atėjo laikas susidiegti DHT22 nuskaitymo biblioteką. Tam konsolėje įvykdome šią komandą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;git://github.com/adafruit/Adafruit-Raspberry-Pi-Python-Code.git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Po to, jau kaip ir galime nuskaityti duomenis:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/home/Adafruit-Raspberry-Pi-Python-Code/Adafruit_DHT_Driver
sudo&lt;span class="w"&gt; &lt;/span&gt;./Adafruit_DHT&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;22&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;19&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Adafruit_DHT driveris priima du nustatymus: jutiklio versiją (DHT11 ar DHT22) ir porto numerį, prie kurio jutiklis yra prijungtas. Kadangi bandau nuskaityti duomenis iš DHT22 jutiklio, prijungto prie GPIO19 posto, Adafruit_DHT driveriui padaviau šiuos nustatymus: &amp;quot;&lt;em&gt;22 19&lt;/em&gt;&amp;quot;. Rezultatas štai toks:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_s.jpg"&gt;&lt;img alt="dht22_s" class="aligncenter size-full wp-image-526" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_s.jpg" style="width: 276px; height: 50px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;DHT22 yra gan užsispyręs jutiklis, todėl Adafruit_DHT biblioteka ne visuomet sugeba iš jo nuskaityti duomenis. Jei biblioteka negrąžina temperatūros ir santykinės oro drėgmės reikšmių, į jutiklį reikia kreiptis dar bartą. Liuda, bet bent kartą iš penkių jutiklis tikrai negražins mus dominančių duomenų:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_f.jpg"&gt;&lt;img alt="dht22_f" class="aligncenter size-full wp-image-525" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_f.jpg" style="width: 269px; height: 31px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-10-16-improvements-to-collection-of-sensor-data"&gt;Benaršydamas internete&lt;/a&gt;, radau, kad Adrafuit_DHT driveris potencialiai gali &amp;quot;pakabinti&amp;quot; visą sistemą. Potenciali bėda slypi šiame nekaltame driverio kodo gabaliukyje, kuris gali netyčia pereiti į amžiną ciklą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bcm2835_gpio_lev&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;usleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.anginf.de/?p=286"&gt;Protingi žmonės&lt;/a&gt;&amp;nbsp;siūlo šią potencialią klaidą taisyti taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// wait for pin to drop?&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;safety&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;max_wait&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bcm2835_gpio_lev&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;// if no answer, quit&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;safety&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;max_wait&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;}&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;usleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;safety&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pasiklioviau patarimu ir perkompiliavau Adafruit_DHT driverį. Tiesa, teko kiek pavargti, nes norint perkompiliuoti Adafruit_DHT.c, reikėjo pirma atsisiųsti&amp;nbsp;BCM2835 biblioteką, ją susikompiliuoti ir susidiegti. Taip padariau taip (pagal &lt;a class="reference external" href="http://www.anginf.de/?p=286"&gt;šį pavyzdį&lt;/a&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;work/bcm2835
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;work/bcm2835
wget&lt;span class="w"&gt; &lt;/span&gt;http://www.open.com.au/mikem/bcm2835/bcm2835-1.36.tar.gz
tar&lt;span class="w"&gt; &lt;/span&gt;xvfz&lt;span class="w"&gt; &lt;/span&gt;bcm2835-1.36.tar.gz
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;./bcm2835-1.36
./configure
make
sudo&lt;span class="w"&gt; &lt;/span&gt;make&lt;span class="w"&gt; &lt;/span&gt;install
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Patį Adafruit_DHT.c perkompiliavau (žinoma, prieš tai atnaujinęs C kodo gabaliuką) su šia komanda:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;gcc&lt;span class="w"&gt; &lt;/span&gt;Adafruit_DHT.c&lt;span class="w"&gt; &lt;/span&gt;-l&lt;span class="w"&gt; &lt;/span&gt;bcm2835&lt;span class="w"&gt; &lt;/span&gt;-std&lt;span class="o"&gt;=&lt;/span&gt;gnu99&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;Adafruit_DHT
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Na ką, atnaujintas driveris kaip ir veikia. Reikia pasiruošti MySQL duomenų bazę, į kurią rašysim duomenis. Susikūriau MySQL DB pavadinimu &amp;quot;warehouse&amp;quot;, kurioje sukūriau tokią duomenų lentelę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TABLE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;IF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;EXISTS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;duomenys&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_ID&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mediumint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_DATE_CREATED&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;timestamp&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;CURRENT_TIMESTAMP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_ActualDate&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Temperature_1&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Humidity_1&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Temperature_2&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Humidity_2&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Info&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;COLLATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;utf16_lithuanian_ci&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;D_Comments&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;COLLATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;utf16_lithuanian_ci&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="k"&gt;PRIMARY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;D_ID&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ENGINE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;InnoDB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CHARSET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utf16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;COLLATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utf16_lithuanian_ci&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;;[&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sql&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pagal kelis internetiniu pavyzdžius sukurpiau šiokį tokį Python skriptą, kuris nuskaito abiejų DHT22 jutiklių duomenis, juos suvidurkina ir kartu su laiko žyme, surašo į prieš tai sukurtą mysql lentelę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class="c1"&gt;# -\*- coding: utf-8 -\*-&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;MySQLdb&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;mdb&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;arrow&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;RPi.GPIO&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;GPIO&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BCM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;## uses GPIO numbers NOT pin numbers&lt;/span&gt;
&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setwarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kc"&gt;False&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;## 37 PIN / GPIO26&lt;/span&gt;

&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/python/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;#globals for temperature and humidity averaging&lt;/span&gt;
&lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;hum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_dht22&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;PiPin&lt;/span&gt; &lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_output&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./Adafruit_DHT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2302&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PiPin&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
    &lt;span class="n"&gt;matches&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Temp =&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;s+([-+]?[0-9.]+)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;
        &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="c1"&gt;#print temp&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="c1"&gt;#print &amp;quot;fail&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;matches&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hum =&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;s+([0-9.]+)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;hum&lt;/span&gt;
        &lt;span class="n"&gt;hum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;#print hum&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="c1"&gt;#print &amp;quot;fail&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;success&lt;/span&gt;

&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;con&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;USERNAME&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;warehouse&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;cur&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SELECT VERSION()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;ver&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetchone&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;sys_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;arrow&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH:mm:ss&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Database version : &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;ver&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;sys_date&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;#Turn LED ON, while reading DHT2 sensors&lt;/span&gt;

&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;humidity_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read_dht22&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
            &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;humidity_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;humidity_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="c1"&gt;#print &amp;quot;[19] Temp: %s Hum: %s Count: %s&amp;quot; %(temp,hum,count_1)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="c1"&gt;#print &amp;quot;echem..&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;temperature_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[19] Temperature: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Humidity: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read_dht22&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
            &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;humidity_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="c1"&gt;#print &amp;quot;[1] Temp: %s Hum: %s Count: %s&amp;quot; %(temp,hum,count_2)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="c1"&gt;#print &amp;quot;echem..&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;temperature_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;count_2&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[13] Temperature: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; Humidity: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, NULL,NULL,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count_1&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;count_2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;,NULL,NULL, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&amp;quot;INSERT INTO duomenys (D_ActualDate, D_Temperature_1, D_Humidity_1 ,D_Temperature_2, D_Humidity_2, D_Info)&lt;/span&gt;
&lt;span class="s2"&gt;            VALUES ( &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;, NULL,NULL,NULL,NULL, &amp;#39;CronJob&amp;#39;)&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sys_date&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;mdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rollback&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Error &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s2"&gt;: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;finally&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;con&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleanup&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tam, kad skriptas veiktų, reikia susidiegti MySQLdb modulį:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;python-mysqldb
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Skripte panaudojau ir&amp;nbsp;&lt;a class="reference external" href="http://crsmithdev.com/arrow/"&gt;Arrow&lt;/a&gt; laiko apskaitos biblioteką, kurią taip pat reikia susidiegti:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;python-setuptools
sudo&lt;span class="w"&gt; &lt;/span&gt;easy_install&lt;span class="w"&gt; &lt;/span&gt;pip
sudo&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;arrow
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Beje, nepamirškit skripte nurodyti savo mysql naudotojo vardo ir slaptažodžio ;)&lt;/p&gt;
&lt;p&gt;Patogumo dėlei, paruoštą skirptą (jį pavadinau mysql_dht.py) ir perkompiliuotą Adafruit_DHT driverį nukopijavau į /home/python direktoriją. Jei naudojate kitą direktoriją, ją nurodykite skirpto eilutėje &amp;quot;os.chdir(os.path.abspath('&lt;strong&gt;/home/python/&lt;/strong&gt;'))&amp;quot;, kitaip skriptas neveiks.&lt;/p&gt;
&lt;p&gt;Ar skriptas veikia, galima pasitikrinti tiesiai iš konsolės:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;/home/python/mysql_dht.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Turėtumėte gauti tokį rezultatą:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql.jpg"&gt;&lt;img alt="dht22_mysql" class="aligncenter wp-image-535 size-full" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql.jpg" style="width: 422px; height: 96px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jeigu gaunate tokią klaidą, įsitikinkite ar Adafruit_DHT driveris yra tikrai toje pačioje direktorijoje, kaip ir pats mysql_dht.py skirptas:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql_error.jpg"&gt;&lt;img alt="dht22_mysql_error" class="aligncenter size-full wp-image-536" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/dht22_mysql_error.jpg" style="width: 624px; height: 257px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jei skriptas veikia gerai, galima užkurti automatinį jo vykdymą. Tam panaudojau Cron:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;crontab&lt;span class="w"&gt; &lt;/span&gt;-e
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Atsidariusiame lange, pačioje apačioje įrašiau tokią eilutę:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,5,10,15,20,25,30,35,40,45,50,55&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;/home/python/mysql_dht.py&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Išsaugojus failą, mūsų skriptas bus įvykdomas kas 5 minutes. Simbolis &amp;quot;&amp;amp;&amp;quot; eilutės gale reiškia, kad procesas bus vykdomas fone ir netrukdys sistemos darbui.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/mysql.jpg"&gt;&lt;img alt="mysql" class="aligncenter size-full wp-image-539" src="https://paulius.bautrenas.lt/images/aviete-dht22-mysql/mysql.jpg" style="width: 873px; height: 406px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ar Cron jobas veikia, gerai parodo mysql duomenys. Jei duomenys tvarkingai atsigula į nurodytą lentelę, galima eiti gerti kavos :D&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tinginiams:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Perkompiliuotą Adafruit_DHT driverį ir naujausią mano kodo versiją rasite &lt;a class="reference external" href="https://github.com/pauliusbau/raspberrypi-mayhem/tree/master/RPI-Weather"&gt;mano GitHub saugykloje&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Naudinga literatūra:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.raspipress.com/2012/09/tutorial-install-phpmyadmin-on-your-raspberry-pi"&gt;http://www.raspipress.com/2012/09/tutorial-install-phpmyadmin-on-your-raspberry-pi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://zetcode.com/db/mysqlpython/"&gt;http://zetcode.com/db/mysqlpython/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.raspberrypi.org/forums/viewtopic.php?f=32&amp;amp;t=79597"&gt;http://www.raspberrypi.org/forums/viewtopic.php?f=32&amp;amp;t=79597&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-07-20-adding-a-dht-sensor-to-the-raspberry-pi"&gt;http://sharedmemorydump.net/post/2013-07-20-adding-a-dht-sensor-to-the-raspberry-pi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-10-16-improvements-to-collection-of-sensor-data"&gt;http://sharedmemorydump.net/post/2013-10-16-improvements-to-collection-of-sensor-data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://sharedmemorydump.net/post/2013-07-18-logging-data-temperature-with-raspberry-pi"&gt;http://sharedmemorydump.net/post/2013-07-18-logging-data-temperature-with-raspberry-pi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.anginf.de/?p=286"&gt;http://www.anginf.de/?p=286&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.raspberrypi-spy.co.uk/2013/07/running-a-python-script-at-boot-using-cron/"&gt;http://www.raspberrypi-spy.co.uk/2013/07/running-a-python-script-at-boot-using-cron/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://serverfault.com/questions/248305/running-cron-on-every-10-minutes"&gt;http://serverfault.com/questions/248305/running-cron-on-every-10-minutes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://alvinalexander.com/linux/unix-linux-crontab-every-minute-hour-day-syntax"&gt;http://alvinalexander.com/linux/unix-linux-crontab-every-minute-hour-day-syntax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://askubuntu.com/questions/56683/where-is-the-cron-crontab-log"&gt;http://askubuntu.com/questions/56683/where-is-the-cron-crontab-log&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/26124363/how-to-keep-run-python-program-in-background-on-raspberry-pi-after-terminate-ssh"&gt;http://stackoverflow.com/questions/26124363/how-to-keep-run-python-program-in-background-on-raspberry-pi-after-terminate-ssh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://stackoverflow.com/questions/24161476/subprocess-popen-simple-code-not-working"&gt;http://stackoverflow.com/questions/24161476/subprocess-popen-simple-code-not-working&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Bonus:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Norintiems, bet negalintiems prisijungti prie MySQL DB, kuri sukasi jūsų RPI, siūlau pasiskaityti čia: &lt;a class="reference external" href="http://stackoverflow.com/questions/18733802/how-do-i-open-up-my-mysql-on-my-raspberry-pi-for-outside-remote-connections"&gt;http://stackoverflow.com/questions/18733802/how-do-i-open-up-my-mysql-on-my-raspberry-pi-for-outside-remote-connections&lt;/a&gt;&amp;nbsp;Man padėjo! ;)&lt;/p&gt;
</content><category term="Elektronika"></category><category term="Adafruit DHT"></category><category term="Adafruit_DHT"></category><category term="AM2303"></category><category term="avietė"></category><category term="cron"></category><category term="DHT22"></category><category term="gcc"></category><category term="logging"></category><category term="MySQL"></category><category term="Python"></category><category term="RaspberriPi"></category><category term="recompile"></category><category term="RPI"></category></entry><entry><title>JasperServer JFreeChart grafiko išvaizdos tobulinimas su "Customizer Class"</title><link href="https://paulius.bautrenas.lt/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class.html" rel="alternate"></link><published>2014-10-09T15:15:00+03:00</published><updated>2014-10-09T15:15:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-10-09:/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart.jpg"&gt;&lt;img alt="jfreechart" class="aligncenter wp-image-420 size-medium" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart-300x254.jpg" style="width: 300px; height: 254px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Įrašas bus apie taip, kaip gan paprastai galima pagal asmeninius poreikius pasikeisti JasperServer grafikų išvaizdą. Tikriausiai žinot, kad grafikai tiek iReport'e tiek pačiame JasperServer grafikai yra išpiešiami naudojant &lt;a class="reference external" href="http://www.jfree.org/jfreechart/"&gt;JFreeChart&lt;/a&gt; komponentą. iReport šiek tiek leidžia keisti grafiko išvaizdą, bet nepakankamai. Kažkodėl programuotojai iReport'e sukūrė tik galimybę keisti tik grafiko elementų (linijų …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart.jpg"&gt;&lt;img alt="jfreechart" class="aligncenter wp-image-420 size-medium" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart-300x254.jpg" style="width: 300px; height: 254px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Įrašas bus apie taip, kaip gan paprastai galima pagal asmeninius poreikius pasikeisti JasperServer grafikų išvaizdą. Tikriausiai žinot, kad grafikai tiek iReport'e tiek pačiame JasperServer grafikai yra išpiešiami naudojant &lt;a class="reference external" href="http://www.jfree.org/jfreechart/"&gt;JFreeChart&lt;/a&gt; komponentą. iReport šiek tiek leidžia keisti grafiko išvaizdą, bet nepakankamai. Kažkodėl programuotojai iReport'e sukūrė tik galimybę keisti tik grafiko elementų (linijų, stulpelių ir pan.) spalvą, bet nerealizavo galimybės keisti linijų stilių, išpiešimo eiliškumą ir kitus naudingus parametrus. Yra kaip yra. Viską kitą yra gan lengvai padaroma su/per java Customizer Class.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart_2.jpg"&gt;&lt;img alt="jfreechart_2" class="aligncenter size-large wp-image-421" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart_2-1024x429.jpg" style="width: 625px; height: 261px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Na apie viską iš pradžių. Turių iReport &amp;quot;multi axis&amp;quot; grafiką, kuriame stulpeliais yra išpiešiamas atvaizduojamų duomenų laiko intervalas, o linijiniu grafiku (line chart, ne XY!) yra išpiešiamas tam tikrų duomenų kitimas laike. Linijų (angl. &lt;em&gt;series&lt;/em&gt;) iš viso yra net 15. Linijos dažnai persidengia ir linijas vaizduojant vien skirtingomis spalvomis yra labai sunku suprasti, kas kur ir kaip. Seniai žinojau, kad grafiko stilių galima keisti tam tikrais java kustomizatoriais (Customizer Class), tačiau ilgą laiką išsiversdavau ir be jų. Vieną kartą reikalas prispyrė, o nuo ko pradėti nežinojau. Ant tiesos kelio užvedė šis video: &lt;a class="reference external" href="http://goo.gl/DYWAVx"&gt;http://goo.gl/DYWAVx&lt;/a&gt;, kuriame šaunus indas demonstruoja nuo ko ir kaip reikia pradėti visą šį jovalą.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse.jpg"&gt;&lt;img alt="eclipse" class="aligncenter size-large wp-image-432" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse-1024x770.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Norint pradėti, pirmiausiai, reikia parsisiųsti &lt;a class="reference external" href="https://projects.eclipse.org/releases/luna"&gt;Eclipse Luna&lt;/a&gt; java kompiliatorių. Bandžiau NetBeans, nepatiko. Taip pat reikės ir &lt;a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index-jsp-138363.html"&gt;Java SE SDK&lt;/a&gt;. Viską susidiegus, reikia susikurti naują Eclipse projektą. Kadangi pats dariau viską pagal ankščiau aprašytą &lt;a class="reference external" href="http://goo.gl/DYWAVx"&gt;youtube filmuką&lt;/a&gt;, tad projektą pasivadinau &amp;quot;CustomLegendList&amp;quot; vardu. Kuriant naują projektą yra labai svarbu teisingai pasirinkti tinkamą JRE aplinką. Pasirinkau &amp;quot;CDC-1.1/Foundation-1.1. Paspaudus &amp;quot;next&amp;quot;, kompiliatorius užklaus papildomų java nustatymų.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_newproject.jpg"&gt;&lt;img alt="eclipse_newproject" class="aligncenter size-full wp-image-430" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_newproject.jpg" style="width: 400px; height: 463px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_javasettings.jpg"&gt;&lt;img alt="eclipse_javasettings" class="aligncenter size-full wp-image-433" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_javasettings.jpg" style="width: 400px; height: 463px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Perėjus į nustatymo lango kortelę &amp;quot;Libraries&amp;quot;, mygtuku &amp;quot;Add External JARs...&amp;quot; &lt;strong&gt;būtina įtraukti&lt;/strong&gt; šiais bibliotekas: &lt;strong&gt;jasperreports-5.5.0.jar&lt;/strong&gt;, &lt;strong&gt;jcommon-1.0.15.jar&lt;/strong&gt; ir &lt;strong&gt;jfreechart-1.0.12.jar&lt;/strong&gt;. Jas rasite savo JasperServer lib direktorijoje. Kelias iki direktorijos, mano atveju, buvo toks: &amp;quot;C:\Program Files\jasperreports-server-cp-5.0.0\apache-tomcat\webapps\jasperserver\WEB-INF\lib&amp;quot;. Kadangi mano jasperis gyvena nutolusiame serveryje, todėl visą lib direktoriją tiesiog persikopijavau į savo lokalų PC, į Eclipse direktoriją. Tiesa, jei bibliotekų projekto kūrimo stadijoje neįtrauksite, tai visada galėsite padaryti projekto savybių (angl. &lt;em&gt;properties&lt;/em&gt;) lange:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/bibliotekos.jpg"&gt;&lt;img alt="bibliotekos" class="aligncenter size-full wp-image-431" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/bibliotekos.jpg" style="width: 800px; height: 460px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Toliau mūsų sukurtame projekte ant katalogo &amp;quot;src&amp;quot; spaudžiam dešinį pelės klavišą ir susikuriame naują paketą, kurį pavadiname &amp;quot;Customizer&amp;quot;. Paketo pavadinimas yra ypač svarbus, nes jis bus naudojamas iReport'o grafiko nustatymuose.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_newpackage.jpg"&gt;&lt;img alt="eclipse_newpackage" class="aligncenter size-full wp-image-436" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_newpackage.jpg" style="width: 400px; height: 418px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_newpackage2.jpg"&gt;&lt;img alt="eclipse_newpackage2" class="aligncenter size-full wp-image-435" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_newpackage2.jpg" style="width: 400px; height: 381px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Po to reikia susikurti naują klasę (angl. &lt;em&gt;Class&lt;/em&gt;), kurią, paprastumo dėlei, irgi pavadinkime &amp;quot;customizer&amp;quot;:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_class.jpg"&gt;&lt;img alt="eclipse_class" class="aligncenter size-full wp-image-438" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_class.jpg" style="width: 400px; height: 442px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_class2.jpg"&gt;&lt;img alt="eclipse_class2" class="aligncenter size-full wp-image-437" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_class2.jpg" style="width: 400px; height: 470px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Atsidariusiame darbo lape jau galima rašyti mūsų customize calss'ę. Štai ką po ilgo googlinimo &amp;quot;pribūriau&amp;quot;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;Customizer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;java.awt.BasicStroke&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;java.awt.Color&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.jfree.chart.JFreeChart&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.jfree.chart.plot.CategoryPlot&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.jfree.chart.title.LegendTitle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.jfree.ui.RectangleEdge&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;org.jfree.util.ShapeUtilities&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;net.sf.jasperreports.engine.JRChart&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;net.sf.jasperreports.engine.JRChartCustomizer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;customizer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;implements&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;JRChartCustomizer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;customize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;JFreeChart&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;chart&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;JRChart&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;jasperChart&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;
&lt;span class="linenos"&gt;20&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;LegendTitle&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;chart&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLegend&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;21&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;legend&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setPosition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RectangleEdge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;BOTTOM&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt;22&lt;/span&gt;
&lt;span class="linenos"&gt;23&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;CategoryPlot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CategoryPlot&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;chart&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPlot&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="linenos"&gt;24&lt;/span&gt;
&lt;span class="linenos"&gt;25&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;//J1 - J5&lt;/span&gt;
&lt;span class="linenos"&gt;26&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;27&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;28&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;29&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;30&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;31&lt;/span&gt;
&lt;span class="linenos"&gt;32&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesShape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ShapeUtilities&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createDiamond&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;33&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesShape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ShapeUtilities&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createDiamond&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;34&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesShape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ShapeUtilities&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createDiamond&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;35&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesShape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ShapeUtilities&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createDiamond&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;36&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesShape&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ShapeUtilities&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createDiamond&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;37&lt;/span&gt;
&lt;span class="linenos"&gt;38&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;//J1_TP1 - J5_TP1&lt;/span&gt;
&lt;span class="linenos"&gt;39&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;40&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;41&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;42&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;43&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;44&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;45&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;46&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;47&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;48&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;49&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;50&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;51&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;52&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;53&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;54&lt;/span&gt;
&lt;span class="linenos"&gt;55&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;//J1_TP0 - T5_TP0&lt;/span&gt;
&lt;span class="linenos"&gt;56&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;57&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;58&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;2.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;59&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;60&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;61&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;2.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;62&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;63&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;64&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;2.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;65&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;66&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;67&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;2.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;68&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getRenderer&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setSeriesStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt;69&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CAP_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BasicStroke&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;JOIN_ROUND&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;70&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mf"&gt;2.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6.0f&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="linenos"&gt;71&lt;/span&gt;
&lt;span class="linenos"&gt;72&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="linenos"&gt;73&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kodas veikia gan paprastai. Praleidus visokių bibliotekų įtraukimus ir naudojamų metodų aprašymus lieka tik krūva eilučių su aibe funkcijų, kurios ir atlieka tam tikrą darbą:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;.setSeriesStroke(0, new BasicStroke(3.0f))&lt;/strong&gt; - nustato linijos storį pasirinktai kreivei (šiuo atveju pirmai, nes kreivės yra skaičiuojamos nuo nulio).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;.setSeriesShape(0, ShapeUtilities.createDiamond(6))&lt;/strong&gt; - nustato pasirinktų linijų grafinį žymėjimą, šiuo atveju pirmai kreivei yra priskiriamas deimanto simbolis.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;.setSeriesStroke(5, new BasicStroke(1.0f, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND,1.0f, new float[] {6.0f, 6.0f}, 0.0f))&lt;/strong&gt; - nustato pasirinktos linijos stilių, šiuo atveju šešta linija yra piešiama punktyru.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Beliko kodą susikompiliuoti. Tam ant darbo lapo customizer.java spaudžiam dešiniu klavišu ir pasirenkam &amp;quot;Export&amp;quot;:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export.jpg"&gt;&lt;img alt="eclipse_export" class="aligncenter size-medium wp-image-444" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export.jpg" style="width: 400px; height: 546px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Atsidariusiame wizard'e, šuoliuojam per žingsnius, nurodome katalogą, į kurį norime padėti sukompiliuotą jar failą:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export2.jpg"&gt;&lt;img alt="eclipse_export2" class="aligncenter wp-image-443 size-full" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export2.jpg" style="width: 400px; height: 473px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export3.jpg"&gt;&lt;img alt="eclipse_export3" class="aligncenter wp-image-442 size-full" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export3.jpg" style="width: 400px; height: 473px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kur reikia nuimame ir uždedame varneles:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export3.jpg"&gt;&lt;img alt="image1" class="aligncenter size-full wp-image-442" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export3.jpg" style="width: 400px; height: 473px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export5.jpg"&gt;&lt;img alt="eclipse_export5" class="aligncenter size-full wp-image-440" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/eclipse_export5.jpg" style="width: 400px; height: 473px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viską atlikę, ankščiau nurodytame kataloge rasite jau pilnai paruoštą ir sukompiliuotą failą (tingintiems kompliuoti, savo failo varaitą įkėliau čia: &lt;a class="reference external" href="https://paulius.bautrenas.lt/files/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/customizer.zip"&gt;customizer.zip&lt;/a&gt;), ką gi dabar daryti su juo?&lt;/p&gt;
&lt;p&gt;Pirmiausia, sukompiliuotą JAR failą reikią įtraukti į iReport ClassPath. Rekomenduoju nustatymų lange ties įtrauktu JAR failu įjungti varnelę &amp;quot;Reloadable&amp;quot;. &amp;quot;Reloadable&amp;quot; reiškia, kad konkretus JAR failas bus kiekvieną kartą iš naujo užkraunamas ataskaitos generavimo metu. Kitu atveju, JAR failas bus užkrautas tik vieną kartą, iReport paleidimo metu. &amp;quot;Reloadable&amp;quot; yra pravartu tada, kai programuojate pačia cusstomize klasę, nes nereikią kiek vieną kartą perkrauti iReport, o užtenka tik iš naujo susigeneruoti ataskaitą.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/ireport_classpath.jpg"&gt;&lt;img alt="ireport_classpath" class="aligncenter size-full wp-image-450" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/ireport_classpath.jpg" style="width: 859px; height: 755px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Po to, konkretaus grafiko savybių (angl. &lt;em&gt;Properties&lt;/em&gt;) lange reikia nurodyti &amp;quot;Customizer Class&amp;quot;. Tam skirtame langelyje įrašome&amp;nbsp; paketo ir klasės pavadinimą. Mūsų atveju, t. y. &amp;quot;Customizer.customizer&amp;quot;. Toks įdomus pastebėjimas: keista, bet nurodžius klasę bendrai Multi Axis grafikui, ji yra, kažkodėl, pritaikoma tik pirmam iš eilės einančiam grafikui. Kiek bandžiau programiškai prisikasti iki kitų grafikų, man niekaip to padaryti nepavyko. Manau, kad čia yra pačio iReport niuansas arba tiesiog pats kažko nežinau... Na bet kokiu atveju, jei norite keisti tik vieno iš Multi Axis grafiko grafikų stilių, &amp;quot;Customizer Class&amp;quot; nurodykite tik jam, o ne bendrai Multi Axis grafikui. Taip tikrai viskas veiks.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/ireport_chart.jpg"&gt;&lt;img alt="ireport_chart" class="aligncenter size-full wp-image-453" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/ireport_chart.jpg" style="width: 399px; height: 471px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/ireport_chart_class.jpg"&gt;&lt;img alt="ireport_chart_class" class="aligncenter size-full wp-image-451" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/ireport_chart_class.jpg" style="width: 350px; height: 369px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viską atlikus, iš naujo sugeneruotoje ataskaitoje grafikas turėtų įgauti naują, programiškai nustatytą stilių. Mano grafikas po pakeitimų atrodo maždaug taip:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart_1.jpg"&gt;&lt;img alt="jfreechart_1" class="aligncenter size-large wp-image-422" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jfreechart_1-1024x430.jpg" style="width: 625px; height: 262px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Norint, kad pakeitimai veiktų ir JasperServer Respository gulinčiai ataskaitai, į konkrečios ataskaitos Resources katalogą reikią įkelti mūsų sukompiliuotą JAR failą. Įkeliamą failą reiktų užvadinti tuo pačiu faile naudojamu java klasės pavadinimu, pav. &amp;quot;Customizer&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jasper_respository.jpg"&gt;&lt;img alt="jasper_respository" class="aligncenter size-full wp-image-456" src="https://paulius.bautrenas.lt/images/jasperserver-jfreechart-grafiko-isvaizdos-tobulinimas-su-customizer-class/jasper_respository.jpg" style="width: 373px; height: 507px;" /&gt;&lt;/a&gt;&lt;/p&gt;
</content><category term="Programavimas"></category><category term="Customizer Class"></category><category term="dash line"></category><category term="dashed line"></category><category term="eclipse"></category><category term="iReport"></category><category term="JasperServer"></category><category term="java"></category><category term="jfreechart"></category><category term="punktyrinė linija"></category><category term="spalva"></category><category term="stilius"></category></entry><entry><title>Keistas daiktas naujoje Škodoje</title><link href="https://paulius.bautrenas.lt/keistas-daiktas.html" rel="alternate"></link><published>2014-09-12T11:15:00+03:00</published><updated>2014-09-12T11:15:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-09-12:/keistas-daiktas.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628.jpg"&gt;&lt;img alt="IMG_6628.JPG" class="aligncenter size-large wp-image-393" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629.jpg"&gt;&lt;img alt="IMG_6629.JPG" class="aligncenter size-large wp-image-392" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Neseniai visiškai naujoje (ką tik iš salono) škodoje radom štai tokį įdomų daikčiuką. Buvo įdėtas asmeninių daiktų skyrelyje tarp priekinių sėdynių. Daikto dydis kaip kokios Nokia 3310, korpusas visiškai hermetiškas. Ant priekinio dangtelio tik lazeriu išdegintas ID numeris ir du diodai. Vienas visiškai neaktyvus, kitas mirsi priklausomai nuo daikto padėties …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628.jpg"&gt;&lt;img alt="IMG_6628.JPG" class="aligncenter size-large wp-image-393" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6628-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629.jpg"&gt;&lt;img alt="IMG_6629.JPG" class="aligncenter size-large wp-image-392" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6629-1024x768.jpg" style="width: 400px; height: 300px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Neseniai visiškai naujoje (ką tik iš salono) škodoje radom štai tokį įdomų daikčiuką. Buvo įdėtas asmeninių daiktų skyrelyje tarp priekinių sėdynių. Daikto dydis kaip kokios Nokia 3310, korpusas visiškai hermetiškas. Ant priekinio dangtelio tik lazeriu išdegintas ID numeris ir du diodai. Vienas visiškai neaktyvus, kitas mirsi priklausomai nuo daikto padėties žemės atžvilgiu. Užpakalinė daikto dalis gan įdomios formos ir puikiai limpa prie metalo (viduje 4 stiprūs neodiminiai magnetai). Išardėm..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6635.jpg"&gt;&lt;img alt="IMG_6635.JPG" class="aligncenter size-large wp-image-395" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6635-768x1024.jpg" style="width: 400px; height: 533px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6634.jpg"&gt;&lt;img alt="IMG_6634.JPG" class="aligncenter size-large wp-image-394" src="https://paulius.bautrenas.lt/images/keistas-daiktas/IMG_6634-768x1024.jpg" style="width: 400px; height: 533px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Viduje PCD buvo sąžiningai užpilta silikonu, kuris labai lengvai nusikrapštė. Ant PCB nieko per daug įdomaus:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.semtech.com/images/datasheet/sx1211.pdf"&gt;SX1211&lt;/a&gt; - Semtech&amp;nbsp;863-870, 902-928 MHz ir 950-960 MHz transiveris&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.ti.com/lit/ds/symlink/cc2590.pdf"&gt;CC2590&lt;/a&gt; -&amp;nbsp;2.4 GHz Range Extender /&amp;nbsp;2.4-GHz RF Front End&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/39582b.pdf"&gt;PIC16F87XA&lt;/a&gt; - Microchip PIC mikrovaldiklis&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.analog.com/static/imported-files/data_sheets/ADXL345.pdf"&gt;ADXL345&lt;/a&gt; - 3 ašių akselerometras&lt;/li&gt;
&lt;li&gt;Nanotron Nanoloc NLS60501 -&amp;nbsp;&lt;a class="reference external" href="http://www.nanotron.com/EN/pdf/Factsheet_nanoLOC-NA5TR1.pdf"&gt;nanoLOC TRX serijos&lt;/a&gt; transiveris&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.adestotech.com/sites/default/files/datasheets/doc3668.pdf"&gt;AT25DF041A&lt;/a&gt;&amp;nbsp;-&amp;nbsp;4 megabit&amp;nbsp;SPI Serial Flash&lt;/li&gt;
&lt;li&gt;DC/DC - markė neaiški&lt;/li&gt;
&lt;li&gt;Keli kvarcai&lt;/li&gt;
&lt;li&gt;Daug apkabinimo detalių&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Daiktą pagamino čekų kompanija &amp;quot;&lt;a class="reference external" href="http://www.cutter.cz/"&gt;Cutter Systems spol.&lt;/a&gt;&amp;quot;, besispecializuojanti įvairių objektų sekimo ir monitoringo sistemose. &amp;nbsp;Kiek išsiskaitėm internete, labiausi panašu, kad šis neaiškus daiktas yra škodos gamybos linijos ID trackeris ar kažkas panašaus, pagal kurį kiekviena gamybos linijos celė identifikuoja, ką konkrečiai reikia daryti su kiekviena mašina.&lt;/p&gt;
&lt;p&gt;Gal kas turit konkrečių žinių apie šį daiktą?&lt;/p&gt;
</content><category term="Elektronika"></category><category term="cutter systems spol"></category><category term="keistas daiktas"></category><category term="NSI_Tag_v1.21"></category><category term="škoda"></category></entry><entry><title>Laiko rėžis datos rėžio oracle užklausoje</title><link href="https://paulius.bautrenas.lt/laiko-rezis-datos-rezio-oracle-uzklausoje.html" rel="alternate"></link><published>2014-08-27T12:04:00+03:00</published><updated>2014-08-27T12:04:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-08-27:/laiko-rezis-datos-rezio-oracle-uzklausoje.html</id><summary type="html">&lt;p&gt;&lt;img alt="sql_date_time" class="aligncenter wp-image-365 size-full" src="https://paulius.bautrenas.lt/images/laiko-rezis-datos-rezio-oracle-uzklausoje/sql_date_time.jpg" style="width: 551px; height: 148px;" /&gt;&lt;/p&gt;
&lt;p&gt;Laikas nuo laiko tenka ištraukti tam tikrų valandų kelių dienų duomenis, pav. gauti duomenis už praėjusio mėnesio kiekvieną dieną 08:00–09:00 valandomis. Kartais pasitaiko dar įdomesni poreikiai, pav. gauti tam tikro laiko intervalo duomenis tik savaitgaliais arba tik konkrečią dieną (pav. tik antradieniais ir pan.). Užduotis paprasta, bet …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="sql_date_time" class="aligncenter wp-image-365 size-full" src="https://paulius.bautrenas.lt/images/laiko-rezis-datos-rezio-oracle-uzklausoje/sql_date_time.jpg" style="width: 551px; height: 148px;" /&gt;&lt;/p&gt;
&lt;p&gt;Laikas nuo laiko tenka ištraukti tam tikrų valandų kelių dienų duomenis, pav. gauti duomenis už praėjusio mėnesio kiekvieną dieną 08:00–09:00 valandomis. Kartais pasitaiko dar įdomesni poreikiai, pav. gauti tam tikro laiko intervalo duomenis tik savaitgaliais arba tik konkrečią dieną (pav. tik antradieniais ir pan.). Užduotis paprasta, bet dėl to, kad tai daryti tenka ne dažnai, vis pamirštu konkrečią sintaksę. Tenka pasikelti senus failus, juose ieškoti konkretaus sprendimo. Taip daryti nusibodo ir nusprendžiau savo naudojamą techniką aprašyti čia. Gal kam nors irgi pravers...&lt;/p&gt;
&lt;p&gt;Tarkim, turim lentelę &lt;em&gt;t&lt;/em&gt;, kurioje yra saugomi maždaug mėnesio &lt;em&gt;date&lt;/em&gt; tipo įrašai, kas 15 minučių. Pasibandymui (pav. ant &lt;a class="reference external" href="http://sqlfiddle.com"&gt;sqlfiddle.com&lt;/a&gt;) tokią lentelę galit pasigaminti taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;table&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;number&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;insert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;rownum&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rownum&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;CONNECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LEVEL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-27 00:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01 00:00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pačiam paprasčiausiam duomenų ištraukimui galima panaudoti tokį selectą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Select sakinio rezultatas yra maždaug toks:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  ID DT
&lt;span class="linenos"&gt; 2&lt;/span&gt;  -- ------------------
&lt;span class="linenos"&gt; 3&lt;/span&gt;  1 2014-08-01 00:00:00
&lt;span class="linenos"&gt; 4&lt;/span&gt;  2 2014-08-01 00:15:00
&lt;span class="linenos"&gt; 5&lt;/span&gt;  3 2014-08-01 00:30:00
&lt;span class="linenos"&gt; 6&lt;/span&gt;  4 2014-08-01 00:45:00
&lt;span class="linenos"&gt; 7&lt;/span&gt;  .... .....
&lt;span class="linenos"&gt; 8&lt;/span&gt;  2493 2014-08-26 23:00:00
&lt;span class="linenos"&gt; 9&lt;/span&gt;  2494 2014-08-26 23:15:00
&lt;span class="linenos"&gt;10&lt;/span&gt;  2495 2014-08-26 23:30:00
&lt;span class="linenos"&gt;11&lt;/span&gt;  2496 2014-08-26 23:45:00
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pabandyk šiuose 2496 įrašuose atsirinkti 2014-08-01 – 2014-08-03&amp;nbsp;dienų &amp;quot;duomenis&amp;quot; nuo 08:00 iki 09:00. Tam prieš tai buvusi selectą papildom taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;
&lt;span class="linenos"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;span class="linenos"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt;5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;
&lt;span class="linenos"&gt;6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;between&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-03&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;08:00:00&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;09:00:00&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Užklausos rezultatas gaunasi toks:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  ID DT
&lt;span class="linenos"&gt; 2&lt;/span&gt;  --- -------------------
&lt;span class="linenos"&gt; 3&lt;/span&gt;  33 2014-08-01 08:00:00
&lt;span class="linenos"&gt; 4&lt;/span&gt;  34 2014-08-01 08:15:00
&lt;span class="linenos"&gt; 5&lt;/span&gt;  35 2014-08-01 08:30:00
&lt;span class="linenos"&gt; 6&lt;/span&gt;  36 2014-08-01 08:45:00
&lt;span class="linenos"&gt; 7&lt;/span&gt;  37 2014-08-01 09:00:00
&lt;span class="linenos"&gt; 8&lt;/span&gt;  129 2014-08-02 08:00:00
&lt;span class="linenos"&gt; 9&lt;/span&gt;  130 2014-08-02 08:15:00
&lt;span class="linenos"&gt;10&lt;/span&gt;  131 2014-08-02 08:30:00
&lt;span class="linenos"&gt;11&lt;/span&gt;  132 2014-08-02 08:45:00
&lt;span class="linenos"&gt;12&lt;/span&gt;  133 2014-08-02 09:00:00
&lt;span class="linenos"&gt;13&lt;/span&gt;  225 2014-08-03 08:00:00
&lt;span class="linenos"&gt;14&lt;/span&gt;  226 2014-08-03 08:15:00
&lt;span class="linenos"&gt;15&lt;/span&gt;  227 2014-08-03 08:30:00
&lt;span class="linenos"&gt;16&lt;/span&gt;  228 2014-08-03 08:45:00
&lt;span class="linenos"&gt;17&lt;/span&gt;  229 2014-08-03 09:00:00
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Dabar pabandykim išsitraukti 2014-08-01 – 2014-08-15 periodo savaitgalių duomenis nuo 08:00 iki 09:00.&amp;nbsp;Tam prieš tai buvusi selectą papildom taip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;between&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-15&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sat&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sun&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;08:00:00&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;09:00:00&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Įvykdę užklausą, gaunam štai ką:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  ID DT
&lt;span class="linenos"&gt; 2&lt;/span&gt;  --- -------------------
&lt;span class="linenos"&gt; 3&lt;/span&gt;  129 2014-08-02 08:00:00
&lt;span class="linenos"&gt; 4&lt;/span&gt;  130 2014-08-02 08:15:00
&lt;span class="linenos"&gt; 5&lt;/span&gt;  131 2014-08-02 08:30:00
&lt;span class="linenos"&gt; 6&lt;/span&gt;  132 2014-08-02 08:45:00
&lt;span class="linenos"&gt; 7&lt;/span&gt;  133 2014-08-02 09:00:00
&lt;span class="linenos"&gt; 8&lt;/span&gt;  225 2014-08-03 08:00:00
&lt;span class="linenos"&gt; 9&lt;/span&gt;  226 2014-08-03 08:15:00
&lt;span class="linenos"&gt;10&lt;/span&gt;  227 2014-08-03 08:30:00
&lt;span class="linenos"&gt;11&lt;/span&gt;  228 2014-08-03 08:45:00
&lt;span class="linenos"&gt;12&lt;/span&gt;  229 2014-08-03 09:00:00
&lt;span class="linenos"&gt;13&lt;/span&gt;  801 2014-08-09 08:00:00
&lt;span class="linenos"&gt;14&lt;/span&gt;  802 2014-08-09 08:15:00
&lt;span class="linenos"&gt;15&lt;/span&gt;  803 2014-08-09 08:30:00
&lt;span class="linenos"&gt;16&lt;/span&gt;  804 2014-08-09 08:45:00
&lt;span class="linenos"&gt;17&lt;/span&gt;  805 2014-08-09 09:00:00
&lt;span class="linenos"&gt;18&lt;/span&gt;  897 2014-08-10 08:00:00
&lt;span class="linenos"&gt;19&lt;/span&gt;  898 2014-08-10 08:15:00
&lt;span class="linenos"&gt;20&lt;/span&gt;  899 2014-08-10 08:30:00
&lt;span class="linenos"&gt;21&lt;/span&gt;  900 2014-08-10 08:45:00
&lt;span class="linenos"&gt;22&lt;/span&gt;  901 2014-08-10 09:00:00
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Panašiu principu galim užklausi duomenų visoms darbo dienoms, t. y. be savaitgalių:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;between&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-01&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-15&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sat&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sun&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;08:00:00&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH24:MI:SS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;09:00:00&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Iš rezultatų matome, kad užklausa veikia teisingai ir ignoruoja savaitgalių duomenis:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  ID DT
&lt;span class="linenos"&gt; 2&lt;/span&gt;  --- -------------------
&lt;span class="linenos"&gt; 3&lt;/span&gt;  33 2014-08-01 08:00:00
&lt;span class="linenos"&gt; 4&lt;/span&gt;  34 2014-08-01 08:15:00
&lt;span class="linenos"&gt; 5&lt;/span&gt;  35 2014-08-01 08:30:00
&lt;span class="linenos"&gt; 6&lt;/span&gt;  36 2014-08-01 08:45:00
&lt;span class="linenos"&gt; 7&lt;/span&gt;  37 2014-08-01 09:00:00
&lt;span class="linenos"&gt; 8&lt;/span&gt;  321 2014-08-04 08:00:00
&lt;span class="linenos"&gt; 9&lt;/span&gt;  322 2014-08-04 08:15:00
&lt;span class="linenos"&gt;10&lt;/span&gt;  323 2014-08-04 08:30:00
&lt;span class="linenos"&gt;11&lt;/span&gt;  ... ...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kaip matot, viskas tikrai labai paprasta. Taip paprasta, kad beveik visada pasimiršta. :D&lt;/p&gt;
</content><category term="Programavimas"></category><category term="sql"></category><category term="date range"></category><category term="oracle"></category><category term="time interval"></category><category term="time period"></category><category term="time range"></category><category term="week days"></category><category term="weekend"></category></entry><entry><title>Oracle hierarchinės užklausos su WITH ir CONNECT BY</title><link href="https://paulius.bautrenas.lt/oracle-hierarchines-uzklausos-su-with-ir-connect-by.html" rel="alternate"></link><published>2014-08-26T15:20:00+03:00</published><updated>2014-08-26T15:20:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-08-26:/oracle-hierarchines-uzklausos-su-with-ir-connect-by.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/oracle-hierarchines-uzklausos-su-with-ir-connect-by/oracle_hierarchine.png"&gt;&lt;img alt="oracle_hierarchine" class="aligncenter size-full wp-image-333" src="https://paulius.bautrenas.lt/images/oracle-hierarchines-uzklausos-su-with-ir-connect-by/oracle_hierarchine.png" style="width: 693px; height: 359px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Darbe iš nutolusių įrenginių kelis kartus per valanda surenkam įvairius duomenis. Kiekviena surinkimo faktą (surinko ar nesurinko duomenis) taip pat fiksuojame ir saugome DB. Kažkada iškilo poreikis grafiškai pasižiūrėti, kaip vis dėl to mūsų įrenginiai veikia, t. y. kaip kokybiškai teikia mums duomenis. Tam pasirašiau paprastą užklausą, kuri tiesiog suskaičiuoja …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/oracle-hierarchines-uzklausos-su-with-ir-connect-by/oracle_hierarchine.png"&gt;&lt;img alt="oracle_hierarchine" class="aligncenter size-full wp-image-333" src="https://paulius.bautrenas.lt/images/oracle-hierarchines-uzklausos-su-with-ir-connect-by/oracle_hierarchine.png" style="width: 693px; height: 359px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Darbe iš nutolusių įrenginių kelis kartus per valanda surenkam įvairius duomenis. Kiekviena surinkimo faktą (surinko ar nesurinko duomenis) taip pat fiksuojame ir saugome DB. Kažkada iškilo poreikis grafiškai pasižiūrėti, kaip vis dėl to mūsų įrenginiai veikia, t. y. kaip kokybiškai teikia mums duomenis. Tam pasirašiau paprastą užklausą, kuri tiesiog suskaičiuoja, kiek kiekvieną valandą buvo sėkmingų duomenų surinkimo iteracijų. Kaip ir viskas gerai, tačiau bėda kyla, jei konkrečią valandą nebuvo nei vienos sėkmingos iteracijos. Tada duomenys visai dingsta (žr. nuotrauką viršuje), o norėjosi bent &lt;em&gt;null&lt;/em&gt; pamatyti.&lt;/p&gt;
&lt;p&gt;Nieko nelaukęs &lt;a class="reference external" href="https://community.oracle.com/thread/1055543?start=0&amp;amp;tstart=0"&gt;susigooglinau&lt;/a&gt; šaunų pavyzdėlį, kuriame panaši problema buvo išspręsta hierarchine užklausa panaudojant WITH ir CONNECT BY konstrukcijas (čia jau mano šiek tiek adaptuotas variantas):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;WITH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;parameters&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-03-01&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;START_DAY&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-03-02&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;END_DAY&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DUAL&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hour_range&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;START_DAY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;LEVEL&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;PARAMETERS&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;CONNECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LEVEL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;END_DAY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;START_DAY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH24&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;laikas&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HOUR_RANGE&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kaip veikia CONNECT BY yra šauniai aprašyta &lt;a class="reference external" href="http://welcometooracle.wordpress.com/2012/10/18/hierarchical/"&gt;čia&lt;/a&gt;, todėl per daug neišsiplėsiu ir geriau parodysiu, kaip prieš tai aprašytą užklausą pritaikiau savo reikmėms. Po kiek užsitęsusio &amp;quot;būrimo&amp;quot; gavosi štai tokia užklausa:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dummy_date&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt; 2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-26&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH24&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dien&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt; 3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-26&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;LEVEL&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH24&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DT&lt;/span&gt;
&lt;span class="linenos"&gt; 4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;
&lt;span class="linenos"&gt; 5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;CONNECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LEVEL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-27&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TO_DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-26&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yyyy-mm-dd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;
&lt;span class="linenos"&gt; 6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt; 7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;iteracijos&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="linenos"&gt; 8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;
&lt;span class="linenos"&gt; 9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DSI_SURINKIMO_DATA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;DD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH24&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;diena&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TO_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DSI_SURINKIMO_DATA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;YYYY-MM-DD HH24&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="linenos"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dsi_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;
&lt;span class="linenos"&gt;12&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;
&lt;span class="linenos"&gt;13&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;
&lt;span class="linenos"&gt;14&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;DSI_SURINKIMO_DATA&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-26&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;15&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;DSI_SURINKIMO_DATA&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2014-08-27&amp;#39;&lt;/span&gt;
&lt;span class="linenos"&gt;16&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;DSI_RNG_ID&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;383&lt;/span&gt;
&lt;span class="linenos"&gt;17&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DSI_SU_KLAIDOMIS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;null&lt;/span&gt;
&lt;span class="linenos"&gt;18&lt;/span&gt;
&lt;span class="linenos"&gt;19&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;group&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DSI_SURINKIMO_DATA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;DD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUOM_SUR_ITERACIJOS&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DSI_SURINKIMO_DATA&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;HH&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;20&lt;/span&gt;
&lt;span class="linenos"&gt;21&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="linenos"&gt;22&lt;/span&gt;
&lt;span class="linenos"&gt;23&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;
&lt;span class="linenos"&gt;24&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;dummy_date&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dien&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;diena&lt;/span&gt;
&lt;span class="linenos"&gt;25&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;dummy_date&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;data&lt;/span&gt;
&lt;span class="linenos"&gt;26&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;iteracijos&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iter&lt;/span&gt;
&lt;span class="linenos"&gt;27&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dummy_date&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;left&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;join&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iteracijos&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;iteracijos&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;dummy_date&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt;
&lt;span class="linenos"&gt;28&lt;/span&gt;
&lt;span class="linenos"&gt;29&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;diena&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;data&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Užklausos vykdymo metu, &amp;quot;virtualioje lentelėje&amp;quot; &lt;em&gt;dummy_date&lt;/em&gt;, pagal prieš tai pateiktą pavyzdį, yra sukuriami maždaug tokie dienos (diena su laiku 00:00) ir datos (diena su valanda) įrašai:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  DIEN DT
&lt;span class="linenos"&gt; 2&lt;/span&gt;  ------------- --------------
&lt;span class="linenos"&gt; 3&lt;/span&gt;  2014-08-26 00 2014-08-26 00
&lt;span class="linenos"&gt; 4&lt;/span&gt;  2014-08-26 00 2014-08-26 01
&lt;span class="linenos"&gt; 5&lt;/span&gt;  2014-08-26 00 2014-08-26 02
&lt;span class="linenos"&gt; 6&lt;/span&gt;  2014-08-26 00 2014-08-26 03
&lt;span class="linenos"&gt; 7&lt;/span&gt;  ... ...
&lt;span class="linenos"&gt; 8&lt;/span&gt;  2014-08-26 00 2014-08-27 20
&lt;span class="linenos"&gt; 9&lt;/span&gt;  2014-08-26 00 2014-08-27 21
&lt;span class="linenos"&gt;10&lt;/span&gt;  2014-08-26 00 2014-08-27 22
&lt;span class="linenos"&gt;11&lt;/span&gt;  2014-08-26 00 2014-08-27 23
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Su elementariu select, &amp;quot;virtualioje lentelėje&amp;quot; &lt;em&gt;iteracijos&lt;/em&gt; yra sukuriami tokie įrašai (apačioje). Čia paprasčiausiai su &lt;em&gt;group by&lt;/em&gt; ir &lt;em&gt;count&lt;/em&gt; yra suskaičiuojama, kiek per kiekvieną valandą buvo įvykdyta teisingų iteracijų. Įrašai niekaip nesurūšiuoti, nes rūšiavimas atliekamas paskutinėje select užklausoje.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  DIENA DATA ITER
&lt;span class="linenos"&gt; 2&lt;/span&gt;  ------------- -------------- ----
&lt;span class="linenos"&gt; 3&lt;/span&gt;  2014-08-26 00 2014-08-26 10 4
&lt;span class="linenos"&gt; 4&lt;/span&gt;  2014-08-26 00 2014-08-26 13 4
&lt;span class="linenos"&gt; 5&lt;/span&gt;  2014-08-26 00 2014-08-26 07 3
&lt;span class="linenos"&gt; 6&lt;/span&gt;  2014-08-26 00 2014-08-26 04 1
&lt;span class="linenos"&gt; 7&lt;/span&gt;  2014-08-26 00 2014-08-26 08 3
&lt;span class="linenos"&gt; 8&lt;/span&gt;  2014-08-26 00 2014-08-26 00 4
&lt;span class="linenos"&gt; 9&lt;/span&gt;  2014-08-26 00 2014-08-26 02 1
&lt;span class="linenos"&gt;10&lt;/span&gt;  2014-08-26 00 2014-08-26 11 3
&lt;span class="linenos"&gt;11&lt;/span&gt;  2014-08-26 00 2014-08-26 12 4
&lt;span class="linenos"&gt;12&lt;/span&gt;  2014-08-26 00 2014-08-26 14 3
&lt;span class="linenos"&gt;13&lt;/span&gt;  2014-08-26 00 2014-08-26 01 4
&lt;span class="linenos"&gt;14&lt;/span&gt;  2014-08-26 00 2014-08-26 09 2
&lt;span class="linenos"&gt;15&lt;/span&gt;  2014-08-26 00 2014-08-26 03 4
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Paskutinis select'as tiesiog iš &amp;quot;virtualios lentelės&amp;quot; &lt;em&gt;dummy_date&lt;/em&gt; paima dienos ir datos stulpelių eilutes ir prie jų su &lt;em&gt;left join&lt;/em&gt; prijungia &amp;quot;virtualios lentelės&amp;quot; &lt;em&gt;&amp;quot;*iteracijos&lt;/em&gt;&amp;quot;* stulpelio &lt;em&gt;ITER&lt;/em&gt;&amp;quot;* reikšmes. Gaunasi iš pat pradžių pageidautas rezultatas:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="linenos"&gt; 1&lt;/span&gt;  DIENA DATA ITER
&lt;span class="linenos"&gt; 2&lt;/span&gt;  ------------- -------------- ----
&lt;span class="linenos"&gt; 3&lt;/span&gt;  2014-08-26 00 2014-08-26 00 4
&lt;span class="linenos"&gt; 4&lt;/span&gt;  2014-08-26 00 2014-08-26 01 4
&lt;span class="linenos"&gt; 5&lt;/span&gt;  2014-08-26 00 2014-08-26 02 1
&lt;span class="linenos"&gt; 6&lt;/span&gt;  2014-08-26 00 2014-08-26 03 4
&lt;span class="linenos"&gt; 7&lt;/span&gt;  2014-08-26 00 2014-08-26 04 1
&lt;span class="linenos"&gt; 8&lt;/span&gt;  2014-08-26 00 2014-08-26 05 null
&lt;span class="linenos"&gt; 9&lt;/span&gt;  2014-08-26 00 2014-08-26 06 null
&lt;span class="linenos"&gt;10&lt;/span&gt;  2014-08-26 00 2014-08-26 07 3
&lt;span class="linenos"&gt;11&lt;/span&gt;  2014-08-26 00 2014-08-26 08 3
&lt;span class="linenos"&gt;12&lt;/span&gt;  2014-08-26 00 2014-08-26 09 2
&lt;span class="linenos"&gt;13&lt;/span&gt;  2014-08-26 00 2014-08-26 10 4
&lt;span class="linenos"&gt;14&lt;/span&gt;  2014-08-26 00 2014-08-26 11 3
&lt;span class="linenos"&gt;15&lt;/span&gt;  2014-08-26 00 2014-08-26 12 4
&lt;span class="linenos"&gt;16&lt;/span&gt;  2014-08-26 00 2014-08-26 13 4
&lt;span class="linenos"&gt;17&lt;/span&gt;  2014-08-26 00 2014-08-26 14 4
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Rezultatas tarp paprastos (&amp;quot;virtuali lentelė&amp;quot; &lt;em&gt;iteracijos&lt;/em&gt;) ir hierarchinės užklausos daug akivaizdesnis išpiešus užklausų rezultatus grafiškai. Paprastai ištraukus duomenis, atrodo, kad įrenginys veikia praktiškai be sutrikimų. Duomenis ištraukus &amp;quot;gudresniu&amp;quot; būdu, aiškiai matome duomenų perdavimo trūkius.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/oracle-hierarchines-uzklausos-su-with-ir-connect-by/oracle_hierarchine_jasper.png"&gt;&lt;img alt="oracle_hierarchine_jasper" class="aligncenter size-large wp-image-347" src="https://paulius.bautrenas.lt/images/oracle-hierarchines-uzklausos-su-with-ir-connect-by/oracle_hierarchine_jasper-1024x494.png" style="width: 625px; height: 301px;" /&gt;&lt;/a&gt;&lt;/p&gt;
</content><category term="Programavimas"></category><category term="connect by"></category><category term="count"></category><category term="data gaps"></category><category term="group by"></category><category term="left join"></category><category term="levels"></category><category term="oracle"></category><category term="with"></category></entry><entry><title>LEDCtrl - LED juostos valdiklis</title><link href="https://paulius.bautrenas.lt/ledctrl-led-juostos-valdiklis.html" rel="alternate"></link><published>2014-08-22T08:00:00+03:00</published><updated>2014-08-22T08:00:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-08-22:/ledctrl-led-juostos-valdiklis.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399.jpg"&gt;&lt;img alt="IMG_6399" class="aligncenter wp-image-229 size-medium" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399-800x600.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;LEDCtrl - tai stipriai&amp;nbsp;&amp;quot;perprojektuotas&amp;quot; (angl.&amp;nbsp;&lt;em&gt;overengineered&lt;/em&gt;) &amp;nbsp;LED juostos valdiklis, aprūpintas PIR ir LDR jutikliais, 2x8 LCD ir rotoriniu enkoderiu, skirtas valdyti palėpės laiptų apšvietimą. Idėja susikonstruoti šį daiktą kilo gan seniai, po to kai naktį dėdė sugebėjo nusiristi nuo palėpės laiptų, nes tiesiog pamiršo, kad palėpės laiptai yra gan statūs …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399.jpg"&gt;&lt;img alt="IMG_6399" class="aligncenter wp-image-229 size-medium" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399-800x600.jpg" style="width: 625px; height: 469px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;LEDCtrl - tai stipriai&amp;nbsp;&amp;quot;perprojektuotas&amp;quot; (angl.&amp;nbsp;&lt;em&gt;overengineered&lt;/em&gt;) &amp;nbsp;LED juostos valdiklis, aprūpintas PIR ir LDR jutikliais, 2x8 LCD ir rotoriniu enkoderiu, skirtas valdyti palėpės laiptų apšvietimą. Idėja susikonstruoti šį daiktą kilo gan seniai, po to kai naktį dėdė sugebėjo nusiristi nuo palėpės laiptų, nes tiesiog pamiršo, kad palėpės laiptai yra gan statūs (beveik kaip kopėčios). Norėdamas apsaugoti save ir artimuosius nuo panašių nutikimų, nusprendžiau palėpės laiptų angą apšviesti pigia LED juosta, maitinama iš 12V maitblokio. Sprendimas buvo vykęs, tačiau naktį erzino gan ryškus parazitinis palėpės kambario apšvietimas, trukdantis miegoti. Bandžiau problemą spręsti po ranka pasitaikiusiu LM317. Viskas buvo kaip ir gerai, tačiau norėjosi kažkokio mandresnio, ne taip kaistančio, sprendimo, leidžiančio dinamiškai keisti LED juostos šviesos stiprį. Taip pat norėjau kažkokio interaktyvumo. Taip ir kilo idėja susikonstruoti valdiklį, kuris LED juostą įjungtų (ar sustiprintų LED šviesos srautą) tik tada kai to reikia, t. y. tik tada kai kas nors lipa laiptais ar eina jų link.&lt;/p&gt;
&lt;div class="section" id="schema-ir-pcb"&gt;
&lt;h2&gt;&amp;nbsp;Schema ir PCB&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LEDCtrl_schema1.png"&gt;&lt;img alt="LEDCtrl_schema" class="aligncenter size-large wp-image-244" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LEDCtrl_schema1-827x1024.png" style="width: 625px; height: 773px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Schema idiotiškai paprasta. Atmega8 su standartiniu apkabinimu. Standartinis 2x8 LCD, kurio kontrastas sureguliuotas 100R ir 10K varžiniu dalikliu, o pašvietimas valdomas lauktranziu Q2 (gal tik reikėjo pašvietimo grandinėje nuosekliai kokį srovę ribojantį rezistorių įmontuoti..). Kadangi valdiklis yra pritaikytas IPM (angl. &lt;em&gt;PWM&lt;/em&gt;)&amp;nbsp;valdyti standartines kiniškas 12V LED juostas, todėl schemoje yra ir 7805 reguliatorisu su atitinkamu apkabinimu.&lt;/p&gt;
&lt;p&gt;Vartotojo sąsaja realizuota rotoriniu enkoderiu su mygtuku, pirktu iš ebay. Enkoderį pasirinkau grynai iš smalsumo, nes buvo baisiai įdomu su juo pasižaisti. Be to buvo labai nusibodę paprasti mygtukai.&lt;/p&gt;
&lt;p&gt;Schemoje įprojektuoti 3 šviesos diodai LED1–LED3 skirti &amp;quot;debuginimui&amp;quot;, kurie baigtame projekte tiesiog gražiai mirksi ir jokios naudos neduoda. Taip pat nepamiršau į schemoje įdėti ir AVR ISP bei USART jungčių. Pastaroji irgi labiau skirta &amp;quot;debuginimui&amp;quot;, nes visa naudotojo sąsaja yra realizuota per LCD ekranėlį ir rotorinį enkoderį.&lt;/p&gt;
&lt;p&gt;Kadangi pigios kiniškos LED juostos (pirkau iš ebay) dažniausiai būna su integruotais srovę ribojančiais rezistoriais, valdiklis juostą valdo paprasčiausiu IPM (angl. &lt;em&gt;PWM&lt;/em&gt;) per lauko tranzistorių Q1.&lt;/p&gt;
&lt;p&gt;Aplinkos apšviestumo lygis fiksuojamas paprasčiausiu LDR - &amp;nbsp;12K-100K fotorezistoriumi. Iš jo ir rezistoriaus R12 yra sudarytas varžinis daliklis, kurio išėjimas patenka tiesiai į atmegos ADC.&lt;/p&gt;
&lt;p&gt;Judesius fiksuoja ultra pigus PIR modulis. Apie panašius PIR modulius galit pasiskaityti &lt;a class="reference external" href="https://learn.adafruit.com/pir-passive-infrared-proximity-motion-sensor"&gt;Adafruit Learn sistemoje&lt;/a&gt;. Linkas iš ties pravartus, nes &lt;a class="reference external" href="https://learn.adafruit.com/pir-passive-infrared-proximity-motion-sensor/testing-a-pir"&gt;ten&lt;/a&gt; yra aprašyti skirtingi PIR veikimo režimai ir būdai pakeisti PIR išėjimo signalo parametrus. Verta iš kart įspėti, net potenciometru &amp;quot;Time&amp;quot; nureguliavus PIR signalo periodo trukmę iki minimumo, ji vis tiek yra labai ilga. Gal kokiai signalizacijai tai ir gerai, bet ne mano atveju. Man norėjosi trumpų PIR signalo periodų, todėl PIR modulio išėjimą prie INT0 prijungiau per RC high pass filtrą su maždaug 2 ms laiko konstanta. Kad įrašas atrodytų rimčiau, štai jums PIR signalo prieš filtą (geltona kreivė) ir po filtro (žalia kreivė) oscilograma:&lt;/p&gt;
&lt;p&gt;&lt;img alt="NewFile2" class="aligncenter size-full wp-image-284" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/NewFile2.jpg" style="width: 469px; height: 343px;" /&gt;&lt;/p&gt;
&lt;p&gt;PCB projektavau nenumatęs jokio konkretaus korpuso (žioplas sprendimas!), todėl stengiausi ją padaryti kuo mažesnę, visas jungtis išvesti į vieną kraštą, palikti pakankamai vietos rotorinio enkoderio rankenėlei. Tiesa pasakius, pirminiame variante buvau privėlęs žioplų klaidų (sumaišiau LCD maitinimo VEE ir VDD išvadus, nepalikau pakankamai vietos tarp 12V maitinimo jungčių, kiek per vėlai sugalvojau PIR prijungti per RC filtrą ir pan.), tačiau prie projekto &lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/staircase_lamp"&gt;Github'e&lt;/a&gt; šios klaidos yra ištaisytos.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LRDCtrl_PCB.png"&gt;&lt;img alt="LRDCtrl_PCB" class="aligncenter size-large wp-image-237" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/LRDCtrl_PCB-1024x550.png" style="width: 625px; height: 335px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tiesa, verta paminėti, kad schemoje nėra&amp;nbsp;apsaugos nuo atvirkštinio maitinimo prijungimo (angl. reverse poliarity protection), srovės ribojimo ir apsaugos nuo trumpo jungimo grandžių. Šį &amp;quot;kliurką&amp;quot; pastebėjau, tik montuodamas valdiklį į korpusą. Jei ketinat darytis šio valdiklio kopiją, būtinai pagalvokit apie minėtas apsaugas.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="surinkimas"&gt;
&lt;h2&gt;Surinkimas&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5338.jpg"&gt;&lt;img alt="IMG_5338" class="aligncenter wp-image-278 size-full" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5338.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5334.jpg"&gt;&lt;img alt="IMG_5334" class="aligncenter wp-image-280 size-full" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5334.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip ir minėjau, PCB tikrai paprasta, todėl ją sulituoti nebuvo sunku. Gal tik kiek teko pavargi bandant ištaisyti žioplą LCD maitinimo klaidą (laidų raizgalynė&amp;nbsp;PCB dešiniajame kampe). Svarbiausia, kad viskas veikė. Ne iš pirmo karto, bet veikė.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5345.jpg"&gt;&lt;img alt="IMG_5345" class="aligncenter size-large wp-image-274" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5345-764x1024.jpg" style="width: 522px; height: 699px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Visas smagumas prasidėjo, kai pagaliau prisiruošiau sumontuoti valdiklį į plastikinę dėžutę / korpusą. Norėjau, kad daugiau nebereikėtų niekada lįsti į valdiklio vidų, todėl nusprendžiau išvesti AVR ISP ir USART jungtis į lauką. Tam tiesiai prie PCB prilitavau IDC tipo kabelį su DB9 jungtimi. Aišku, nei vienam nei kitam IDC kabelio galui nepagailėjau karštų klijų. :D Taip pat nusprendžiau tiesiai prie PCB prilituoti ir PIR jutiklio išvadus, todėl laidų gavosi neplanuotai&amp;nbsp;daug..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5437.jpg"&gt;&lt;img alt="IMG_5437" class="aligncenter size-large wp-image-267" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_5437-764x1024.jpg" style="width: 522px; height: 699px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nusprendžiau PCB korpuso viduje tvirtinti 3 mm varžais, o tarp korpuso ir PCB sudėti 8 mm plastikines tarpines (tie juodi vamzdeliai nuotraukoje apačioje). Juos sukišti į savo vietas buvo gan keblu, bet su stomatologo įrankiais tai pavyko atlikti gan greitai. :) Taip pat montuojant šiek tiek kreivokai išgręžiau varžtų tvirtinimo skyles, todėl jas pridengiau raudono kartono poveržlėmis.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6143.jpg"&gt;&lt;img alt="IMG_6143" class="aligncenter size-full wp-image-258" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6143.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nors viduje gavosi tikra laidų raizgalynė, iš išorės valdiklis gavosi gan gražus. Kaip rusai sako: &amp;quot;сойдёт для сельской местности!&amp;quot;.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399.jpg"&gt;&lt;img alt="image1" class="aligncenter size-large wp-image-229" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6399-1024x768.jpg" style="width: 625px; height: 468px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6401.jpg"&gt;&lt;img alt="IMG_6401" class="aligncenter size-full wp-image-252" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6401.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6402.jpg"&gt;&lt;img alt="IMG_6402" class="aligncenter size-full wp-image-251" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6402.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="softas"&gt;
&lt;h2&gt;Softas&lt;/h2&gt;
&lt;p&gt;Va čia tai sudėtingiausiai projekto dalis, todėl kad valdiklio programoje yra realizuoti 4 darbo režimai ir 3 lygių naudotojo&amp;nbsp;meniu. Praktiškai visi valdiklio nustatymai yra keičiami per naudotojo meniu, todėl programos kodas gavosi tikrai sudėtingas ir ilgas. Prie to dar prisidėjo tai, kad programą rašiau praktiškai metus su nereguliariomis pertraukomis, iš kurių ilgiausia buvo beveik 6 mėn. Programuojantys puikai žino, kad net padarius kelių dienų pertrauką būna sunku vėl &amp;quot;įsijaust į kodą&amp;quot;, o dar po ilgesnės pertraukos iš vis pasidaro sunku galus sugaudyti. Kodo tvarkingumui tikrai nepadėjo ir tai, kad ūpui pakelti dažnai nevengiau buteliuko alaus ar viskio šlakelio. :D Na bet yra kaip yra. Gal vienas kitas bugas ir liko, bet daiktas veikia, atlieka savo funkcijas ir nelūžta.&lt;/p&gt;
&lt;p&gt;Pačio kodo komentuoti neketinu, nes nieko ten nėra ypatingo. Tiesiog ilga switch–case if– else if–else spageti makalynė su šiokiais tokiais komentarais ir viskas. Kam reikės, tas jau (tikriausiai tik aš pats kada nors ateityje) atsirinks. Gal tik verta paminėti kelis atmega8 hardware išnaudojimo sprendimus:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;INT0&lt;/strong&gt; - Pertrauktis apdoroja PIR jutiklį.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;INT1&lt;/strong&gt; - Pertrauktis skirta darbui su rotoriniu enkoderiu. Naudojama vaikščiojimui per naudotojo meniu bei parametrų verčių keitimui tiek confige tiek ir esant tam tikriems darbo režimams.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TIMER0&lt;/strong&gt; - TIMER0_OVF_vect pertrauktis atlieka ADC matavimus, kur reikia sušeria gautas reikšmes ir kai kuriuose darbo režimuose atnaujina LCD rodomą informaciją.&amp;nbsp;Kodėl nepanaudojau ADC pertraukties? Nežinau. T. y. nebeatsimenu, nes ADC nuskaitymą užkūriau vieną ir pirmųjų&amp;nbsp;:D Rodos dėl to, kad ADC pertrauktis stabdė kitų procesų darbą.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TIMER1&lt;/strong&gt; - TIMER1_COMPA_vect pertrauktis naudojama kaip laikrodis, skaičiuojantis sekundėmis. Pastarosios naudojamos atgaliniam skaičiavimui tarp darbo režimų persijungimo ir LCD pašvietimo trumpam įjungimui.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TIMER2&lt;/strong&gt; - Laikmatis naudojamas tik impulso pločio moduliacijai (angl. &lt;em&gt;PWM&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;USART&lt;/strong&gt; - Sukonfigūruota ant 9600 Boud, 8 bitų su 1 Stop bitu. Skirta grynai debuginimui.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;EEPROM&lt;/strong&gt; - visi konfigūraciniai parametrai, prieinami naudotojui per meniu, yra saugomi EEPROM'e. Tam, kad pirmą kartą užprogramuotas valdiklis nepradėtų grybauti, kode yra aprašyta funkcija&amp;nbsp;&lt;em&gt;first_time_boot()&lt;/em&gt;, kuri valdikliui startavus pirmą kartą į EEPROM surašo pagrindinių parametrų vertes.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Beje, visą valdiklio projektą, kartu su programos kodu, galite rasti straipsnio apačioje, &lt;a class="reference external" href="#download"&gt;atsisiuntimuose&lt;/a&gt;. ;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="darbo-rezimai"&gt;
&lt;h2&gt;Darbo režimai&lt;/h2&gt;
&lt;p&gt;Kaip minėjau, valdiklyje yra realizuoti 4 darbo režimai. Trumpai apie juos:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;ON/OFF&lt;/strong&gt; - LED juosta arba visiškai išjungta, arba nuolat šviečia pasirinktu stiprumu. Šviesos intensyvumas reguliuojamas darbo metu rotoriniu enkroderiu ir nustatyta vertė iškart išsaugoma EEPROM'e.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PIR/LDR&lt;/strong&gt; - Valdiklis nuolat tikriną ar kambario apšviestumas nenukrito žemiau nustatytos&amp;nbsp;vertės (parametras &lt;em&gt;LDRth&lt;/em&gt;). Užfiksavus, kad kambario apšviestumas yra nebepakankamas, yra įjungiama PIR pertrauktis. Suveikus PIR jutikliui, valdiklis švelniai sustiprina LED šviesos intensyvumą nuo naudotojo nustatytos reikšmės&amp;nbsp;&lt;em&gt;PWMmin&lt;/em&gt; iki&amp;nbsp;&lt;em&gt;PWMmax&amp;nbsp;*(žr. poskyrį &amp;quot;`Naudotojo meniu &amp;lt;#menu&amp;gt;`__&amp;quot;). Tai atlikęs mikrovaldiklis laukia nustatytą laiko&amp;nbsp;intervalą&amp;nbsp;*TimeOut&lt;/em&gt; ir LED juostos šviesos stiprį švelniai sumažina nuo&amp;nbsp;PWMmax iki&amp;nbsp;&lt;em&gt;PWMmin.
*Atgalinio *TimeOut&amp;nbsp;*skaičiavimo metu PIR pertrauktis gali suveikti iš naujo tik jeigu LDR jutiklio rodmenys nepakilo aukščiau nuostato&amp;nbsp;*LDRth&lt;/em&gt;. Tada laikas pradedamas skaičiuoti iš naujo. Jei&amp;nbsp;LDR jutiklio rodmenys staiga pakilo aukščiau&amp;nbsp;nuostato &lt;em&gt;LDRth&lt;/em&gt;, pav. užlipom laiptais ir įjungėm kambario apšvietimą, PIR pertrauktis yra išjungiama ir PIR signalas yra tiesiog ignoruojamas.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PIR&lt;/strong&gt; - Veikimo principas yra analogiškas &amp;quot;PIR/LDR&amp;quot; darbo režimui, tik čia nėra atsižvelgiama į fotorezistoriaus rodmenis. T. y. tiesiog, pirmą kartą PIR užfiksavus judesį, valdiklis&amp;nbsp;velniai sustiprina LED šviesos intensyvumą nuo naudotojo nustatytos reikšmės &lt;em&gt;PWMmin&lt;/em&gt; iki &lt;em&gt;PWMmax&amp;nbsp;*(kai tai veikia galite pamatyti skirsnyje &amp;quot;Rezultatai&amp;quot;). Tai atlikęs mikrovaldiklis laukia nustatytą laiko intervalą *TimeOut&lt;/em&gt; ir LED juostos šviesos stiprį švelniai sumažina nuo &lt;em&gt;PWMmax&lt;/em&gt; iki &lt;em&gt;PWMmin&lt;/em&gt;.&amp;nbsp;Atgalinio &lt;em&gt;TimeOut&lt;/em&gt; skaičiavimo metu PIR pertrauktis gali suveikti iš naujo.&amp;nbsp;Tada laikas pradedamas skaičiuoti iš naujo.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDR&lt;/strong&gt; - Tai savotiškas PI tipo LED juostos šviesos stiprio reguliatorius. Šiame darbo režime fotorezitoriaus vertė yra matuojama 8 kartus ir išvedamas vidurkis (I reguliatoriaus grandis). Po to ši vertė proporcingai (P reguliatoriaus grandis) yra perskaičiuojama ir &amp;quot;sušeriama&amp;quot; į&amp;nbsp;OCR2 registrą. Reguliatoriaus proporcinis koeficientas yra reguliuojamas tiesiai iš naudotojo meniu, darbo režimo metu&amp;nbsp;(žr. poskyrį &amp;quot;&lt;a class="reference external" href="#menu"&gt;Naudotojo meniu&lt;/a&gt;&amp;quot;).
Iš principo yra galimi du skirtingi šiuo darbo režimo variantai: &amp;quot;atvirkštinis&amp;quot; ir &amp;quot;tiesioginis&amp;quot; LED juostos šviesos stiprio reguliavimas. &amp;quot;Atvirkštinis&amp;quot; reguliavimas LED juostos šviesos intensyvumą mažina vis labiau, kuo patalpa yra labiau apšviesta. &amp;quot;Tiesioginis&amp;quot; reguliavimas -&amp;nbsp;LED juostos šviesos intensyvumą&amp;nbsp;didina vis labiau,&amp;nbsp;kuo patalpa yra labiau apšviesta. Kokiu režimu reguliatorius veikia yra nustatome konfigūracijos meniu punkte&amp;nbsp;&lt;em&gt;LDRinv&amp;nbsp;*(žr. poskyrį *&amp;quot;Naudotojo meniu&amp;quot;&lt;/em&gt;).*&amp;nbsp;*&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="naudotojo-meniu"&gt;
&lt;span id="menu"&gt;&lt;/span&gt;&lt;h2&gt;Naudotojo meniu&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/menu1.jpg"&gt;&lt;img alt="menu" class="aligncenter size-large wp-image-313" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/menu1-1024x785.jpg" style="width: 625px; height: 479px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vat ant tiek naudotojo sąsaja yra&amp;nbsp;komplikuota. :D Taip, ant tiek komplikuota, kad nenufotografavęs beveik kiekvieno LCD rodomo puslapio (pamiršau vieną :( ) ir &amp;quot;nesuphotoshopinęs&amp;quot; visko į vieną paveikslą, net nesugebėčiau nieko paaiškinti. Na tai pradedam...&lt;/p&gt;
&lt;div class="section" id="statusas"&gt;
&lt;h3&gt;&lt;strong&gt;Statusas&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Tai LCD puslapiai, kurie yra rodomi esant konkrečiam darbo režimui. T. y. kai jau iš pirmo nustatymo meniu lygio buvo išsirinktas konkretus darbo režimas. Kiekvienas darbo režimo statuso puslapis yra šiek tiek skirtingas.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;ON/OFF&lt;/strong&gt; režimo metu yra indikuojama, kad LED juosta yra išjungta (&amp;quot;OFF&amp;quot;) arba, kokiu ryškumu (procentais) ji šviečia.&lt;/li&gt;
&lt;li&gt;Esant &lt;strong&gt;PIR&lt;/strong&gt; darbo režimui, LCD ekrane atvaizduojamas &lt;em&gt;TimeOut&lt;/em&gt; laikas.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PIR/LDR&lt;/strong&gt; režimo metu - pirmiausia, kol fotorezitoriaus rodmenys (nuotraukoje &amp;quot;R55&amp;quot;, kur 55 - tai esame LDR reikšmė procentais), nenukrito žemiau &lt;em&gt;LDRth&lt;/em&gt; nuostato (nuotraukoje &amp;quot;T20&amp;quot;, kur 20 - nuostato vertė), rodomas vienas puslapis. Kai &amp;nbsp;fotorezitoriaus rodmenys nukrenta žemiau&amp;nbsp;LDRth nuostato yra persijungiama į PIR darbo režimo puslapį.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDR&lt;/strong&gt; darbo režimo metu, pirmoje LCD eilutėje yra rodoma reali LDR&amp;nbsp;reikšmė procentais. Antroje LCD eilutėje yra rodomas PI reguliatoriaus proporcinis&amp;nbsp;koeficientas (nuotraukoje &amp;quot;K&amp;quot;), šalia jo, tai kas patenka į OCR2 registrą procentais, to reikia, kad būtų galima stebėti&amp;nbsp;koeficiento &amp;quot;K&amp;quot; įtaką PI reguliatoriaus darbui.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="as-meniu-lygis"&gt;
&lt;h3&gt;&lt;strong&gt;1-as meniu lygis&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Esant bet kokiam darbo režimui, du kartus paspaudus rotorinio enkoderio mygtuką, naudotojas yra permetamas į nustatymų meniu. Tiksliau, į pirmąjį jo lygį, kuriame galima pasirinkti pageidaujamą darbo režimą, pereiti į konfigūracijos meniu &amp;quot;Config&amp;quot; arba sugrįžti į darbo statuso langą (t. y. išeiti iš meniu).&lt;/p&gt;
&lt;p&gt;Pasirinkus vieną iš darbo režimų, yra papildomai paklausiame, ar tikrai norimą jį įjungti. Jei pasirenkama reikšmė &amp;quot;ON&amp;quot;, darbo režimas yra tuoj pat įjungimas, o vartotojas yra nuvedamas į darbo režimo statuso langą. Jei pasirenkama &amp;quot;OFF&amp;quot; - naudotojas yra gražinamas į pirmąjį menių lygį.&lt;/p&gt;
&lt;p&gt;Pasirinkus menių punktą &amp;quot;CONFIG&amp;quot; yra pereinama į konfigūracinį menių.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="as-meniu-lygis-2"&gt;
&lt;span id="as-meniu-lygis-1"&gt;&lt;/span&gt;&lt;h3&gt;&lt;strong&gt;2-as meniu lygis&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Čia yra keičiami valdiklio nustatymai, apie kuriuos šiek tiek užsiminiau skirsnyje &amp;quot;Darbo režimai&amp;quot;. Funkcija &amp;quot;EXIT&amp;quot; naudotoją gražina į prieš tai buvusį meniu lygį, o pasirinkus vieną iš keistinų parametrų yra pereinama į 3-iąjį meniu.&lt;/p&gt;
&lt;p&gt;**&amp;nbsp;3-čiasis meniu lygis**&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;MinPWM&lt;/strong&gt; - procentais keičiamas minimalus LED juostos šviesos stipris. Realybėje 0% atitinka OCR2=0x00, o 100$ - OCR2=0x255. Arba, dar paprasčiau: 0% - 0V, 100% - 12V.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MaxPWM&lt;/strong&gt; - analogiškai procentais keičiamas ir maksimalus LED juostos šviesos stiprio nustatymas.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TimeOut&lt;/strong&gt; - laiko intervalas sekundėmis, kurį mikrovaldiklis PIR ir PIR/LDR darbo režimuose laukia prieš sumažindamas LED juostos šviesos stiprį nuo &lt;em&gt;PWMmax&lt;/em&gt; iki &lt;em&gt;PWMmin&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDRth&lt;/strong&gt; - keičiamas minimalus kambario apšviestumo lygis, prie kurio PIR/LDR darbo režimas turėtų įjungti PIR pertrauktį. LCD puslapyje yra rodomas tiek realus, iš LDR gaunamas, apšviestumo lygis procentais (nuotraukoje &amp;quot;R56&amp;quot;), tiek ir nustatomo &lt;em&gt;LDRth&lt;/em&gt; parametro vertė (nuotraukoje &amp;quot;T20&amp;quot;) procentais.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDRinv&lt;/strong&gt; - Galimybė &amp;quot;invertuoti&amp;quot; analoginio skaitmeniniu keitiklio (realiai LDR jutiklio) rodmenis. Kai &lt;em&gt;LDRinv&lt;/em&gt;=0, duomenys nėra invertuojami. &lt;em&gt;LDRinv&lt;/em&gt;=1 - invertuoja duomenis. Tiek realūs &lt;em&gt;R&lt;/em&gt;, tiek invertuoti duomenys&amp;nbsp;&lt;em&gt;I&lt;/em&gt; yra vienu metu atvaizduojami šiame LCD puslapyje.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ADCgain&lt;/strong&gt; - analoginio skaitmeninio keitiklio stiprinimo koeficiento nustatymo langas.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="rezultatai"&gt;
&lt;span id="results"&gt;&lt;/span&gt;&lt;h2&gt;Rezultatai&lt;/h2&gt;
&lt;p&gt;Štai taip atrodo mano palėpes laiptų apšvietimas. Pirmoje nuotraukoje LED juosta šviečia silpniausiu pajėgumu, antroje - didžiausiu.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6426.jpg"&gt;&lt;img alt="IMG_6426" class="aligncenter size-full wp-image-241" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6426.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6431.jpg"&gt;&lt;img alt="IMG_6431" class="aligncenter size-full wp-image-240" src="https://paulius.bautrenas.lt/images/ledctrl-led-juostos-valdiklis/IMG_6431.jpg" style="width: 636px; height: 475px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O čia keli filmukai, kai veikia valdiklis. Filmavimo metu buvo įjungtas darbo režimas &amp;quot;PIR/LDR&amp;quot;.&lt;/p&gt;
&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/103897326" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/103897327" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;div class="vimeo" align="left"&gt;&lt;iframe width="420" height="315" src="https://player.vimeo.com/video/103897328" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class="section" id="atsisiutimai"&gt;
&lt;span id="download"&gt;&lt;/span&gt;&lt;h2&gt;Atsisiutimai&lt;/h2&gt;
&lt;p&gt;Valdiklio schemą, PCB ir programinę įrangą rasite&amp;nbsp;&lt;a class="reference external" href="https://github.com/pauliusbau/electronics-farm/tree/master/staircase_lamp"&gt;Github'e&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="Elektronika"></category><category term="Atmega"></category><category term="ATMega8"></category><category term="Atmel"></category><category term="LDR"></category><category term="LDR PI"></category><category term="LED"></category><category term="LED strip"></category><category term="PI"></category><category term="PIR"></category><category term="PWM"></category></entry><entry><title>Tunex Wireless Speaker CP-0180-A1</title><link href="https://paulius.bautrenas.lt/tunex-wireless-speaker-cp-0180-a1.html" rel="alternate"></link><published>2014-06-27T11:25:00+03:00</published><updated>2014-06-27T11:25:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-06-27:/tunex-wireless-speaker-cp-0180-a1.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976.jpg"&gt;&lt;img alt="IMG_4976" class="aligncenter wp-image-203 size-medium" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976-e1403851962349-300x281.jpg" style="width: 300px; height: 281px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Taigi, prieš gera mėnesiuką beklaidžiojant &lt;a class="reference external" href="https://www.youtube.com/watch?v=3gpNTEaRgNA&amp;amp;feature=kp"&gt;maximoje&lt;/a&gt;, akis užkliuvo už šio daikto. Kaip tik seniai svajojau apie belaidę kolonėlę savo durnaphonui, o dar ir akcija nebloga buvo... Susigundžiau..
Ant dėžutės nieko įdomaus. Parašyta, tik kad kalonėlė yra maitinama iš 3 AA baterijų ir jos maksimali galia yra 2x2W. Keista, bet visiškai …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976.jpg"&gt;&lt;img alt="IMG_4976" class="aligncenter wp-image-203 size-medium" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976-e1403851962349-300x281.jpg" style="width: 300px; height: 281px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Taigi, prieš gera mėnesiuką beklaidžiojant &lt;a class="reference external" href="https://www.youtube.com/watch?v=3gpNTEaRgNA&amp;amp;feature=kp"&gt;maximoje&lt;/a&gt;, akis užkliuvo už šio daikto. Kaip tik seniai svajojau apie belaidę kolonėlę savo durnaphonui, o dar ir akcija nebloga buvo... Susigundžiau..
Ant dėžutės nieko įdomaus. Parašyta, tik kad kalonėlė yra maitinama iš 3 AA baterijų ir jos maksimali galia yra 2x2W. Keista, bet visiškai neaprašyta, kokią sąsaja (WiFi, Bluetouth ar pan.) kolonėlė bendrauja su telefonu. Iš mažo paveikslėlio dėžutės priekyje, suprask, ale padėk telefoną ant kolonėlės ir viskas veiks. Iš principo taip ir yra, bet kaip? &lt;a class="reference external" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/magic-spongebob.gif"&gt;Magija? :D&lt;/a&gt; Na bet apie viską iš eilės..&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4977-e1403852300591.jpg"&gt;&lt;img alt="IMG_4977" class="aligncenter wp-image-202 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4977-e1403852300591-764x1024.jpg" style="width: 400px; height: 536px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4978-e1403852313434.jpg"&gt;&lt;img alt="IMG_4978" class="aligncenter wp-image-201 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4978-e1403852313434-764x1024.jpg" style="width: 400px; height: 536px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pati kolonėlė atrodo tikrai gražiai (kaip už 20 Lt). Ant korpuso - jokių nesąmonių. Tiesiog du garsiakalbiai iš šonų, įjungimo mygtukas ir power/activity mėlynas šviesos diodas. Ant dugno, baterijų dangtelis. Tiesiog super.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976-e1403851962349.jpg"&gt;&lt;img alt="image1" class="aligncenter size-large wp-image-203" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4976.jpg" style="width: 400px; height: 536px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4973-e1403853546473.jpg"&gt;&lt;img alt="IMG_4973" class="aligncenter size-large wp-image-206" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4973-e1403853546473-732x1024.jpg" style="width: 400px; height: 536px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4975-e1403852338343.jpg"&gt;&lt;img alt="IMG_4975" class="aligncenter wp-image-204 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4975-e1403853362918-854x1024.jpg" style="width: 400px; height: 509px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O kas gi viduje gyvena?&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4970.jpg"&gt;&lt;img alt="IMG_4970" class="aligncenter size-large wp-image-208" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4970-1024x764.jpg" style="width: 625px; height: 466px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kaip ir reikėjo tikėtis, viduje nieko ypatingo.. Maža PCB ir du garsiakalbiai.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4968.jpg"&gt;&lt;img alt="IMG_4968" class="aligncenter wp-image-210 size-large" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4968-e1403853890237-764x1024.jpg" style="width: 625px; height: 837px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4965-e1403853835254.jpg"&gt;&lt;img alt="IMG_4965" class="aligncenter size-large wp-image-213" src="https://paulius.bautrenas.lt/images/tunex-wireless-speaker-cp-0180-a1/IMG_4965-e1403853835254-764x1024.jpg" style="width: 625px; height: 837px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Galinėje PCB pusėje AMS1117 3,3V stabilizatorius ir pora pasyvių elementų. Kitoje pusėje &lt;a class="reference external" href="http://vanzhen.en.seekic.com/product/integrated_circuits_ics/NS4203.html"&gt;NS4203&lt;/a&gt; 3W audio stiprintuvas, kažkoks ultra pigus mikrovaldiklis, užsiimantis įrenginio įjungimu/išjungimu ir status diodo mirksinimu į taktą, keli pasyvūs elementai ir du didžiuliai droseliai. Taip, droseliai! Vat taip šita beleidė kolonėlė ir veikia: ant kolonėlės uždėjus telefoną, telefono garsiakalbių signalas yra &amp;quot;nuimamas&amp;quot; būtent šiais droseliais, sustiprinamas ir išduodamas per kolonėlės garsiakalbius. Elementaru ir gudru. Jokių WiFi, Bluetooth, kabelių ir pan. Vienintelis trūkumas, kad šis magnetinis garso stiprinimas yra gan jautrus el. triukšmams, todėl kolonėlė mėgsta šiek tiek šnypšti. Bet gyventi galima.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Reziumė:&lt;/strong&gt; daigtas pigus ir visai vykęs, tačiau gyvenimą šiek tiek trumpina kolonėlės polinkis prisigaudyti eterio triukšmų. Garso kokybė - visai nieko, gaila, kad tik kolonėlės stiprinimo koeficientas nėra keičiamas, t. y. garso lygis yra reguliuojamas tik telefone: kuo garsiau plyšaus telefonas, tuo garsiau rėks kolonėlė.&lt;/p&gt;
</content><category term="Elektronika"></category><category term="CP-0180-A1"></category><category term="induction speaker"></category><category term="NS4203"></category><category term="wireless speaker"></category></entry><entry><title>JasperServer date input parameters: kaip nustatyti gudrias "default" vertes</title><link href="https://paulius.bautrenas.lt/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes.html" rel="alternate"></link><published>2014-06-02T14:32:00+03:00</published><updated>2014-06-02T14:32:00+03:00</updated><author><name>pauliusbau</name></author><id>tag:paulius.bautrenas.lt,2014-06-02:/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes.html</id><summary type="html">&lt;p&gt;&lt;img alt="data_defaul_value" class="aligncenter size-full wp-image-150" src="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/data_defaul_value.png" style="width: 554px; height: 195px;" /&gt;&lt;/p&gt;
&lt;p&gt;Kažkada sau prisigalvojau galvos skausmo (gi lengvai gyventi neįdomu) ir nusprendžiau kai kurioms savo JasperServer ataskaitoms suprogramuoti standartines (angl. &lt;em&gt;default&lt;/em&gt;) ataskaitos parametrų reikšmes. Konkrečiau, norėjau kad vienos ataskaitos būtų visada automatiškai generuojamos &amp;quot;už praėjusį mėnesį&amp;quot;, o vykdant kitas ataskaitas, vartotojui būtų siūlomos dažniausiai pageidaujamos datos, pav. pirma ir dabartinė einamojo …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="data_defaul_value" class="aligncenter size-full wp-image-150" src="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/data_defaul_value.png" style="width: 554px; height: 195px;" /&gt;&lt;/p&gt;
&lt;p&gt;Kažkada sau prisigalvojau galvos skausmo (gi lengvai gyventi neįdomu) ir nusprendžiau kai kurioms savo JasperServer ataskaitoms suprogramuoti standartines (angl. &lt;em&gt;default&lt;/em&gt;) ataskaitos parametrų reikšmes. Konkrečiau, norėjau kad vienos ataskaitos būtų visada automatiškai generuojamos &amp;quot;už praėjusį mėnesį&amp;quot;, o vykdant kitas ataskaitas, vartotojui būtų siūlomos dažniausiai pageidaujamos datos, pav. pirma ir dabartinė einamojo mėnesio diena.&lt;/p&gt;
&lt;p&gt;Pirmąją užduoti nusprendžiau realizuoti grynai SQL kode. Duomenis traukiu iš Oracle 11g DB, todėl SQL užklausoje galėjau sau leisti štai tokią sąlygą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;between&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sysdate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;MM&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;MM&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sysdate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;MM&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Iš principo, šioje sąlygoje &lt;strong&gt;trunc(sysdate,'MM')-1&lt;/strong&gt; - gražina paskutinę praėjusio mėnesio dieną, o &lt;strong&gt;trunc(trunc(sysdate,'MM')-1,'MM')&lt;/strong&gt; - pirmą praėjusio mėnesio dieną.&lt;/p&gt;
&lt;p&gt;Pavyzdžiui, įvykdžius štai tokią užklausą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;
&lt;span class="n"&gt;sysdate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sysdate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;MM&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;MM&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="n"&gt;trunc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sysdate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;MM&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dual&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Gausime tokį rezultatą:&lt;/p&gt;
&lt;p&gt;&lt;img alt="sql" class="aligncenter size-full wp-image-150" src="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/sql.png" style="width: 487px; height: 248px;" /&gt;&lt;/p&gt;
&lt;p&gt;Čia kaip ir viskas aišku, tačiau vien tik SQL kodu antrosios sau užsibrėžtos užduoties išspręsti nepavyks. Teks pasitelkti Java ir Jasper input parametrų savybę &amp;quot;Defaul Value Expression&amp;quot;.&lt;/p&gt;
&lt;p&gt;Tarkim, turim du ataskaitos parametrus &amp;quot;Data nuo&amp;quot; ir &amp;quot;Data iki&amp;quot;, kurie vykdant ataskaitą susigeneruoja taip:&lt;/p&gt;
&lt;p&gt;&lt;img alt="data_be_defaul_value" class="aligncenter size-full wp-image-156" src="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/data_be_defaul_value.png" style="width: 561px; height: 199px;" /&gt;&lt;/p&gt;
&lt;p&gt;Mes norim, kad &amp;quot;Data nuo&amp;quot; visada įgautų pirmą mėnesio dieną, o &amp;quot;Data iki&amp;quot; esamą mėnesio dieną. Kitaip sakant, jeigu šiandien yra &lt;em&gt;2014-06-02&lt;/em&gt;, mes norime, kad &amp;quot;Data nuo&amp;quot; būtų lygi &lt;em&gt;2014-06-01&lt;/em&gt;, o &amp;quot;Data iki&amp;quot; - &lt;em&gt;2014-06-02.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="data_defaul_value" class="aligncenter size-full wp-image-150" src="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/data_defaul_value.png" style="width: 554px; height: 195px;" /&gt;&lt;/p&gt;
&lt;p&gt;Kad gautume pageidaujamą rezultatą, parametro &amp;quot;Data nuo&amp;quot; savybėse (angl. &lt;em&gt;properties&lt;/em&gt;), parametre &amp;quot;Defaul Value Expression&amp;quot; įrašome štai tokį kodą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;yyyy-MM-dd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="n"&gt;DateUtils&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;truncate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DateUtils&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addMonths&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Calendar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MONTH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O parametro &amp;quot;Data iki&amp;quot; savybėse (angl. &lt;em&gt;properties&lt;/em&gt;),&amp;nbsp; &amp;quot;Defaul Value Expression&amp;quot; įrašome štai tokį kodą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;yyyy-MM-dd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kadangi pirmajame kode panaudojome &lt;a class="reference external" href="http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html"&gt;klasę DateUtils&lt;/a&gt;, šią klasę yra būtina įtraukti į kuriamą ataskaitą. iReport aplinkoje, tai yra atliekama ataskaitos savybių (angl. &lt;em&gt;Properties&lt;/em&gt;) punkte &amp;quot;Imports&amp;quot;&amp;nbsp; įrašius štai tokį kodą:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commons&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;time&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/imports.png"&gt;&lt;img alt="imports" class="alignleft wp-image-162" src="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/imports-300x279.png" style="width: 248px; height: 231px;" /&gt;&lt;/a&gt;
&lt;a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/imports2.png"&gt;&lt;img alt="imports2" class="alignleft size-medium wp-image-161" src="https://paulius.bautrenas.lt/images/jasperserver-date-input-parameters-kaip-nustatyti-gudrias-default-vertes/imports2-300x227.png" style="width: 300px; height: 227px;" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Note for myself: Neseniai prisireikė duomenis ištraukti už vakar dieną. Tai realizavau su tokiomis &amp;quot;Defaul Value Expression&amp;quot; reikšmėmis:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="na"&gt;getTime&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;yyyy-MM-dd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</content><category term="Programavimas"></category><category term="current day"></category><category term="Defaul Value Expression"></category><category term="first day of current month"></category><category term="first day of last month"></category><category term="iReport"></category><category term="JasperServer"></category><category term="last day of last month"></category></entry></feed>