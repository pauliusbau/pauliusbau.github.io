<!DOCTYPE html>
<html lang="lt" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Klaidingų duomenų paieška Tabibitosan metodu - Paulius Bautrėnas</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://paulius.bautrenas.lt/klaidingu-duomenu-paieska-tabibitosan-metodu.html">

        <meta name="author" content="pauliusbau" />
        <meta name="keywords" content="data gaps,duomenų trūkis,gaps,gaps and islands,islands,sql,tabibitosan" />
        <meta name="description" content="Darbe iš nutolusių įrenginių kelis kartus per valanda surenkam įvairių meteorologinių jutiklių duomenis. Mums ganėtinai svarbu, kad įrenginys veiktų tvarkingai ir visą laiką fiksuotų realią informaciją. Žinoma, visko pasitaiko: lūžta ryšio įrenginiai ar valdikliai, dingsta elektra arba sugenda pavieniai jutikliai. Kaip identifikuoju viso įrenginio veikimą, jau esu rašęs ankščiau poste …" />

        <meta property="og:site_name" content="Paulius Bautrėnas" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Klaidingų duomenų paieška Tabibitosan metodu"/>
        <meta property="og:url" content="https://paulius.bautrenas.lt/klaidingu-duomenu-paieska-tabibitosan-metodu.html"/>
        <meta property="og:description" content="Darbe iš nutolusių įrenginių kelis kartus per valanda surenkam įvairių meteorologinių jutiklių duomenis. Mums ganėtinai svarbu, kad įrenginys veiktų tvarkingai ir visą laiką fiksuotų realią informaciją. Žinoma, visko pasitaiko: lūžta ryšio įrenginiai ar valdikliai, dingsta elektra arba sugenda pavieniai jutikliai. Kaip identifikuoju viso įrenginio veikimą, jau esu rašęs ankščiau poste …"/>
        <meta property="article:published_time" content="2016-08-26" />
            <meta property="article:section" content="Programavimas" />
            <meta property="article:tag" content="data gaps" />
            <meta property="article:tag" content="duomenų trūkis" />
            <meta property="article:tag" content="gaps" />
            <meta property="article:tag" content="gaps and islands" />
            <meta property="article:tag" content="islands" />
            <meta property="article:tag" content="sql" />
            <meta property="article:tag" content="tabibitosan" />
            <meta property="article:author" content="pauliusbau" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://paulius.bautrenas.lt/theme/css/bootstrap.darkly.min.css" type="text/css"/>
    <link href="https://paulius.bautrenas.lt/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://paulius.bautrenas.lt/theme/css/pygments/monokai.css" rel="stylesheet">
    <link rel="stylesheet" href="https://paulius.bautrenas.lt/theme/css/style.css" type="text/css"/>

        <link href="https://paulius.bautrenas.lt/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Paulius Bautrėnas ATOM Feed"/>

        <link href="https://paulius.bautrenas.lt/feeds/programavimas.atom.xml" type="application/atom+xml" rel="alternate"
              title="Paulius Bautrėnas Programavimas ATOM Feed"/>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id='G-QZDGKTE256'"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-QZDGKTE256');
    </script>
    <!-- End Google Analytics Code -->
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','');</script>
    <!-- End Google Tag Manager -->

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://paulius.bautrenas.lt/" class="navbar-brand">
Paulius Bautrėnas            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="https://paulius.bautrenas.lt/category/elektronika.html">Elektronika</a>
                        </li>
                        <li class="active">
                            <a href="https://paulius.bautrenas.lt/category/programavimas.html">Programavimas</a>
                        </li>
                        <li >
                            <a href="https://paulius.bautrenas.lt/category/rand.html">Rand()</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://paulius.bautrenas.lt/klaidingu-duomenu-paieska-tabibitosan-metodu.html"
                       rel="bookmark"
                       title="Permalink to Klaidingų duomenų paieška Tabibitosan metodu">
                        Klaidingų duomenų paieška Tabibitosan metodu
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-08-26T14:19:00+03:00"> pn 26 rugpjutis 2016</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://paulius.bautrenas.lt/tag/data-gaps.html">data gaps</a>
        /
	<a href="https://paulius.bautrenas.lt/tag/duomenu-trukis.html">duomenų trūkis</a>
        /
	<a href="https://paulius.bautrenas.lt/tag/gaps.html">gaps</a>
        /
	<a href="https://paulius.bautrenas.lt/tag/gaps-and-islands.html">gaps and islands</a>
        /
	<a href="https://paulius.bautrenas.lt/tag/islands.html">islands</a>
        /
	<a href="https://paulius.bautrenas.lt/tag/sql.html">sql</a>
        /
	<a href="https://paulius.bautrenas.lt/tag/tabibitosan.html">tabibitosan</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/data_island.png"><img alt="data_island" class="aligncenter size-large wp-image-1086" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/data_island-1024x225.png" style="width: 625px; height: 137px;" /></a></p>
<p>Darbe iš nutolusių įrenginių kelis kartus per valanda surenkam įvairių meteorologinių jutiklių duomenis. Mums ganėtinai svarbu, kad įrenginys veiktų tvarkingai ir visą laiką fiksuotų realią informaciją. Žinoma, visko pasitaiko: lūžta ryšio įrenginiai ar valdikliai, dingsta elektra arba sugenda pavieniai jutikliai. Kaip identifikuoju viso įrenginio veikimą, jau esu rašęs ankščiau poste apie <a class="reference external" href="oracle-hierarchines-uzklausos-su-with-ir-connect-by">hierarchines SQL užklausas</a>. Su pavienių jutiklių veikimu-neveikimu yra šiek tiek sudėtingesnė situacija. Kartais pasitaiko, kad sugedus vienam ar kitam įrenginio jutikliui, įrenginio valdiklis &quot;užsiciklina&quot; ir kiekvienos tolimesnės iteracijos metu gražina paskutinę iš jutiklio surinktą reikšmę, kas labai iškreipią suvokimą apie įrenginio duomenų kokybę.</p>
<p>Problema kaip ir aiški: norint išsiaiškinti, ar jutiklio duomenys yra &quot;geri&quot;, reikia tikrinti, ar duomenys iš vis yra ir ar reikšmės nesikartoja ilgą laiko periodą (pačių reikšmių teisingumas yra kitas klausimas). Norint, kad toks patikrinimas atneštų kažkokį žmogui suprantamą rezultatą, geriausia būtų identifikuoti laiko periodus (nuo-iki), kada duomenys buvo &quot;blogi&quot;. Tam puikiai tinka <a class="reference external" href="https://community.oracle.com/message/3991678">Tabibitosan metodas</a>. Metodas leidžia labai greitai ir paprastai surasti nuoseklius duomenų intervalus.</p>
<p>Pavyzdžiui, turime keliolika eilučių duomenų, kuriuose skaičiai didėja su pertrūkiais:</p>
<div class="highlight"><pre><span></span><span class="linenos"> 1</span>  1
<span class="linenos"> 2</span>  2
<span class="linenos"> 3</span>  3
<span class="linenos"> 4</span>  5
<span class="linenos"> 5</span>  6
<span class="linenos"> 6</span>  7
<span class="linenos"> 7</span>  10
<span class="linenos"> 8</span>  11
<span class="linenos"> 9</span>  12
<span class="linenos">10</span>  20
<span class="linenos">11</span>  21
</pre></div>
<p>Tabibitosan leidžia identifikuoti šiuos intervalus ir gauti gražią jų suvestinę:</p>
<div class="highlight"><pre><span></span><span class="linenos">1</span>  MIN(NUMVAL) MAX(NUMVAL)
<span class="linenos">2</span>  ------------- -------------
<span class="linenos">3</span>  1 3
<span class="linenos">4</span>  5 7
<span class="linenos">5</span>  10 12
<span class="linenos">6</span>  20 21
</pre></div>
<p>Smagiausia, kad užklausa yra genialiai paprasta ir lengvai suprantama:</p>
<div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">  </span><span class="k">with</span><span class="w"> </span><span class="n">Ex1</span><span class="w"> </span><span class="k">as</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 7</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">10</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">11</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">12</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="mi">21</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span>
<span class="linenos">13</span><span class="w">  </span><span class="p">)</span>
<span class="linenos">14</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">NumVal</span><span class="p">),</span><span class="k">max</span><span class="p">(</span><span class="n">NumVal</span><span class="p">)</span>
<span class="linenos">15</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">NumVal</span>
<span class="linenos">16</span><span class="w">  </span><span class="p">,</span><span class="n">NumVal</span><span class="o">-</span><span class="n">Row_Number</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="p">(</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">NumVal</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">disTance</span>
<span class="linenos">17</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">Ex1</span><span class="p">)</span>
<span class="linenos">18</span><span class="w">  </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">disTance</span>
<span class="linenos">19</span><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">NumVal</span><span class="p">);</span>
</pre></div>
<p>Užklausos paprastumas leidžia ją pritaikyti pagal savo poreikius. Be to, užklausa veikia su bet kokio tipo duomenų intervalais ir bet kokiu stulpelių skaičiumi. Pateikiu užklausą, kurią naudoju jutiklių duomenų klaidoms aptikti:</p>
<div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">  </span><span class="k">with</span><span class="w"> </span><span class="n">Ex2</span><span class="w"> </span><span class="k">as</span><span class="p">(</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-01&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-02&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-03&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-04&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-05&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 7</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-06&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-07&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-08&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">10</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-09&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">11</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-10&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">12</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-11&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">13</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-12&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">14</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-13&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">15</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-14&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">16</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-15&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">17</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-16&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">18</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-17&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">19</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-18&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">20</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-19&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span><span class="w"> </span><span class="k">union</span>
<span class="linenos">21</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="nb">date</span><span class="s1">&#39;2016-08-20&#39;</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">dual</span>
<span class="linenos">22</span><span class="w">  </span><span class="p">)</span>
<span class="linenos">23</span><span class="w">  </span><span class="p">,</span><span class="n">tabibitosan</span><span class="w"> </span><span class="k">as</span><span class="p">(</span>
<span class="linenos">24</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">NumVal</span><span class="p">,</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">DT</span><span class="p">)</span><span class="w"> </span><span class="n">minDT</span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">DT</span><span class="p">)</span><span class="w"> </span><span class="n">maxDT</span>
<span class="linenos">25</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">DT</span><span class="p">,</span><span class="n">NumVal</span><span class="p">,</span>
<span class="linenos">26</span><span class="w">  </span><span class="p">(</span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">DT</span><span class="p">)</span>
<span class="linenos">27</span><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">row_number</span><span class="p">()</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="p">(</span><span class="n">partition</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">NumVal</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">DT</span><span class="p">)</span>
<span class="linenos">28</span><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">disTance</span>
<span class="linenos">29</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">Ex2</span><span class="p">)</span>
<span class="linenos">30</span><span class="w">  </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">disTance</span><span class="p">,</span><span class="w"> </span><span class="n">NumVal</span>
<span class="linenos">31</span><span class="w">  </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">min</span><span class="p">(</span><span class="n">NumVal</span><span class="p">)</span>
<span class="linenos">32</span><span class="w">  </span><span class="p">)</span>
<span class="linenos">33</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tabibitosan</span>
<span class="linenos">34</span><span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="n">maxDT</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">minDT</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
<p>Užklausa veikia analogiškai pirmajai, t. y. subužklausa &quot;<em>tabibitosan</em>&quot; ieško nuoseklių &quot;<em>NumVal</em>&quot; stulpelio reikšmių intervalo, tačiau gražina nebe patį intervalą, bet datas nuo kada iki kada tam &quot;<em>NumVal</em>&quot; tikra reikšmė nesikeitė (dešinėje).</p>
<p><a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_1.jpg"><img alt="query_1" class="aligncenter size-full wp-image-1106" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_1.jpg" style="width: 220px; height: 419px;" /></a> <a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_2.jpg"><img alt="query_2" class="aligncenter size-full wp-image-1107" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_2.jpg" style="width: 353px; height: 307px;" /></a></p>
<p>Toks rezultatas, žinoma, yra labai painus. Atsirinkti kas ir kaip padeda paskutinė užklausos dalis, kuri gražina tik tuos laiko intervalus, kurie buvo didesni nei, šiuo atveju, viena para. Taip gaunam intervalus, kad duomenys buvo klaidingi. T. y. kur jų nebuvo arba nesikeitė pakankamai ilgą laiką:</p>
<p><a class="reference external image-reference" href="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_3.jpg"><img alt="query_3" class="aligncenter size-full wp-image-1105" src="https://paulius.bautrenas.lt/images/klaidingu-duomenu-paieska-tabibitosan-metodu/query_3.jpg" style="width: 349px; height: 61px;" /></a></p>

            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="https://paulius.bautrenas.lt/oracle-hierarchines-uzklausos-su-with-ir-connect-by.html">Oracle hierarchinės užklausos su WITH ir CONNECT BY</a></li>
        <li><a href="https://paulius.bautrenas.lt/dinaminis-sql-uzklausos-where-salygu-keitimas.html">Dinaminis SQL užklausos &quot;where&quot; sąlygų keitimas</a></li>
        <li><a href="https://paulius.bautrenas.lt/laiko-rezis-datos-rezio-oracle-uzklausoje.html">Laiko rėžis datos rėžio oracle užklausoje</a></li>
    </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://github.com/pauliusbau"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
    <li class="list-group-item"><a href="https://linkedin.com/in/pauliusbautrenas"><i class="fa fa-linkedin-square fa-lg"></i> LinkedIn</a></li>
    <li class="list-group-item"><a href="https://twitter.com/pauliusbau"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://modding.lt" target="_blank">modding.lt</a>
    </li>
    <li class="list-group-item">
      <a href="http://getpelican.com/" target="_blank">Pelican</a>
    </li>
    <li class="list-group-item">
      <a href="http://python.org/" target="_blank">Python.org</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2023 Paulius Bautrėnas
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://paulius.bautrenas.lt/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://paulius.bautrenas.lt/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://paulius.bautrenas.lt/theme/js/respond.min.js"></script>




</body>
</html>